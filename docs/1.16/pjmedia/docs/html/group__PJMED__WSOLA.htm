<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PJMEDIA Reference: Waveform Similarity Based Overlap-Add (WSOLA) (1.16)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->

	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJMEDIA Reference</p>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.htm"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.htm"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.htm"><span>Modules</span></a></li>
      <li><a href="annotated.htm"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.htm"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Waveform Similarity Based Overlap-Add (WSOLA)<br/>
<small>
[<a class="el" href="group__PJMEDIA__FRAME__OP.htm">Audio Manipulation Algorithms</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Time-scale modification to audio without affecting the pitch.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef typedefPJ_BEGIN_DECL <br class="typebreak"/>
struct <a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__WSOLA.htm#gafc23fa13bb115f75b30d37791a6d30da">pjmedia_wsola_option</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group__PJMED__WSOLA.htm#ggafc23fa13bb115f75b30d37791a6d30daa913f3badf6fdf31e732b2a145b8a0769">PJMEDIA_WSOLA_NO_HANNING</a> =  1, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__PJMED__WSOLA.htm#ggafc23fa13bb115f75b30d37791a6d30daa003aa9b356a21fff57fbaa1892dbb812">PJMEDIA_WSOLA_NO_PLC</a> =  2, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__PJMED__WSOLA.htm#ggafc23fa13bb115f75b30d37791a6d30daaa29b6b53a0da6285381673db6dd3ec4f">PJMEDIA_WSOLA_NO_DISCARD</a> =  4, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__PJMED__WSOLA.htm#ggafc23fa13bb115f75b30d37791a6d30daaafed428aee557de710230e53231d2242">PJMEDIA_WSOLA_NO_FADING</a> =  8
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__WSOLA.htm#ga88ff2af0659f702f147701a6b242acfc">pjmedia_wsola_create</a> (<a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, unsigned clock_rate, unsigned samples_per_frame, unsigned channel_count, unsigned options, <a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> **p_wsola)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__WSOLA.htm#ga60b9c278b43323bb1e7427e0ed2cbcbe">pjmedia_wsola_set_max_expand</a> (<a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> *wsola, unsigned msec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__WSOLA.htm#gaab683616094ea607549eaabd446100ab">pjmedia_wsola_destroy</a> (<a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> *wsola)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__WSOLA.htm#gac0a0aad1b52c6f0b5d4dbf9253b30c93">pjmedia_wsola_reset</a> (<a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> *wsola, unsigned options)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__WSOLA.htm#ga4e49f0dd4dd7e562623964a36ef527ec">pjmedia_wsola_save</a> (<a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> *wsola, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> frm[], <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> prev_lost)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__WSOLA.htm#ga8ff0a16ce4e258d69654890cad11483e">pjmedia_wsola_generate</a> (<a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> *wsola, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> frm[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__WSOLA.htm#ga03253639cec631f0741fb9522e575169">pjmedia_wsola_discard</a> (<a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> *wsola, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> buf1[], unsigned buf1_cnt, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> buf2[], unsigned buf2_cnt, unsigned *erase_cnt)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This section describes Waveform Similarity Based Overlap-Add (WSOLA) implementation in PJMEDIA. The WSOLA API here can be used both to compress (speed-up) and stretch (expand, slow down) audio playback without altering the pitch, or as a mean for performing packet loss concealment (WSOLA).</p>
<p>The WSOLA implementation is used by <a class="el" href="group__PJMED__DELAYBUF.htm">Adaptive Delay Buffer</a> and <a class="el" href="group__PJMED__PLC.htm">Packet Lost Concealment (PLC)</a>. </p>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ga0500d7b4fa31c2d481d53b176ee2425e"></a><!-- doxytag: member="wsola.h::pjmedia_wsola" ref="ga0500d7b4fa31c2d481d53b176ee2425e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef typedefPJ_BEGIN_DECL struct <a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> <a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Opaque declaration for WSOLA structure. </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="gafc23fa13bb115f75b30d37791a6d30da"></a><!-- doxytag: member="wsola.h::pjmedia_wsola_option" ref="gafc23fa13bb115f75b30d37791a6d30da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__PJMED__WSOLA.htm#gafc23fa13bb115f75b30d37791a6d30da">pjmedia_wsola_option</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>WSOLA options, can be combined with bitmask operation. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggafc23fa13bb115f75b30d37791a6d30daa913f3badf6fdf31e732b2a145b8a0769"></a><!-- doxytag: member="PJMEDIA_WSOLA_NO_HANNING" ref="ggafc23fa13bb115f75b30d37791a6d30daa913f3badf6fdf31e732b2a145b8a0769" args="" -->PJMEDIA_WSOLA_NO_HANNING</em>&nbsp;</td><td>
<p>Disable Hanning window to conserve memory. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggafc23fa13bb115f75b30d37791a6d30daa003aa9b356a21fff57fbaa1892dbb812"></a><!-- doxytag: member="PJMEDIA_WSOLA_NO_PLC" ref="ggafc23fa13bb115f75b30d37791a6d30daa003aa9b356a21fff57fbaa1892dbb812" args="" -->PJMEDIA_WSOLA_NO_PLC</em>&nbsp;</td><td>
<p>Specify that the WSOLA will not be used for PLC. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggafc23fa13bb115f75b30d37791a6d30daaa29b6b53a0da6285381673db6dd3ec4f"></a><!-- doxytag: member="PJMEDIA_WSOLA_NO_DISCARD" ref="ggafc23fa13bb115f75b30d37791a6d30daaa29b6b53a0da6285381673db6dd3ec4f" args="" -->PJMEDIA_WSOLA_NO_DISCARD</em>&nbsp;</td><td>
<p>Specify that the WSOLA will not be used to discard frames in non-contiguous buffer. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggafc23fa13bb115f75b30d37791a6d30daaafed428aee557de710230e53231d2242"></a><!-- doxytag: member="PJMEDIA_WSOLA_NO_FADING" ref="ggafc23fa13bb115f75b30d37791a6d30daaafed428aee557de710230e53231d2242" args="" -->PJMEDIA_WSOLA_NO_FADING</em>&nbsp;</td><td>
<p>Disable fade-in and fade-out feature in the transition between actual and synthetic frames in WSOLA. With fade feature enabled, WSOLA will only generate a limited number of synthetic frames (configurable with <a class="el" href="group__PJMED__WSOLA.htm#ga60b9c278b43323bb1e7427e0ed2cbcbe">pjmedia_wsola_set_max_expand()</a>), fading out the volume on every more samples it generates, and when it reaches the limit it will only generate silence. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga88ff2af0659f702f147701a6b242acfc"></a><!-- doxytag: member="wsola.h::pjmedia_wsola_create" ref="ga88ff2af0659f702f147701a6b242acfc" args="(pj_pool_t *pool, unsigned clock_rate, unsigned samples_per_frame, unsigned channel_count, unsigned options, pjmedia_wsola **p_wsola)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_wsola_create </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>clock_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>samples_per_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>channel_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> **&nbsp;</td>
          <td class="paramname"> <em>p_wsola</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create and initialize WSOLA.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>Pool to allocate memory for WSOLA. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clock_rate</em>&nbsp;</td><td>Sampling rate of audio playback. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>samples_per_frame</em>&nbsp;</td><td>Number of samples per frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channel_count</em>&nbsp;</td><td>Number of channels. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>Option flags, bitmask combination of <a class="el" href="group__PJMED__WSOLA.htm#gafc23fa13bb115f75b30d37791a6d30da">pjmedia_wsola_option</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_wsola</em>&nbsp;</td><td>Pointer to receive WSOLA structure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS or the appropriate error code. </dd></dl>

</div>
</div>
<a class="anchor" id="ga60b9c278b43323bb1e7427e0ed2cbcbe"></a><!-- doxytag: member="wsola.h::pjmedia_wsola_set_max_expand" ref="ga60b9c278b43323bb1e7427e0ed2cbcbe" args="(pjmedia_wsola *wsola, unsigned msec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_wsola_set_max_expand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> *&nbsp;</td>
          <td class="paramname"> <em>wsola</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>msec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Specify maximum number of continuous synthetic frames that can be generated by WSOLA, in milliseconds. This option will only take effect if fading is not disabled via the option when the WSOLA session was created. Default value is PJMEDIA_WSOLA_MAX_EXPAND_MSEC (see also the documentation of PJMEDIA_WSOLA_MAX_EXPAND_MSEC for more information).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>wsola</em>&nbsp;</td><td>The WSOLA session </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msec</em>&nbsp;</td><td>The duration.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS normally. </dd></dl>

</div>
</div>
<a class="anchor" id="gaab683616094ea607549eaabd446100ab"></a><!-- doxytag: member="wsola.h::pjmedia_wsola_destroy" ref="gaab683616094ea607549eaabd446100ab" args="(pjmedia_wsola *wsola)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_wsola_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> *&nbsp;</td>
          <td class="paramname"> <em>wsola</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destroy WSOLA.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>wsola</em>&nbsp;</td><td>WSOLA session.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS normally. </dd></dl>

</div>
</div>
<a class="anchor" id="gac0a0aad1b52c6f0b5d4dbf9253b30c93"></a><!-- doxytag: member="wsola.h::pjmedia_wsola_reset" ref="gac0a0aad1b52c6f0b5d4dbf9253b30c93" args="(pjmedia_wsola *wsola, unsigned options)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_wsola_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> *&nbsp;</td>
          <td class="paramname"> <em>wsola</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>options</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reset the buffer contents of WSOLA.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>wsola</em>&nbsp;</td><td>WSOLA session. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>Reset options, must be zero for now.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS normally. </dd></dl>

</div>
</div>
<a class="anchor" id="ga4e49f0dd4dd7e562623964a36ef527ec"></a><!-- doxytag: member="wsola.h::pjmedia_wsola_save" ref="ga4e49f0dd4dd7e562623964a36ef527ec" args="(pjmedia_wsola *wsola, pj_int16_t frm[], pj_bool_t prev_lost)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_wsola_save </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> *&nbsp;</td>
          <td class="paramname"> <em>wsola</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a>&nbsp;</td>
          <td class="paramname"> <em>frm</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a>&nbsp;</td>
          <td class="paramname"> <em>prev_lost</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Give one good frame to WSOLA to be kept as reference. Application must continuously give WSOLA good frames to keep its session up to date with current playback. Depending on the WSOLA implementation, this function may modify the content of the frame.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>wsola</em>&nbsp;</td><td>WSOLA session. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>frm</em>&nbsp;</td><td>The frame, which length must match the samples per frame setting of the WSOLA session. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prev_lost</em>&nbsp;</td><td>If application previously generated a synthetic frame with <a class="el" href="group__PJMED__WSOLA.htm#ga8ff0a16ce4e258d69654890cad11483e">pjmedia_wsola_generate()</a> before calling this function, specify whether that was because of packet lost. If so, set this parameter to PJ_TRUE to make WSOLA interpolate this frame with its buffer. Otherwise if this value is PJ_FALSE, WSOLA will just append this frame to the end of its buffer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS normally. </dd></dl>

</div>
</div>
<a class="anchor" id="ga8ff0a16ce4e258d69654890cad11483e"></a><!-- doxytag: member="wsola.h::pjmedia_wsola_generate" ref="ga8ff0a16ce4e258d69654890cad11483e" args="(pjmedia_wsola *wsola, pj_int16_t frm[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_wsola_generate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> *&nbsp;</td>
          <td class="paramname"> <em>wsola</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a>&nbsp;</td>
          <td class="paramname"> <em>frm</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Generate one synthetic frame from WSOLA.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>wsola</em>&nbsp;</td><td>WSOLA session. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>frm</em>&nbsp;</td><td>Buffer to receive the frame.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS normally. </dd></dl>

</div>
</div>
<a class="anchor" id="ga03253639cec631f0741fb9522e575169"></a><!-- doxytag: member="wsola.h::pjmedia_wsola_discard" ref="ga03253639cec631f0741fb9522e575169" args="(pjmedia_wsola *wsola, pj_int16_t buf1[], unsigned buf1_cnt, pj_int16_t buf2[], unsigned buf2_cnt, unsigned *erase_cnt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_wsola_discard </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMED__WSOLA.htm#ga0500d7b4fa31c2d481d53b176ee2425e">pjmedia_wsola</a> *&nbsp;</td>
          <td class="paramname"> <em>wsola</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a>&nbsp;</td>
          <td class="paramname"> <em>buf1</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>buf1_cnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a>&nbsp;</td>
          <td class="paramname"> <em>buf2</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>buf2_cnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&nbsp;</td>
          <td class="paramname"> <em>erase_cnt</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Compress or compact the specified buffer by removing some audio samples from the buffer, without altering the pitch. For this function to work, total length of the buffer must be more than twice <em>erase_cnt</em>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>wsola</em>&nbsp;</td><td>WSOLA session. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf1</em>&nbsp;</td><td>Pointer to buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf1_cnt</em>&nbsp;</td><td>Number of samples in the buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf2</em>&nbsp;</td><td>Pointer to second buffer, if the buffer is not contiguous. Otherwise this parameter must be NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf2_cnt</em>&nbsp;</td><td>Number of samples in the second buffer, if the buffer is not contiguous. Otherwise this parameter should be zero. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>erase_cnt</em>&nbsp;</td><td>On input, specify the number of samples to be erased. This function may erase more or less than the requested number, and the actual number of samples erased will be given on this argument upon returning from the function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS if some samples have been erased, PJ_ETOOSMALL if buffer is too small to be reduced, PJ_EINVAL if any of the parameters are not valid. </dd></dl>

</div>
</div>
</div>
<p>&nbsp;</p>
<hr><center>
PJMEDIA small footprint Open Source media stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
