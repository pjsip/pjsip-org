<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Clock Generator (2.13)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJMEDIA Reference</p>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Clock Generator<div class="ingroups"><a class="el" href="group__PJMEDIA__PORT.htm">Media Ports Framework</a> &raquo; <a class="el" href="group__PJMEDIA__PORT__CLOCK.htm">Clock/Timing</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Interface for generating clock.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpjmedia__clock__src.htm">pjmedia_clock_src</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpjmedia__clock__param.htm">pjmedia_clock_param</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga46fdd932265af7c3bc2580fdc8f1f627"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a></td></tr>
<tr class="separator:ga46fdd932265af7c3bc2580fdc8f1f627"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga743b97f82d25f6f7d6506e30bdbb3787"><td class="memItemLeft" align="right" valign="top">typedef void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga743b97f82d25f6f7d6506e30bdbb3787">pjmedia_clock_callback</a>(const <a class="elRef" href="../../../pjlib/docs/html/unionpj__timestamp.htm">pj_timestamp</a> *ts, void *user_data)</td></tr>
<tr class="separator:ga743b97f82d25f6f7d6506e30bdbb3787"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga52d7985daab6cff0d43313b56b27dd27"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga52d7985daab6cff0d43313b56b27dd27">pjmedia_clock_options</a> { <br />
&#160;&#160;<a class="el" href="group__PJMEDIA__CLOCK.htm#gga52d7985daab6cff0d43313b56b27dd27a590ab1fef2a777b436bc66a0aafaa258">PJMEDIA_CLOCK_NO_ASYNC</a> = 1
, <br />
&#160;&#160;<a class="el" href="group__PJMEDIA__CLOCK.htm#gga52d7985daab6cff0d43313b56b27dd27a3053143ef915a909421a5bb17eeea981">PJMEDIA_CLOCK_NO_HIGHEST_PRIO</a> = 2
<br />
 }</td></tr>
<tr class="separator:ga52d7985daab6cff0d43313b56b27dd27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac2951b56d2e38c68698ea114d0267447"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#gac2951b56d2e38c68698ea114d0267447">pjmedia_clock_src_init</a> (<a class="el" href="structpjmedia__clock__src.htm">pjmedia_clock_src</a> *clocksrc, <a class="el" href="group__PJMEDIA__TYPES.htm#ga90c297eda05c19355635cecb9e7d9323">pjmedia_type</a> media_type, unsigned clock_rate, unsigned ptime_usec)</td></tr>
<tr class="separator:gac2951b56d2e38c68698ea114d0267447"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga615ed6ee1066f1fd016d018237e88a25"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga615ed6ee1066f1fd016d018237e88a25">pjmedia_clock_src_update</a> (<a class="el" href="structpjmedia__clock__src.htm">pjmedia_clock_src</a> *clocksrc, const <a class="elRef" href="../../../pjlib/docs/html/unionpj__timestamp.htm">pj_timestamp</a> *timestamp)</td></tr>
<tr class="separator:ga615ed6ee1066f1fd016d018237e88a25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a0dd5b78985b346701e8446c3aec556"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga0a0dd5b78985b346701e8446c3aec556">pjmedia_clock_src_get_current_timestamp</a> (const <a class="el" href="structpjmedia__clock__src.htm">pjmedia_clock_src</a> *clocksrc, <a class="elRef" href="../../../pjlib/docs/html/unionpj__timestamp.htm">pj_timestamp</a> *timestamp)</td></tr>
<tr class="separator:ga0a0dd5b78985b346701e8446c3aec556"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32f3978a003a5b8926fff312ccb2e530"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gafbfd2fd08c6041ea3cb217310c0b5b48">pj_uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga32f3978a003a5b8926fff312ccb2e530">pjmedia_clock_src_get_time_msec</a> (const <a class="el" href="structpjmedia__clock__src.htm">pjmedia_clock_src</a> *clocksrc)</td></tr>
<tr class="separator:ga32f3978a003a5b8926fff312ccb2e530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7fcef875e33afd6576eda398ec943eea"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga7fcef875e33afd6576eda398ec943eea">pjmedia_clock_create</a> (<a class="elRef" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, unsigned clock_rate, unsigned channel_count, unsigned samples_per_frame, unsigned options, <a class="el" href="group__PJMEDIA__CLOCK.htm#ga743b97f82d25f6f7d6506e30bdbb3787">pjmedia_clock_callback</a> *cb, void *user_data, <a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> **p_clock)</td></tr>
<tr class="separator:ga7fcef875e33afd6576eda398ec943eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga60b5b72f02681315dadb6a700eb9e974"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga60b5b72f02681315dadb6a700eb9e974">pjmedia_clock_create2</a> (<a class="elRef" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, const <a class="el" href="structpjmedia__clock__param.htm">pjmedia_clock_param</a> *param, unsigned options, <a class="el" href="group__PJMEDIA__CLOCK.htm#ga743b97f82d25f6f7d6506e30bdbb3787">pjmedia_clock_callback</a> *cb, void *user_data, <a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> **p_clock)</td></tr>
<tr class="separator:ga60b5b72f02681315dadb6a700eb9e974"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63aa508a2422714a6cb48cbbe3ef9bef"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga63aa508a2422714a6cb48cbbe3ef9bef">pjmedia_clock_start</a> (<a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> *clock)</td></tr>
<tr class="separator:ga63aa508a2422714a6cb48cbbe3ef9bef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5ca726d552c717f01bf156f6c2c91887"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga5ca726d552c717f01bf156f6c2c91887">pjmedia_clock_stop</a> (<a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> *clock)</td></tr>
<tr class="separator:ga5ca726d552c717f01bf156f6c2c91887"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6e9ea3f6aa61eea6e564843671b0cd51"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga6e9ea3f6aa61eea6e564843671b0cd51">pjmedia_clock_modify</a> (<a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> *clock, const <a class="el" href="structpjmedia__clock__param.htm">pjmedia_clock_param</a> *param)</td></tr>
<tr class="separator:ga6e9ea3f6aa61eea6e564843671b0cd51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacc85667be2f6e9eb55a945a564b4b861"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#gacc85667be2f6e9eb55a945a564b4b861">pjmedia_clock_wait</a> (<a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> *clock, <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> wait, <a class="elRef" href="../../../pjlib/docs/html/unionpj__timestamp.htm">pj_timestamp</a> *ts)</td></tr>
<tr class="separator:gacc85667be2f6e9eb55a945a564b4b861"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga13ce44acb1b97548fb89dcdefeeb8673"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga13ce44acb1b97548fb89dcdefeeb8673">pjmedia_clock_destroy</a> (<a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> *clock)</td></tr>
<tr class="separator:ga13ce44acb1b97548fb89dcdefeeb8673"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >The clock generator provides the application with media timing, and it is used by the <a class="el" href="group__PJMEDIA__MASTER__PORT.htm">Master Port</a> for its sound clock.</p>
<p >The clock generator may be configured to run <b>asynchronously</b> (the default behavior) or <b>synchronously</b>. When it is run asynchronously, it will call the application's callback every time the clock <b>tick</b> expires. When it is run synchronously, application must continuously polls the clock generator to synchronize the timing. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga46fdd932265af7c3bc2580fdc8f1f627" name="ga46fdd932265af7c3bc2580fdc8f1f627"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga46fdd932265af7c3bc2580fdc8f1f627">&#9670;&nbsp;</a></span>pjmedia_clock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> <a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Opaque declaration for media clock. </p>

</div>
</div>
<a id="ga743b97f82d25f6f7d6506e30bdbb3787" name="ga743b97f82d25f6f7d6506e30bdbb3787"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga743b97f82d25f6f7d6506e30bdbb3787">&#9670;&nbsp;</a></span>pjmedia_clock_callback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void pjmedia_clock_callback(const <a class="elRef" href="../../../pjlib/docs/html/unionpj__timestamp.htm">pj_timestamp</a> *ts, void *user_data)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Type of media clock callback.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ts</td><td>Current timestamp, in samples. </td></tr>
    <tr><td class="paramname">user_data</td><td>Application data that is passed when the clock was created. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga52d7985daab6cff0d43313b56b27dd27" name="ga52d7985daab6cff0d43313b56b27dd27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga52d7985daab6cff0d43313b56b27dd27">&#9670;&nbsp;</a></span>pjmedia_clock_options</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__PJMEDIA__CLOCK.htm#ga52d7985daab6cff0d43313b56b27dd27">pjmedia_clock_options</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Options when creating the clock. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga52d7985daab6cff0d43313b56b27dd27a590ab1fef2a777b436bc66a0aafaa258" name="gga52d7985daab6cff0d43313b56b27dd27a590ab1fef2a777b436bc66a0aafaa258"></a>PJMEDIA_CLOCK_NO_ASYNC&#160;</td><td class="fielddoc"><p >Prevents the clock from running asynchronously. In this case, application must poll the clock continuously by calling <a class="el" href="group__PJMEDIA__CLOCK.htm#gacc85667be2f6e9eb55a945a564b4b861">pjmedia_clock_wait()</a> in order to synchronize timing. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga52d7985daab6cff0d43313b56b27dd27a3053143ef915a909421a5bb17eeea981" name="gga52d7985daab6cff0d43313b56b27dd27a3053143ef915a909421a5bb17eeea981"></a>PJMEDIA_CLOCK_NO_HIGHEST_PRIO&#160;</td><td class="fielddoc"><p >Prevent the clock from setting it's thread to highest priority. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gac2951b56d2e38c68698ea114d0267447" name="gac2951b56d2e38c68698ea114d0267447"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac2951b56d2e38c68698ea114d0267447">&#9670;&nbsp;</a></span>pjmedia_clock_src_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_clock_src_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjmedia__clock__src.htm">pjmedia_clock_src</a> *&#160;</td>
          <td class="paramname"><em>clocksrc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__TYPES.htm#ga90c297eda05c19355635cecb9e7d9323">pjmedia_type</a>&#160;</td>
          <td class="paramname"><em>media_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>clock_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>ptime_usec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This is an auxiliary function to initialize the media clock source.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clocksrc</td><td>The clock source to be initialized. </td></tr>
    <tr><td class="paramname">media_type</td><td>The media type. </td></tr>
    <tr><td class="paramname">clock_rate</td><td>The clock rate. </td></tr>
    <tr><td class="paramname">ptime_usec</td><td>Media frame interval (in usec).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga615ed6ee1066f1fd016d018237e88a25" name="ga615ed6ee1066f1fd016d018237e88a25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga615ed6ee1066f1fd016d018237e88a25">&#9670;&nbsp;</a></span>pjmedia_clock_src_update()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_clock_src_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjmedia__clock__src.htm">pjmedia_clock_src</a> *&#160;</td>
          <td class="paramname"><em>clocksrc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../../pjlib/docs/html/unionpj__timestamp.htm">pj_timestamp</a> *&#160;</td>
          <td class="paramname"><em>timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This function updates the clock source's timestamp. Application should use this function instead of updating the timestamp directly since this function will also update the last_update field of the clock source.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clocksrc</td><td>The clock source to be updated. </td></tr>
    <tr><td class="paramname">timestamp</td><td>The new timestamp, can be NULL if the current timestamp does not change (in this case it will only update the last_update field).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga0a0dd5b78985b346701e8446c3aec556" name="ga0a0dd5b78985b346701e8446c3aec556"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0a0dd5b78985b346701e8446c3aec556">&#9670;&nbsp;</a></span>pjmedia_clock_src_get_current_timestamp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_clock_src_get_current_timestamp </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpjmedia__clock__src.htm">pjmedia_clock_src</a> *&#160;</td>
          <td class="paramname"><em>clocksrc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/unionpj__timestamp.htm">pj_timestamp</a> *&#160;</td>
          <td class="paramname"><em>timestamp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This function gets the clock source's current timestamp. Application should use this function instead of accessing the timestamp directly since this function will calculate the predicted timestamp for current time, based on the values of timestamp, last_update, and clock_rate.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clocksrc</td><td>The clock source. </td></tr>
    <tr><td class="paramname">timestamp</td><td>Argument to receive the current timestamp</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga32f3978a003a5b8926fff312ccb2e530" name="ga32f3978a003a5b8926fff312ccb2e530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32f3978a003a5b8926fff312ccb2e530">&#9670;&nbsp;</a></span>pjmedia_clock_src_get_time_msec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gafbfd2fd08c6041ea3cb217310c0b5b48">pj_uint32_t</a> pjmedia_clock_src_get_time_msec </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpjmedia__clock__src.htm">pjmedia_clock_src</a> *&#160;</td>
          <td class="paramname"><em>clocksrc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This function gets the clock source's time in msec.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clocksrc</td><td>The clock source.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The clock source's time (in msec). </dd></dl>

</div>
</div>
<a id="ga7fcef875e33afd6576eda398ec943eea" name="ga7fcef875e33afd6576eda398ec943eea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7fcef875e33afd6576eda398ec943eea">&#9670;&nbsp;</a></span>pjmedia_clock_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_clock_create </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>clock_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>channel_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>samples_per_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga743b97f82d25f6f7d6506e30bdbb3787">pjmedia_clock_callback</a> *&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> **&#160;</td>
          <td class="paramname"><em>p_clock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create media clock. This creates a media clock object that will run periodically at an interval that is calculated from the audio parameters. Once created, application must call <a class="el" href="group__PJMEDIA__CLOCK.htm#ga63aa508a2422714a6cb48cbbe3ef9bef">pjmedia_clock_start()</a> to actually start the clock.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__PJMEDIA__CLOCK.htm#ga60b5b72f02681315dadb6a700eb9e974">pjmedia_clock_create2()</a></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Pool to allocate memory. </td></tr>
    <tr><td class="paramname">clock_rate</td><td>Number of samples per second. </td></tr>
    <tr><td class="paramname">channel_count</td><td>Number of channel. </td></tr>
    <tr><td class="paramname">samples_per_frame</td><td>Number of samples per frame. This argument along with clock_rate and channel_count, specifies the interval of each clock run (or clock ticks). </td></tr>
    <tr><td class="paramname">options</td><td>Bitmask of pjmedia_clock_options. </td></tr>
    <tr><td class="paramname">cb</td><td>Callback to be called for each clock tick. </td></tr>
    <tr><td class="paramname">user_data</td><td>User data, which will be passed to the callback. </td></tr>
    <tr><td class="paramname">p_clock</td><td>Pointer to receive the clock instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success, or the appropriate error code. </dd></dl>

</div>
</div>
<a id="ga60b5b72f02681315dadb6a700eb9e974" name="ga60b5b72f02681315dadb6a700eb9e974"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga60b5b72f02681315dadb6a700eb9e974">&#9670;&nbsp;</a></span>pjmedia_clock_create2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_clock_create2 </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjmedia__clock__param.htm">pjmedia_clock_param</a> *&#160;</td>
          <td class="paramname"><em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga743b97f82d25f6f7d6506e30bdbb3787">pjmedia_clock_callback</a> *&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> **&#160;</td>
          <td class="paramname"><em>p_clock</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create media clock. This creates a media clock object that will run periodically at the specified interval. Once created, application must call <a class="el" href="group__PJMEDIA__CLOCK.htm#ga63aa508a2422714a6cb48cbbe3ef9bef">pjmedia_clock_start()</a> to actually start the clock.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Pool to allocate memory. </td></tr>
    <tr><td class="paramname">param</td><td>The clock parameter. </td></tr>
    <tr><td class="paramname">options</td><td>Bitmask of pjmedia_clock_options. </td></tr>
    <tr><td class="paramname">cb</td><td>Callback to be called for each clock tick. </td></tr>
    <tr><td class="paramname">user_data</td><td>User data, which will be passed to the callback. </td></tr>
    <tr><td class="paramname">p_clock</td><td>Pointer to receive the clock instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success, or the appropriate error code. </dd></dl>

</div>
</div>
<a id="ga63aa508a2422714a6cb48cbbe3ef9bef" name="ga63aa508a2422714a6cb48cbbe3ef9bef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga63aa508a2422714a6cb48cbbe3ef9bef">&#9670;&nbsp;</a></span>pjmedia_clock_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_clock_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> *&#160;</td>
          <td class="paramname"><em>clock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Start the clock. For clock created with asynchronous flag set to TRUE, this may start a worker thread for the clock (depending on the backend clock implementation being used).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clock</td><td>The media clock.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCES on success. </dd></dl>

</div>
</div>
<a id="ga5ca726d552c717f01bf156f6c2c91887" name="ga5ca726d552c717f01bf156f6c2c91887"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5ca726d552c717f01bf156f6c2c91887">&#9670;&nbsp;</a></span>pjmedia_clock_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_clock_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> *&#160;</td>
          <td class="paramname"><em>clock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Stop the clock.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clock</td><td>The media clock.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCES on success. </dd></dl>

</div>
</div>
<a id="ga6e9ea3f6aa61eea6e564843671b0cd51" name="ga6e9ea3f6aa61eea6e564843671b0cd51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6e9ea3f6aa61eea6e564843671b0cd51">&#9670;&nbsp;</a></span>pjmedia_clock_modify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_clock_modify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> *&#160;</td>
          <td class="paramname"><em>clock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjmedia__clock__param.htm">pjmedia_clock_param</a> *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Modify the clock's parameter.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clock</td><td>The media clock. </td></tr>
    <tr><td class="paramname">param</td><td>The clock's new parameter. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCES on success. </dd></dl>

</div>
</div>
<a id="gacc85667be2f6e9eb55a945a564b4b861" name="gacc85667be2f6e9eb55a945a564b4b861"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacc85667be2f6e9eb55a945a564b4b861">&#9670;&nbsp;</a></span>pjmedia_clock_wait()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> pjmedia_clock_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> *&#160;</td>
          <td class="paramname"><em>clock</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a>&#160;</td>
          <td class="paramname"><em>wait</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/unionpj__timestamp.htm">pj_timestamp</a> *&#160;</td>
          <td class="paramname"><em>ts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Poll the media clock, and execute the callback when the clock tick has elapsed. This operation is only valid if the clock is created with async flag set to FALSE.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clock</td><td>The media clock. </td></tr>
    <tr><td class="paramname">wait</td><td>If non-zero, then the function will block until a clock tick elapsed and callback has been called. </td></tr>
    <tr><td class="paramname">ts</td><td>Optional argument to receive the current timestamp.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Non-zero if clock tick has elapsed, or FALSE if the function returns before a clock tick has elapsed. </dd></dl>

</div>
</div>
<a id="ga13ce44acb1b97548fb89dcdefeeb8673" name="ga13ce44acb1b97548fb89dcdefeeb8673"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga13ce44acb1b97548fb89dcdefeeb8673">&#9670;&nbsp;</a></span>pjmedia_clock_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_clock_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__CLOCK.htm#ga46fdd932265af7c3bc2580fdc8f1f627">pjmedia_clock</a> *&#160;</td>
          <td class="paramname"><em>clock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Destroy the clock.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">clock</td><td>The media clock.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCES on success. </dd></dl>

<p class="reference">References <a class="elRef" href="../../../pjlib/docs/html/group__pj__config.htm#gac961f7d199eeed7666ab3ec2442c1b00">PJ_END_DECL</a>.</p>

</div>
</div>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJMEDIA small footprint Open Source media stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
