<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SIP Message Summary and Message Waiting Indication (RFC 3842) (2.13)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJSIP Reference</p>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">SIP Message Summary and Message Waiting Indication (RFC 3842)<div class="ingroups"><a class="el" href="group__PJSIP__SIMPLE.htm">Event and Presence Framework</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Support for SIP MWI Extension (RFC 3842)  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa641204447cd5fb8bda33a11db089a32"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#gaa641204447cd5fb8bda33a11db089a32">pjsip_mwi_init_module</a> (<a class="el" href="group__PJSIP__TYPES.htm#ga2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *endpt, <a class="el" href="structpjsip__module.htm">pjsip_module</a> *mod_evsub)</td></tr>
<tr class="separator:gaa641204447cd5fb8bda33a11db089a32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga102955f0eadf8f09a09b59f307adbfda"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpjsip__module.htm">pjsip_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga102955f0eadf8f09a09b59f307adbfda">pjsip_mwi_instance</a> (void)</td></tr>
<tr class="separator:ga102955f0eadf8f09a09b59f307adbfda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9eb4c5d8cfb8eb9808f426112e16b162"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga9eb4c5d8cfb8eb9808f426112e16b162">pjsip_mwi_create_uac</a> (<a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *dlg, const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *user_cb, unsigned options, <a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> **p_evsub)</td></tr>
<tr class="separator:ga9eb4c5d8cfb8eb9808f426112e16b162"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ad8bfe409e2a74e1f73c59c69a5289a"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga7ad8bfe409e2a74e1f73c59c69a5289a">pjsip_mwi_create_uas</a> (<a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *dlg, const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *user_cb, <a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, <a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> **p_evsub)</td></tr>
<tr class="separator:ga7ad8bfe409e2a74e1f73c59c69a5289a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9ac47fbe558e2b4424d1e0c334ca30ff"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga9ac47fbe558e2b4424d1e0c334ca30ff">pjsip_mwi_terminate</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *sub, <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> notify)</td></tr>
<tr class="separator:ga9ac47fbe558e2b4424d1e0c334ca30ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga92ccdf4cc22335d1af1fc81ba2879724"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga92ccdf4cc22335d1af1fc81ba2879724">pjsip_mwi_initiate</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *sub, <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gafbfd2fd08c6041ea3cb217310c0b5b48">pj_uint32_t</a> expires, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr class="separator:ga92ccdf4cc22335d1af1fc81ba2879724"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5fadf8430ebbbde346aba5b2e4472157"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga5fadf8430ebbbde346aba5b2e4472157">pjsip_mwi_accept</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, int st_code, const <a class="el" href="structpjsip__hdr.htm">pjsip_hdr</a> *hdr_list)</td></tr>
<tr class="separator:ga5fadf8430ebbbde346aba5b2e4472157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2ddfb9c5f61a5260c9c624223788d364"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga2ddfb9c5f61a5260c9c624223788d364">pjsip_mwi_notify</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *sub, <a class="el" href="group__PJSIP__EVENT__NOT.htm#ga4a6454679f18fe8337a2fc78063010bf">pjsip_evsub_state</a> state, const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *state_str, const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *reason, const <a class="el" href="structpjsip__media__type.htm">pjsip_media_type</a> *mime_type, const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *body, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr class="separator:ga2ddfb9c5f61a5260c9c624223788d364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5f1753b490bb5508d144ec903249f24e"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga5f1753b490bb5508d144ec903249f24e">pjsip_mwi_current_notify</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr class="separator:ga5f1753b490bb5508d144ec903249f24e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafbd97ff78ae1d5f8f574e8d85082ca6d"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#gafbd97ff78ae1d5f8f574e8d85082ca6d">pjsip_mwi_send_request</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> *tdata)</td></tr>
<tr class="separator:gafbd97ff78ae1d5f8f574e8d85082ca6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >This module implements RFC 3842: A Message Summary and Message Waiting Indication Event Package for the Session Initiation Protocol (SIP). It uses the SIP Event Notification framework (<a class="el" href="evsub_8h.htm" title="SIP Specific Event Notification Extension (RFC 3265)">evsub.h</a>) and extends the framework by implementing "message-summary" event package. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaa641204447cd5fb8bda33a11db089a32" name="gaa641204447cd5fb8bda33a11db089a32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa641204447cd5fb8bda33a11db089a32">&#9670;&nbsp;</a></span>pjsip_mwi_init_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_init_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__TYPES.htm#ga2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__module.htm">pjsip_module</a> *&#160;</td>
          <td class="paramname"><em>mod_evsub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initialize the MWI module and register it as endpoint module and package to the event subscription module.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpt</td><td>The endpoint instance. </td></tr>
    <tr><td class="paramname">mod_evsub</td><td>The event subscription module instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS if the module is successfully initialized and registered to both endpoint and the event subscription module. </dd></dl>

</div>
</div>
<a id="ga102955f0eadf8f09a09b59f307adbfda" name="ga102955f0eadf8f09a09b59f307adbfda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga102955f0eadf8f09a09b59f307adbfda">&#9670;&nbsp;</a></span>pjsip_mwi_instance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpjsip__module.htm">pjsip_module</a> * pjsip_mwi_instance </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Get the MWI module instance.</p>
<dl class="section return"><dt>Returns</dt><dd>The MWI module instance. </dd></dl>

</div>
</div>
<a id="ga9eb4c5d8cfb8eb9808f426112e16b162" name="ga9eb4c5d8cfb8eb9808f426112e16b162"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9eb4c5d8cfb8eb9808f426112e16b162">&#9670;&nbsp;</a></span>pjsip_mwi_create_uac()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_create_uac </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *&#160;</td>
          <td class="paramname"><em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *&#160;</td>
          <td class="paramname"><em>user_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> **&#160;</td>
          <td class="paramname"><em>p_evsub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create MWI client subscription session.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlg</td><td>The underlying dialog to use. </td></tr>
    <tr><td class="paramname">user_cb</td><td>Pointer to callbacks to receive MWI subscription events. </td></tr>
    <tr><td class="paramname">options</td><td>Option flags. Currently only PJSIP_EVSUB_NO_EVENT_ID is recognized. </td></tr>
    <tr><td class="paramname">p_evsub</td><td>Pointer to receive the MWI subscription session.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga7ad8bfe409e2a74e1f73c59c69a5289a" name="ga7ad8bfe409e2a74e1f73c59c69a5289a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ad8bfe409e2a74e1f73c59c69a5289a">&#9670;&nbsp;</a></span>pjsip_mwi_create_uas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_create_uas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *&#160;</td>
          <td class="paramname"><em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *&#160;</td>
          <td class="paramname"><em>user_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> **&#160;</td>
          <td class="paramname"><em>p_evsub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create MWI server subscription session.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlg</td><td>The underlying dialog to use. </td></tr>
    <tr><td class="paramname">user_cb</td><td>Pointer to callbacks to receive MWI subscription events. </td></tr>
    <tr><td class="paramname">rdata</td><td>The incoming SUBSCRIBE request that creates the event subscription. </td></tr>
    <tr><td class="paramname">p_evsub</td><td>Pointer to receive the MWI subscription session.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga9ac47fbe558e2b4424d1e0c334ca30ff" name="ga9ac47fbe558e2b4424d1e0c334ca30ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9ac47fbe558e2b4424d1e0c334ca30ff">&#9670;&nbsp;</a></span>pjsip_mwi_terminate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_terminate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a>&#160;</td>
          <td class="paramname"><em>notify</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Forcefully destroy the MWI subscription. This function should only be called on special condition, such as when the subscription initialization has failed. For other conditions, application MUST terminate the subscription by sending the appropriate un(SUBSCRIBE) or NOTIFY.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>The MWI subscription. </td></tr>
    <tr><td class="paramname">notify</td><td>Specify whether the state notification callback should be called.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS if subscription session has been destroyed. </dd></dl>

</div>
</div>
<a id="ga92ccdf4cc22335d1af1fc81ba2879724" name="ga92ccdf4cc22335d1af1fc81ba2879724"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga92ccdf4cc22335d1af1fc81ba2879724">&#9670;&nbsp;</a></span>pjsip_mwi_initiate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_initiate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gafbfd2fd08c6041ea3cb217310c0b5b48">pj_uint32_t</a>&#160;</td>
          <td class="paramname"><em>expires</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&#160;</td>
          <td class="paramname"><em>p_tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Call this function to create request to initiate MWI subscription, to refresh subcription, or to request subscription termination.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Client subscription instance. </td></tr>
    <tr><td class="paramname">expires</td><td>Subscription expiration. If the value is set to zero, this will request unsubscription. If the value is PJSIP_EXPIRES_NOT_SPECIFIED, default expiration as defined by the package will be used. </td></tr>
    <tr><td class="paramname">p_tdata</td><td>Pointer to receive the request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga5fadf8430ebbbde346aba5b2e4472157" name="ga5fadf8430ebbbde346aba5b2e4472157"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5fadf8430ebbbde346aba5b2e4472157">&#9670;&nbsp;</a></span>pjsip_mwi_accept()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_accept </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>st_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__hdr.htm">pjsip_hdr</a> *&#160;</td>
          <td class="paramname"><em>hdr_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Accept the incoming subscription request by sending 2xx response to incoming SUBSCRIBE request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Server subscription instance. </td></tr>
    <tr><td class="paramname">rdata</td><td>The incoming subscription request message. </td></tr>
    <tr><td class="paramname">st_code</td><td>Status code, which MUST be final response. </td></tr>
    <tr><td class="paramname">hdr_list</td><td>Optional list of headers to be added in the response.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga2ddfb9c5f61a5260c9c624223788d364" name="ga2ddfb9c5f61a5260c9c624223788d364"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2ddfb9c5f61a5260c9c624223788d364">&#9670;&nbsp;</a></span>pjsip_mwi_notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#ga4a6454679f18fe8337a2fc78063010bf">pjsip_evsub_state</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&#160;</td>
          <td class="paramname"><em>state_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&#160;</td>
          <td class="paramname"><em>reason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__media__type.htm">pjsip_media_type</a> *&#160;</td>
          <td class="paramname"><em>mime_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&#160;</td>
          <td class="paramname"><em>body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&#160;</td>
          <td class="paramname"><em>p_tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >For notifier, create NOTIFY request to subscriber, and set the state of the subscription.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>The server subscription (notifier) instance. </td></tr>
    <tr><td class="paramname">state</td><td>New state to set. </td></tr>
    <tr><td class="paramname">state_str</td><td>The state string name, if state contains value other than active, pending, or terminated. Otherwise this argument is ignored. </td></tr>
    <tr><td class="paramname">reason</td><td>Specify reason if new state is terminated, otherwise put NULL. </td></tr>
    <tr><td class="paramname">mime_type</td><td>MIME type/content type of the message body. </td></tr>
    <tr><td class="paramname">body</td><td>Message body to be included in the NOTIFY request. </td></tr>
    <tr><td class="paramname">p_tdata</td><td>Pointer to receive the request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga5f1753b490bb5508d144ec903249f24e" name="ga5f1753b490bb5508d144ec903249f24e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5f1753b490bb5508d144ec903249f24e">&#9670;&nbsp;</a></span>pjsip_mwi_current_notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_current_notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&#160;</td>
          <td class="paramname"><em>p_tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create NOTIFY request containing message body from the last NOITFY message created.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Server subscription object. </td></tr>
    <tr><td class="paramname">p_tdata</td><td>Pointer to receive request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="gafbd97ff78ae1d5f8f574e8d85082ca6d" name="gafbd97ff78ae1d5f8f574e8d85082ca6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafbd97ff78ae1d5f8f574e8d85082ca6d">&#9670;&nbsp;</a></span>pjsip_mwi_send_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_send_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> *&#160;</td>
          <td class="paramname"><em>tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Send request message that was previously created with initiate(), notify(), or current_notify(). Application may also send request created with other functions, e.g. authentication. But the request MUST be either request that creates/refresh subscription or NOTIFY request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>The subscription object. </td></tr>
    <tr><td class="paramname">tdata</td><td>Request message to be sent.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

<p class="reference">References <a class="elRef" href="../../../pjlib/docs/html/group__pj__config.htm#gac961f7d199eeed7666ab3ec2442c1b00">PJ_END_DECL</a>.</p>

</div>
</div>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJSIP Open Source, high performance, small footprint, and very very portable SIP stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
