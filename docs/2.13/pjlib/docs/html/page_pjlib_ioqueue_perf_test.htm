<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Test: I/O Queue Performance (2.13)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJLIB Reference</p>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Test: I/O Queue Performance </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Test the performance of the I/O queue, using typical producer consumer test. The test should examine the effect of using multiple threads on the performance.</p>
<p >This file is <b>pjlib-test/ioq_perf.c</b></p>
<div class="fragment"><div class="line"><span class="comment">/* </span></div>
<div class="line"><span class="comment"> * Copyright (C) 2008-2011 Teluu Inc. (http://www.teluu.com)</span></div>
<div class="line"><span class="comment"> * Copyright (C) 2003-2008 Benny Prijono &lt;benny@prijono.org&gt;</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This program is free software; you can redistribute it and/or modify</span></div>
<div class="line"><span class="comment"> * it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><span class="comment"> * the Free Software Foundation; either version 2 of the License, or</span></div>
<div class="line"><span class="comment"> * (at your option) any later version.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><span class="comment"> * GNU General Public License for more details.</span></div>
<div class="line"><span class="comment"> *</span></div>
<div class="line"><span class="comment"> * You should have received a copy of the GNU General Public License</span></div>
<div class="line"><span class="comment"> * along with this program; if not, write to the Free Software</span></div>
<div class="line"><span class="comment"> * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA </span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="preprocessor">#include &quot;test.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;pjlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;pj/compat/high_precision.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if INCLUDE_IOQUEUE_PERF_TEST</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef _MSC_VER</span></div>
<div class="line"><span class="preprocessor">#   pragma warning ( disable: 4204)     </span><span class="comment">// non-constant aggregate initializer</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define THIS_FILE       &quot;ioq_perf&quot;</span></div>
<div class="line"><span class="comment">//#define TRACE_(expr)  PJ_LOG(3,expr)</span></div>
<div class="line"><span class="preprocessor">#define TRACE_(expr)</span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> thread_quit_flag;</div>
<div class="line"><span class="keyword">static</span> <a class="code hl_typedef" href="group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> last_error;</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">unsigned</span> last_error_counter;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Limit the number of send/receive to this value. The recommended value is</span></div>
<div class="line"><span class="comment"> * zero, to limit the test by some duration. IMO setting this value to non-zero</span></div>
<div class="line"><span class="comment"> * will cause the test to terminate prematurely:</span></div>
<div class="line"><span class="comment"> * a) setting it to 10000 (the old behavior) causes the test to complete in 1ms.</span></div>
<div class="line"><span class="comment"> * b) any thread that first reaches this value will cause other threads to</span></div>
<div class="line"><span class="comment"> *    quit, even if that other threads have not processed anything.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="comment">//#define LIMIT_TRANSFER        10000</span></div>
<div class="line"><span class="preprocessor">#define LIMIT_TRANSFER  0</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Silenced error(s):</span></div>
<div class="line"><span class="comment"> * -Linux/Unix: EAGAIN (Resource temporarily unavailable)</span></div>
<div class="line"><span class="comment"> * -Windows:    WSAEWOULDBLOCK</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="preprocessor">#define IS_ERROR_SILENCED(e)    ((e)==PJ_STATUS_FROM_OS(PJ_BLOCKING_ERROR_VAL))</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Descriptor for each producer/consumer pair. */</span></div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>test_item</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>          *type_name;</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga5ccc87de27d1236bc31ae3673d153984">pj_sock_t</a>            server_fd, </div>
<div class="line">                         client_fd;</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga26ca218655d86b00d807e1407854128e">pj_ioqueue_t</a>        *ioqueue;</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga89da69533fa1109f3a11ef91c489d9ad">pj_ioqueue_key_t</a>    *server_key,</div>
<div class="line">                        *client_key;</div>
<div class="line">    <a class="code hl_struct" href="structpj__ioqueue__op__key__t.htm">pj_ioqueue_op_key_t</a>  recv_op,</div>
<div class="line">                         send_op;</div>
<div class="line">    <span class="keywordtype">int</span>                  has_pending_send;</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a>            buffer_size;</div>
<div class="line">    <span class="keywordtype">char</span>                *outgoing_buffer;</div>
<div class="line">    <span class="keywordtype">char</span>                *incoming_buffer;</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a>            bytes_sent, </div>
<div class="line">                         bytes_recv;</div>
<div class="line">} test_item;</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Callback when data has been read.</span></div>
<div class="line"><span class="comment"> * Increment item-&gt;bytes_recv and ready to read the next data.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> on_read_complete(<a class="code hl_typedef" href="group__PJ__BASIC.htm#ga89da69533fa1109f3a11ef91c489d9ad">pj_ioqueue_key_t</a> *key, </div>
<div class="line">                             <a class="code hl_struct" href="structpj__ioqueue__op__key__t.htm">pj_ioqueue_op_key_t</a> *<a class="code hl_struct" href="structop__key.htm">op_key</a>,</div>
<div class="line">                             <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga173588cd6381f3ad354c23c26929093a">pj_ssize_t</a> bytes_read)</div>
<div class="line">{</div>
<div class="line">    test_item *item = (test_item*)<a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga7291c776b40b0e0fffbaaf74c70aaded">pj_ioqueue_get_user_data</a>(key);</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> rc;</div>
<div class="line">    <span class="keywordtype">int</span> data_is_available = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//TRACE_((THIS_FILE, &quot;     read complete, bytes_read=%d&quot;, bytes_read));</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <span class="keywordflow">if</span> (thread_quit_flag)</div>
<div class="line">            <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (bytes_read &lt; 0) {</div>
<div class="line">            <span class="keywordtype">char</span> errmsg[<a class="code hl_define" href="group__pj__errno.htm#ga314a8edfdcec54a086a401e97b5b0bd0">PJ_ERR_MSG_SIZE</a>];</div>
<div class="line"> </div>
<div class="line">            rc = (<a class="code hl_typedef" href="group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>)-bytes_read;</div>
<div class="line">            <span class="keywordflow">if</span> (rc != last_error) {</div>
<div class="line">                <span class="comment">//last_error = rc;</span></div>
<div class="line"> </div>
<div class="line">                <span class="comment">/* Note:</span></div>
<div class="line"><span class="comment">                 * we can receive EAGAIN (on Linux/Unix) or EWOULDBLOCK (on Win)</span></div>
<div class="line"><span class="comment">                 * when we have more than one threads competing to do recv().</span></div>
<div class="line"><span class="comment">                 * This is a normal situation even when EPOLLEXCLUSIVE is used</span></div>
<div class="line"><span class="comment">                 * (e.g two packets arrive at the same time, causing both</span></div>
<div class="line"><span class="comment">                 * threads to wake up, but thread A greedily read the packets)</span></div>
<div class="line"><span class="comment">                 * therefore we silence the error here.</span></div>
<div class="line"><span class="comment">                 */</span></div>
<div class="line">                <span class="keywordflow">if</span> (!IS_ERROR_SILENCED(rc)) {</div>
<div class="line">                    <a class="code hl_function" href="group__pj__errno.htm#ga7d2616aded0d61924fb31f4fd6ee45c0">pj_strerror</a>(rc, errmsg, <span class="keyword">sizeof</span>(errmsg));</div>
<div class="line">                    <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE,<span class="stringliteral">&quot;...error: read error, bytes_read=%d (%s)&quot;</span>,</div>
<div class="line">                              bytes_read, errmsg));</div>
<div class="line">                    <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE,</div>
<div class="line">                              <span class="stringliteral">&quot;.....additional info: type=%s, total read=%u, &quot;</span></div>
<div class="line">                              <span class="stringliteral">&quot;total sent=%u&quot;</span>,</div>
<div class="line">                              item-&gt;type_name, item-&gt;bytes_recv,</div>
<div class="line">                              item-&gt;bytes_sent));</div>
<div class="line">                }</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                last_error_counter++;</div>
<div class="line">            }</div>
<div class="line">            bytes_read = 0;</div>
<div class="line"> </div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bytes_read == 0) {</div>
<div class="line">            <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;...socket has closed!&quot;</span>));</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        item-&gt;bytes_recv += bytes_read;</div>
<div class="line">    </div>
<div class="line">        <span class="comment">/* To assure that the test quits, even if main thread</span></div>
<div class="line"><span class="comment">         * doesn&#39;t have time to run.</span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <span class="keywordflow">if</span> (LIMIT_TRANSFER &amp;&amp; item-&gt;bytes_recv&gt;item-&gt;buffer_size*LIMIT_TRANSFER)</div>
<div class="line">            thread_quit_flag = 1;</div>
<div class="line"> </div>
<div class="line">        bytes_read = item-&gt;buffer_size;</div>
<div class="line">        rc = <a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga71e08c6414a6f0cd1c1d2fde267bccbe">pj_ioqueue_recv</a>( key, <a class="code hl_struct" href="structop__key.htm">op_key</a>,</div>
<div class="line">                              item-&gt;incoming_buffer, &amp;bytes_read, 0 );</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (rc == <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a>) {</div>
<div class="line">            data_is_available = 1;</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc == <a class="code hl_define" href="group__pj__errnum.htm#ga8706796879339b5dc875e2af631d6fe7">PJ_EPENDING</a>) {</div>
<div class="line">            data_is_available = 0;</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">            data_is_available = 0;</div>
<div class="line">            <span class="keywordflow">if</span> (rc != last_error) {</div>
<div class="line">                last_error = rc;</div>
<div class="line">                app_perror(<span class="stringliteral">&quot;...error: read error(1)&quot;</span>, rc);</div>
<div class="line">            } <span class="keywordflow">else</span> {</div>
<div class="line">                last_error_counter++;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!item-&gt;has_pending_send) {</div>
<div class="line">            <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga173588cd6381f3ad354c23c26929093a">pj_ssize_t</a> sent = item-&gt;buffer_size;</div>
<div class="line">            rc = <a class="code hl_function" href="group__PJ__IOQUEUE.htm#gabf96d153949aeda0e7b9dbb742ffcda7">pj_ioqueue_send</a>(item-&gt;client_key, &amp;item-&gt;send_op,</div>
<div class="line">                                 item-&gt;outgoing_buffer, &amp;sent, 0);</div>
<div class="line">            <span class="keywordflow">if</span> (rc != <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a> &amp;&amp; rc != <a class="code hl_define" href="group__pj__errnum.htm#ga8706796879339b5dc875e2af631d6fe7">PJ_EPENDING</a>) {</div>
<div class="line">                app_perror(<span class="stringliteral">&quot;...error: write error&quot;</span>, rc);</div>
<div class="line">            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc == <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a>) {</div>
<div class="line">                item-&gt;bytes_sent += sent;</div>
<div class="line">            }</div>
<div class="line"> </div>
<div class="line">            item-&gt;has_pending_send = (rc==<a class="code hl_define" href="group__pj__errnum.htm#ga8706796879339b5dc875e2af631d6fe7">PJ_EPENDING</a>);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    } <span class="keywordflow">while</span> (data_is_available);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Callback when data has been written.</span></div>
<div class="line"><span class="comment"> * Increment item-&gt;bytes_sent and write the next data.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> on_write_complete(<a class="code hl_typedef" href="group__PJ__BASIC.htm#ga89da69533fa1109f3a11ef91c489d9ad">pj_ioqueue_key_t</a> *key, </div>
<div class="line">                              <a class="code hl_struct" href="structpj__ioqueue__op__key__t.htm">pj_ioqueue_op_key_t</a> *<a class="code hl_struct" href="structop__key.htm">op_key</a>,</div>
<div class="line">                              <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga173588cd6381f3ad354c23c26929093a">pj_ssize_t</a> bytes_sent)</div>
<div class="line">{</div>
<div class="line">    test_item *item = (test_item*) <a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga7291c776b40b0e0fffbaaf74c70aaded">pj_ioqueue_get_user_data</a>(key);</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//TRACE_((THIS_FILE, &quot;     write complete: sent = %d&quot;, bytes_sent));</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (thread_quit_flag)</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (bytes_sent &lt;= 0) {</div>
<div class="line">        <span class="keywordflow">if</span> (!IS_ERROR_SILENCED(-bytes_sent)) {</div>
<div class="line">            <a class="code hl_define" href="group__pj__errno.htm#gacb73514c3158bdeda93488e8624e7b42">PJ_PERROR</a>(3, (THIS_FILE, (<a class="code hl_typedef" href="group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>)-bytes_sent,</div>
<div class="line">                          <span class="stringliteral">&quot;...error: sending stopped. bytes_sent=%d&quot;</span>,</div>
<div class="line">                         -bytes_sent));</div>
<div class="line">        }</div>
<div class="line">        item-&gt;has_pending_send = 0;</div>
<div class="line">    } </div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!item-&gt;has_pending_send) {</div>
<div class="line">        <a class="code hl_typedef" href="group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> rc;</div>
<div class="line"> </div>
<div class="line">        item-&gt;bytes_sent += bytes_sent;</div>
<div class="line">        bytes_sent = item-&gt;buffer_size;</div>
<div class="line">        rc = <a class="code hl_function" href="group__PJ__IOQUEUE.htm#gabf96d153949aeda0e7b9dbb742ffcda7">pj_ioqueue_send</a>( item-&gt;client_key, <a class="code hl_struct" href="structop__key.htm">op_key</a>,</div>
<div class="line">                              item-&gt;outgoing_buffer, &amp;bytes_sent, 0);</div>
<div class="line">        <span class="keywordflow">if</span> (rc != <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a> &amp;&amp; rc != <a class="code hl_define" href="group__pj__errnum.htm#ga8706796879339b5dc875e2af631d6fe7">PJ_EPENDING</a>) {</div>
<div class="line">            app_perror(<span class="stringliteral">&quot;...error: write error&quot;</span>, rc);</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc == <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a>) {</div>
<div class="line">            item-&gt;bytes_sent += bytes_sent;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        item-&gt;has_pending_send = (rc==<a class="code hl_define" href="group__pj__errnum.htm#ga8706796879339b5dc875e2af631d6fe7">PJ_EPENDING</a>);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>thread_arg</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span>           id;</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga26ca218655d86b00d807e1407854128e">pj_ioqueue_t</a> *ioqueue;</div>
<div class="line">    <span class="keywordtype">unsigned</span>      loop_cnt,</div>
<div class="line">                  err_cnt,</div>
<div class="line">                  event_cnt;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* The worker thread. */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> worker_thread(<span class="keywordtype">void</span> *p)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">struct </span>thread_arg *arg = (<span class="keyword">struct </span>thread_arg*) p;</div>
<div class="line">    <span class="keyword">const</span> <a class="code hl_struct" href="structpj__time__val.htm">pj_time_val</a> timeout = {0, 100};</div>
<div class="line">    <span class="keywordtype">int</span> rc;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">while</span> (!thread_quit_flag) {</div>
<div class="line"> </div>
<div class="line">        ++arg-&gt;loop_cnt;</div>
<div class="line">        rc = <a class="code hl_function" href="group__PJ__IOQUEUE.htm#gac65cc5cb9a04f2008d1fa62709ba2d91">pj_ioqueue_poll</a>(arg-&gt;ioqueue, &amp;timeout);</div>
<div class="line">        <span class="comment">//TRACE_((THIS_FILE, &quot;     thread: poll returned rc=%d&quot;, rc));</span></div>
<div class="line">        <span class="keywordflow">if</span> (rc &lt; 0) {</div>
<div class="line">            <span class="keywordtype">char</span> errmsg[<a class="code hl_define" href="group__pj__errno.htm#ga314a8edfdcec54a086a401e97b5b0bd0">PJ_ERR_MSG_SIZE</a>];</div>
<div class="line">            <a class="code hl_function" href="group__pj__errno.htm#ga7d2616aded0d61924fb31f4fd6ee45c0">pj_strerror</a>(-rc, errmsg, <span class="keyword">sizeof</span>(errmsg));</div>
<div class="line">            <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3, (THIS_FILE, </div>
<div class="line">                       <span class="stringliteral">&quot;...error in pj_ioqueue_poll() in thread %d &quot;</span></div>
<div class="line">                       <span class="stringliteral">&quot;after %d loop: %s [pj_status_t=%d]&quot;</span>, </div>
<div class="line">                       arg-&gt;id, arg-&gt;loop_cnt, errmsg, -rc));</div>
<div class="line">            <span class="comment">//return -1;</span></div>
<div class="line">            ++arg-&gt;err_cnt;</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc &gt; 0) {</div>
<div class="line">            ++arg-&gt;event_cnt;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* Calculate the bandwidth for the specific test configuration.</span></div>
<div class="line"><span class="comment"> * The test is simple:</span></div>
<div class="line"><span class="comment"> *  - create sockpair_cnt number of producer-consumer socket pair.</span></div>
<div class="line"><span class="comment"> *  - create thread_cnt number of worker threads.</span></div>
<div class="line"><span class="comment"> *  - each producer will send buffer_size bytes data as fast and</span></div>
<div class="line"><span class="comment"> *    as soon as it can.</span></div>
<div class="line"><span class="comment"> *  - each consumer will read buffer_size bytes of data as fast </span></div>
<div class="line"><span class="comment"> *    as it could.</span></div>
<div class="line"><span class="comment"> *  - measure the total bytes received by all consumers during a</span></div>
<div class="line"><span class="comment"> *    period of time.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> perform_test(<span class="keyword">const</span> <a class="code hl_struct" href="structpj__ioqueue__cfg.htm">pj_ioqueue_cfg</a> *cfg,</div>
<div class="line">                        <span class="keywordtype">int</span> sock_type, <span class="keyword">const</span> <span class="keywordtype">char</span> *type_name,</div>
<div class="line">                        <span class="keywordtype">unsigned</span> thread_cnt, <span class="keywordtype">unsigned</span> sockpair_cnt,</div>
<div class="line">                        <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> buffer_size, </div>
<div class="line">                        <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> display_report,</div>
<div class="line">                        <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> *p_bandwidth)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">enum</span> { MSEC_DURATION = 5000 };</div>
<div class="line">    <a class="code hl_struct" href="structpj__pool__t.htm">pj_pool_t</a> *pool;</div>
<div class="line">    test_item *items;</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#gacb9d46aed6813bf142efc1c3db7a2d17">pj_thread_t</a> **thread;</div>
<div class="line">    <span class="keyword">struct </span>thread_arg *args;</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga26ca218655d86b00d807e1407854128e">pj_ioqueue_t</a> *ioqueue;</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> rc;</div>
<div class="line">    <a class="code hl_struct" href="structpj__ioqueue__callback.htm">pj_ioqueue_callback</a> ioqueue_callback;</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> total_elapsed_usec, total_received;</div>
<div class="line">    pj_highprec_t bandwidth;</div>
<div class="line">    <a class="code hl_union" href="unionpj__timestamp.htm">pj_timestamp</a> start, stop;</div>
<div class="line">    <span class="keywordtype">unsigned</span> i;</div>
<div class="line"> </div>
<div class="line">    TRACE_((THIS_FILE, <span class="stringliteral">&quot;    starting test..&quot;</span>));</div>
<div class="line"> </div>
<div class="line">    ioqueue_callback.<a class="code hl_variable" href="structpj__ioqueue__callback.htm#aaf564626f7a74bc96fa6ef96f72cb6e1">on_read_complete</a> = &amp;on_read_complete;</div>
<div class="line">    ioqueue_callback.<a class="code hl_variable" href="structpj__ioqueue__callback.htm#a70ec522e331bee4a8ed0798358b62ffe">on_write_complete</a> = &amp;on_write_complete;</div>
<div class="line"> </div>
<div class="line">    thread_quit_flag = 0;</div>
<div class="line"> </div>
<div class="line">    pool = <a class="code hl_function" href="group__PJ__POOL.htm#ga4634b31af5eb0a0178481536986f1d15">pj_pool_create</a>(mem, NULL, 4096, 4096, NULL);</div>
<div class="line">    <span class="keywordflow">if</span> (!pool)</div>
<div class="line">        <span class="keywordflow">return</span> -10;</div>
<div class="line"> </div>
<div class="line">    items = (test_item*) <a class="code hl_function" href="group__PJ__POOL.htm#ga4b3004c6b9b742351dcc951bb610ddfb">pj_pool_calloc</a>(pool, sockpair_cnt, <span class="keyword">sizeof</span>(test_item));</div>
<div class="line">    thread = (<a class="code hl_typedef" href="group__PJ__BASIC.htm#gacb9d46aed6813bf142efc1c3db7a2d17">pj_thread_t</a>**)</div>
<div class="line">             <a class="code hl_function" href="group__PJ__POOL.htm#ga14798f6ba0d0858e4f36cc8a4904bbd9">pj_pool_alloc</a>(pool, thread_cnt*<span class="keyword">sizeof</span>(<a class="code hl_typedef" href="group__PJ__BASIC.htm#gacb9d46aed6813bf142efc1c3db7a2d17">pj_thread_t</a>*));</div>
<div class="line"> </div>
<div class="line">    TRACE_((THIS_FILE, <span class="stringliteral">&quot;     creating ioqueue..&quot;</span>));</div>
<div class="line">    rc = <a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga4b4a5609d565d1ea4ccc0cd5d666200f">pj_ioqueue_create2</a>(pool, sockpair_cnt*2, cfg, &amp;ioqueue);</div>
<div class="line">    <span class="keywordflow">if</span> (rc != <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a>) {</div>
<div class="line">        app_perror(<span class="stringliteral">&quot;...error: unable to create ioqueue&quot;</span>, rc);</div>
<div class="line">        <span class="keywordflow">return</span> -15;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Initialize each producer-consumer pair. */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i=0; i&lt;sockpair_cnt; ++i) {</div>
<div class="line">        <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga173588cd6381f3ad354c23c26929093a">pj_ssize_t</a> bytes;</div>
<div class="line"> </div>
<div class="line">        items[i].type_name = type_name;</div>
<div class="line">        items[i].ioqueue = ioqueue;</div>
<div class="line">        items[i].buffer_size = buffer_size;</div>
<div class="line">        items[i].outgoing_buffer = (<span class="keywordtype">char</span>*) <a class="code hl_function" href="group__PJ__POOL.htm#ga14798f6ba0d0858e4f36cc8a4904bbd9">pj_pool_alloc</a>(pool, buffer_size);</div>
<div class="line">        items[i].incoming_buffer = (<span class="keywordtype">char</span>*) <a class="code hl_function" href="group__PJ__POOL.htm#ga14798f6ba0d0858e4f36cc8a4904bbd9">pj_pool_alloc</a>(pool, buffer_size);</div>
<div class="line">        items[i].bytes_recv = items[i].bytes_sent = 0;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* randomize outgoing buffer. */</span></div>
<div class="line">        <a class="code hl_function" href="group__PJ__PSTR.htm#gaa89224d869eb10610c4c63617dcbb752">pj_create_random_string</a>(items[i].outgoing_buffer, buffer_size);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Init operation keys. */</span></div>
<div class="line">        <a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga2ef6f3b6077c716793e2b4a488e03fe4">pj_ioqueue_op_key_init</a>(&amp;items[i].recv_op, <span class="keyword">sizeof</span>(items[i].recv_op));</div>
<div class="line">        <a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga2ef6f3b6077c716793e2b4a488e03fe4">pj_ioqueue_op_key_init</a>(&amp;items[i].send_op, <span class="keyword">sizeof</span>(items[i].send_op));</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Create socket pair. */</span></div>
<div class="line">        TRACE_((THIS_FILE, <span class="stringliteral">&quot;      calling socketpair..&quot;</span>));</div>
<div class="line">        rc = app_socketpair(<a class="code hl_define" href="group__PJ__SOCK.htm#ga8ea303b95fe973432a361e47e0459086">pj_AF_INET</a>(), sock_type, 0, </div>
<div class="line">                            &amp;items[i].server_fd, &amp;items[i].client_fd);</div>
<div class="line">        <span class="keywordflow">if</span> (rc != <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a>) {</div>
<div class="line">            app_perror(<span class="stringliteral">&quot;...error: unable to create socket pair&quot;</span>, rc);</div>
<div class="line">            <span class="keywordflow">return</span> -20;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Register server socket to ioqueue. */</span></div>
<div class="line">        TRACE_((THIS_FILE, <span class="stringliteral">&quot;      register(1)..&quot;</span>));</div>
<div class="line">        rc = <a class="code hl_function" href="group__PJ__IOQUEUE.htm#gada2faae3ca27a917b90f6fa39b758355">pj_ioqueue_register_sock</a>(pool, ioqueue, </div>
<div class="line">                                      items[i].server_fd,</div>
<div class="line">                                      &amp;items[i], &amp;ioqueue_callback,</div>
<div class="line">                                      &amp;items[i].server_key);</div>
<div class="line">        <span class="keywordflow">if</span> (rc != <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a>) {</div>
<div class="line">            app_perror(<span class="stringliteral">&quot;...error: registering server socket to ioqueue&quot;</span>, rc);</div>
<div class="line">            <span class="keywordflow">return</span> -60;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Register client socket to ioqueue. */</span></div>
<div class="line">        TRACE_((THIS_FILE, <span class="stringliteral">&quot;      register(2)..&quot;</span>));</div>
<div class="line">        rc = <a class="code hl_function" href="group__PJ__IOQUEUE.htm#gada2faae3ca27a917b90f6fa39b758355">pj_ioqueue_register_sock</a>(pool, ioqueue, </div>
<div class="line">                                      items[i].client_fd,</div>
<div class="line">                                      &amp;items[i],  &amp;ioqueue_callback,</div>
<div class="line">                                      &amp;items[i].client_key);</div>
<div class="line">        <span class="keywordflow">if</span> (rc != <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a>) {</div>
<div class="line">            app_perror(<span class="stringliteral">&quot;...error: registering server socket to ioqueue&quot;</span>, rc);</div>
<div class="line">            <span class="keywordflow">return</span> -70;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Start reading. */</span></div>
<div class="line">        TRACE_((THIS_FILE, <span class="stringliteral">&quot;      pj_ioqueue_recv..&quot;</span>));</div>
<div class="line">        bytes = items[i].buffer_size;</div>
<div class="line">        rc = <a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga71e08c6414a6f0cd1c1d2fde267bccbe">pj_ioqueue_recv</a>(items[i].server_key, &amp;items[i].recv_op,</div>
<div class="line">                             items[i].incoming_buffer, &amp;bytes,</div>
<div class="line">                             0);</div>
<div class="line">        <span class="keywordflow">if</span> (rc != <a class="code hl_define" href="group__pj__errnum.htm#ga8706796879339b5dc875e2af631d6fe7">PJ_EPENDING</a>) {</div>
<div class="line">            app_perror(<span class="stringliteral">&quot;...error: pj_ioqueue_recv&quot;</span>, rc);</div>
<div class="line">            <span class="keywordflow">return</span> -73;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Start writing. */</span></div>
<div class="line">        TRACE_((THIS_FILE, <span class="stringliteral">&quot;      pj_ioqueue_write..&quot;</span>));</div>
<div class="line">        bytes = items[i].buffer_size;</div>
<div class="line">        rc = <a class="code hl_function" href="group__PJ__IOQUEUE.htm#gabf96d153949aeda0e7b9dbb742ffcda7">pj_ioqueue_send</a>(items[i].client_key, &amp;items[i].send_op,</div>
<div class="line">                             items[i].outgoing_buffer, &amp;bytes, 0);</div>
<div class="line">        <span class="keywordflow">if</span> (rc != <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a> &amp;&amp; rc != <a class="code hl_define" href="group__pj__errnum.htm#ga8706796879339b5dc875e2af631d6fe7">PJ_EPENDING</a>) {</div>
<div class="line">            app_perror(<span class="stringliteral">&quot;...error: pj_ioqueue_write&quot;</span>, rc);</div>
<div class="line">            <span class="keywordflow">return</span> -76;</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rc == <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a>) {</div>
<div class="line">            items[i].bytes_sent += bytes;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        items[i].has_pending_send = (rc==<a class="code hl_define" href="group__pj__errnum.htm#ga8706796879339b5dc875e2af631d6fe7">PJ_EPENDING</a>);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Create the threads. */</span></div>
<div class="line">    args = (<span class="keyword">struct </span>thread_arg*) <a class="code hl_function" href="group__PJ__POOL.htm#ga4b3004c6b9b742351dcc951bb610ddfb">pj_pool_calloc</a>(pool, thread_cnt,</div>
<div class="line">                                               <span class="keyword">sizeof</span>(<span class="keyword">struct</span> thread_arg));</div>
<div class="line">    <span class="keywordflow">for</span> (i=0; i&lt;thread_cnt; ++i) {</div>
<div class="line">        <span class="keyword">struct </span>thread_arg *arg = &amp;args[i];</div>
<div class="line">        arg-&gt;id = i;</div>
<div class="line">        arg-&gt;ioqueue = ioqueue;</div>
<div class="line"> </div>
<div class="line">        rc = <a class="code hl_function" href="group__PJ__THREAD.htm#ga7b63533cf4f3ba0cba68cab49a22d722">pj_thread_create</a>( pool, NULL, </div>
<div class="line">                               &amp;worker_thread, </div>
<div class="line">                               arg, </div>
<div class="line">                               <a class="code hl_define" href="group__pj__config.htm#gac2fba901c0f4a6af0a6cfc948a420602">PJ_THREAD_DEFAULT_STACK_SIZE</a>, </div>
<div class="line">                               PJ_THREAD_SUSPENDED, &amp;thread[i] );</div>
<div class="line">        <span class="keywordflow">if</span> (rc != <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a>) {</div>
<div class="line">            app_perror(<span class="stringliteral">&quot;...error: unable to create thread&quot;</span>, rc);</div>
<div class="line">            <span class="keywordflow">return</span> -80;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Mark start time. */</span></div>
<div class="line">    rc = <a class="code hl_function" href="group__PJ__TIMESTAMP.htm#gaa419b8448d1cb55db85aeac2e86fe11c">pj_get_timestamp</a>(&amp;start);</div>
<div class="line">    <span class="keywordflow">if</span> (rc != <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a>)</div>
<div class="line">        <span class="keywordflow">return</span> -90;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Start the thread. */</span></div>
<div class="line">    TRACE_((THIS_FILE, <span class="stringliteral">&quot;     resuming all threads..&quot;</span>));</div>
<div class="line">    <span class="keywordflow">for</span> (i=0; i&lt;thread_cnt; ++i) {</div>
<div class="line">        rc = <a class="code hl_function" href="group__PJ__THREAD.htm#ga223e764be70bd61ab21a77c76be32783">pj_thread_resume</a>(thread[i]);</div>
<div class="line">        <span class="keywordflow">if</span> (rc != 0)</div>
<div class="line">            <span class="keywordflow">return</span> -100;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Wait for MSEC_DURATION seconds. </span></div>
<div class="line"><span class="comment">     * This should be as simple as pj_thread_sleep(MSEC_DURATION) actually,</span></div>
<div class="line"><span class="comment">     * but unfortunately it doesn&#39;t work when system doesn&#39;t employ</span></div>
<div class="line"><span class="comment">     * timeslicing for threads.</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line">    TRACE_((THIS_FILE, <span class="stringliteral">&quot;     wait for few seconds..&quot;</span>));</div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">        <a class="code hl_function" href="group__PJ__THREAD.htm#gad59cd6fd7390711758afcc0bde375d68">pj_thread_sleep</a>(1);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Mark end time. */</span></div>
<div class="line">        rc = <a class="code hl_function" href="group__PJ__TIMESTAMP.htm#gaa419b8448d1cb55db85aeac2e86fe11c">pj_get_timestamp</a>(&amp;stop);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (thread_quit_flag) {</div>
<div class="line">            TRACE_((THIS_FILE, <span class="stringliteral">&quot;      transfer limit reached..&quot;</span>));</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_function" href="group__PJ__TIMESTAMP.htm#gad5a0323beb04de52474b59693b4b12ac">pj_elapsed_usec</a>(&amp;start,&amp;stop) &gt; MSEC_DURATION * 1000) {</div>
<div class="line">            TRACE_((THIS_FILE, <span class="stringliteral">&quot;      time limit reached..&quot;</span>));</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">    } <span class="keywordflow">while</span> (1);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Terminate all threads. */</span></div>
<div class="line">    TRACE_((THIS_FILE, <span class="stringliteral">&quot;     terminating all threads..&quot;</span>));</div>
<div class="line">    thread_quit_flag = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (i=0; i&lt;thread_cnt; ++i) {</div>
<div class="line">        TRACE_((THIS_FILE, <span class="stringliteral">&quot;      join thread %d..&quot;</span>, i));</div>
<div class="line">        <a class="code hl_function" href="group__PJ__THREAD.htm#ga60d90ce08d2f7e92dcaa0443cf87912f">pj_thread_join</a>(thread[i]);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Calculate actual time in usec. */</span></div>
<div class="line">    total_elapsed_usec = <a class="code hl_function" href="group__PJ__TIMESTAMP.htm#gad5a0323beb04de52474b59693b4b12ac">pj_elapsed_usec</a>(&amp;start, &amp;stop);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Close all sockets. */</span></div>
<div class="line">    TRACE_((THIS_FILE, <span class="stringliteral">&quot;     closing all sockets..&quot;</span>));</div>
<div class="line">    <span class="keywordflow">for</span> (i=0; i&lt;sockpair_cnt; ++i) {</div>
<div class="line">        <a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga7c05e3b02e71e7680679c90c2adbe230">pj_ioqueue_unregister</a>(items[i].server_key);</div>
<div class="line">        <a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga7c05e3b02e71e7680679c90c2adbe230">pj_ioqueue_unregister</a>(items[i].client_key);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Destroy threads */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i=0; i&lt;thread_cnt; ++i) {</div>
<div class="line">        <a class="code hl_function" href="group__PJ__THREAD.htm#ga5435f79ad044f9ce2113af311bf2b777">pj_thread_destroy</a>(thread[i]);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Destroy ioqueue. */</span></div>
<div class="line">    TRACE_((THIS_FILE, <span class="stringliteral">&quot;     destroying ioqueue..&quot;</span>));</div>
<div class="line">    <a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga59f004632b9ae20e43fa573e6b6cb237">pj_ioqueue_destroy</a>(ioqueue);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Calculate total bytes received. */</span></div>
<div class="line">    total_received = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (i=0; i&lt;sockpair_cnt; ++i) {</div>
<div class="line">        total_received += items[i].bytes_recv;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* bandwidth = total_received*1000/total_elapsed_usec */</span></div>
<div class="line">    bandwidth = (pj_highprec_t)total_received;</div>
<div class="line">    pj_highprec_mul(bandwidth, 1000);</div>
<div class="line">    pj_highprec_div(bandwidth, total_elapsed_usec);</div>
<div class="line">    </div>
<div class="line">    *p_bandwidth = (<a class="code hl_typedef" href="group__PJ__BASIC.htm#gafbfd2fd08c6041ea3cb217310c0b5b48">pj_uint32_t</a>)bandwidth;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (display_report) {</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;  %s %d threads, %d pairs&quot;</span>, type_name,</div>
<div class="line">                  thread_cnt, sockpair_cnt));</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;  Elapsed  : %u msec&quot;</span>, total_elapsed_usec/1000));</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;  Bandwidth: %d KB/s&quot;</span>, *p_bandwidth));</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;  Threads statistics:&quot;</span>));</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;    =============================&quot;</span>));</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;    Thread  Loops  Events  Errors&quot;</span>));</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;    =============================&quot;</span>));</div>
<div class="line">        <span class="keywordflow">for</span> (i=0; i&lt;thread_cnt; ++i) {</div>
<div class="line">            <span class="keyword">struct </span>thread_arg *arg = &amp;args[i];</div>
<div class="line">            <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot; %6d  %6d  %6d  %6d&quot;</span>,</div>
<div class="line">                      arg-&gt;id, arg-&gt;loop_cnt, arg-&gt;event_cnt, arg-&gt;err_cnt));</div>
<div class="line">        }</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;    =============================&quot;</span>));</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;  Socket-pair statistics:&quot;</span>));</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;    ===================================&quot;</span>));</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;    Pair     Sent     Recv    Pct total&quot;</span>));</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;    ===================================&quot;</span>));</div>
<div class="line">        <span class="keywordflow">for</span> (i=0; i&lt;sockpair_cnt; ++i) {</div>
<div class="line">            test_item *item = &amp;items[i];</div>
<div class="line">            <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;    %4d  %5.1f MB  %5.1f MB    %5.1f%%&quot;</span>,</div>
<div class="line">                      i, item-&gt;bytes_sent/1000000.0,</div>
<div class="line">                      item-&gt;bytes_recv/1000000.0,</div>
<div class="line">                      item-&gt;bytes_recv*100.0/total_received));</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;   %.4s    %2d        %2d       %8d KB/s&quot;</span>,</div>
<div class="line">                  type_name, thread_cnt, sockpair_cnt,</div>
<div class="line">                  *p_bandwidth));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Done. */</span></div>
<div class="line">    <a class="code hl_function" href="group__PJ__POOL.htm#gade0f14f6635ecfccb576ec41c57fede5">pj_pool_release</a>(pool);</div>
<div class="line"> </div>
<div class="line">    TRACE_((THIS_FILE, <span class="stringliteral">&quot;    done..&quot;</span>));</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> ioqueue_perf_test_imp(<span class="keyword">const</span> <a class="code hl_struct" href="structpj__ioqueue__cfg.htm">pj_ioqueue_cfg</a> *cfg)</div>
<div class="line">{</div>
<div class="line">    <span class="keyword">enum</span> { BUF_SIZE = 512 };</div>
<div class="line">    <span class="keywordtype">int</span> i, rc;</div>
<div class="line">    <span class="keyword">struct </span>{</div>
<div class="line">        <span class="keywordtype">int</span>         type;</div>
<div class="line">        <span class="keyword">const</span> <span class="keywordtype">char</span> *type_name;</div>
<div class="line">        <span class="keywordtype">int</span>         thread_cnt;</div>
<div class="line">        <span class="keywordtype">int</span>         sockpair_cnt;</div>
<div class="line">    } test_param[] = </div>
<div class="line">    {</div>
<div class="line">        { <a class="code hl_define" href="group__PJ__SOCK.htm#gaaa5fa1293ffc11d0970811819b3828dc">pj_SOCK_DGRAM</a>(), <span class="stringliteral">&quot;udp&quot;</span>, 1, 1},</div>
<div class="line">        { <a class="code hl_define" href="group__PJ__SOCK.htm#gaaa5fa1293ffc11d0970811819b3828dc">pj_SOCK_DGRAM</a>(), <span class="stringliteral">&quot;udp&quot;</span>, 2, 2},</div>
<div class="line">        { <a class="code hl_define" href="group__PJ__SOCK.htm#gaaa5fa1293ffc11d0970811819b3828dc">pj_SOCK_DGRAM</a>(), <span class="stringliteral">&quot;udp&quot;</span>, 4, 4},</div>
<div class="line">        { <a class="code hl_define" href="group__PJ__SOCK.htm#gaaa5fa1293ffc11d0970811819b3828dc">pj_SOCK_DGRAM</a>(), <span class="stringliteral">&quot;udp&quot;</span>, 8, 8},</div>
<div class="line">        { <a class="code hl_define" href="group__PJ__SOCK.htm#gaaa5fa1293ffc11d0970811819b3828dc">pj_SOCK_DGRAM</a>(), <span class="stringliteral">&quot;udp&quot;</span>, 16, 16},</div>
<div class="line"> </div>
<div class="line">        { <a class="code hl_define" href="group__PJ__SOCK.htm#gae224fbf8e8bd55b40030fcd8f9645291">pj_SOCK_STREAM</a>(), <span class="stringliteral">&quot;tcp&quot;</span>, 1, 1},</div>
<div class="line">        { <a class="code hl_define" href="group__PJ__SOCK.htm#gae224fbf8e8bd55b40030fcd8f9645291">pj_SOCK_STREAM</a>(), <span class="stringliteral">&quot;tcp&quot;</span>, 2, 2},</div>
<div class="line">        { <a class="code hl_define" href="group__PJ__SOCK.htm#gae224fbf8e8bd55b40030fcd8f9645291">pj_SOCK_STREAM</a>(), <span class="stringliteral">&quot;tcp&quot;</span>, 4, 4},</div>
<div class="line">        { <a class="code hl_define" href="group__PJ__SOCK.htm#gae224fbf8e8bd55b40030fcd8f9645291">pj_SOCK_STREAM</a>(), <span class="stringliteral">&quot;tcp&quot;</span>, 8, 8},</div>
<div class="line">        { <a class="code hl_define" href="group__PJ__SOCK.htm#gae224fbf8e8bd55b40030fcd8f9645291">pj_SOCK_STREAM</a>(), <span class="stringliteral">&quot;tcp&quot;</span>, 16, 16},</div>
<div class="line">    };</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> best_bandwidth;</div>
<div class="line">    <span class="keywordtype">int</span> best_index = 0;</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot; Benchmarking %s ioqueue:&quot;</span>, <a class="code hl_function" href="group__PJ__IOQUEUE.htm#gae6041c1ae18fb855e252eb0df49440eb">pj_ioqueue_name</a>()));</div>
<div class="line">    <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;   Testing with concurency=%d, epoll_flags=0x%x&quot;</span>,</div>
<div class="line">              cfg-&gt;<a class="code hl_variable" href="structpj__ioqueue__cfg.htm#acb27aaeadf5fa65adff56b68c250c81d">default_concurrency</a>, cfg-&gt;<a class="code hl_variable" href="structpj__ioqueue__cfg.htm#ab85803d52ec881318a395a72abe1ce33">epoll_flags</a>));</div>
<div class="line">    <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;   =======================================&quot;</span>));</div>
<div class="line">    <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;   Type  Threads  Skt.Pairs      Bandwidth&quot;</span>));</div>
<div class="line">    <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;   =======================================&quot;</span>));</div>
<div class="line"> </div>
<div class="line">    best_bandwidth = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (i=0; i&lt;(int)(<span class="keyword">sizeof</span>(test_param)/<span class="keyword">sizeof</span>(test_param[0])); ++i) {</div>
<div class="line">        <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> bandwidth;</div>
<div class="line"> </div>
<div class="line">        rc = perform_test(cfg,</div>
<div class="line">                          test_param[i].type, </div>
<div class="line">                          test_param[i].type_name,</div>
<div class="line">                          test_param[i].thread_cnt, </div>
<div class="line">                          test_param[i].sockpair_cnt, </div>
<div class="line">                          BUF_SIZE, </div>
<div class="line">                          <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bead95511b40a74f4625b161dd9e42c6e6e">PJ_FALSE</a>,</div>
<div class="line">                          &amp;bandwidth);</div>
<div class="line">        <span class="keywordflow">if</span> (rc != 0)</div>
<div class="line">            <span class="keywordflow">return</span> rc;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (bandwidth &gt; best_bandwidth)</div>
<div class="line">            best_bandwidth = bandwidth, best_index = i;</div>
<div class="line"> </div>
<div class="line">        <span class="comment">/* Give it a rest before next test, to allow system to close the</span></div>
<div class="line"><span class="comment">         * sockets properly. </span></div>
<div class="line"><span class="comment">         */</span></div>
<div class="line">        <a class="code hl_function" href="group__PJ__THREAD.htm#gad59cd6fd7390711758afcc0bde375d68">pj_thread_sleep</a>(500);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, </div>
<div class="line">              <span class="stringliteral">&quot;   Best: Type=%s Threads=%d, Skt.Pairs=%d, Bandwidth=%u KB/s&quot;</span>,</div>
<div class="line">              test_param[best_index].type_name,</div>
<div class="line">              test_param[best_index].thread_cnt,</div>
<div class="line">              test_param[best_index].sockpair_cnt,</div>
<div class="line">              best_bandwidth));</div>
<div class="line">    <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot;   (Note: packet size=%d, total errors=%u)&quot;</span>, </div>
<div class="line">                         BUF_SIZE, last_error_counter));</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> * main test entry.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> ioqueue_perf_test(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code hl_enumeration" href="group__PJ__IOQUEUE.htm#ga2bcdc50ba1dc268a9a8c7749d18c9252">pj_ioqueue_epoll_flag</a> epoll_flags[] = {</div>
<div class="line"><span class="preprocessor">#if PJ_HAS_LINUX_EPOLL</span></div>
<div class="line">        <a class="code hl_enumvalue" href="group__PJ__IOQUEUE.htm#gga2bcdc50ba1dc268a9a8c7749d18c9252aae582ec72fab68f1d5d64d0c5f6d634a">PJ_IOQUEUE_EPOLL_EXCLUSIVE</a>,</div>
<div class="line">        <a class="code hl_enumvalue" href="group__PJ__IOQUEUE.htm#gga2bcdc50ba1dc268a9a8c7749d18c9252a537548522bcf5f41a7983f6d36aa1442">PJ_IOQUEUE_EPOLL_ONESHOT</a>,</div>
<div class="line">        0,</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line">        <a class="code hl_enumvalue" href="group__PJ__IOQUEUE.htm#gga2bcdc50ba1dc268a9a8c7749d18c9252a15e5f1dda79bcc01a771455c0abcff96">PJ_IOQUEUE_EPOLL_AUTO</a>,</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    };</div>
<div class="line">    <a class="code hl_typedef" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> bandwidth;</div>
<div class="line">    <a class="code hl_struct" href="structpj__ioqueue__cfg.htm">pj_ioqueue_cfg</a> cfg;</div>
<div class="line">    <span class="keywordtype">int</span> i, rc;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Defailed performance report (concurrency=1) */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i=0; i&lt;<a class="code hl_define" href="group__PJ__BASIC.htm#gacd8459212a1e5175eeb04e3a6cd76659">PJ_ARRAY_SIZE</a>(epoll_flags); ++i) {</div>
<div class="line">        <a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga7f8ea5160ad41ac46770594888579dca">pj_ioqueue_cfg_default</a>(&amp;cfg);</div>
<div class="line">        cfg.<a class="code hl_variable" href="structpj__ioqueue__cfg.htm#ab85803d52ec881318a395a72abe1ce33">epoll_flags</a> = epoll_flags[i];</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot; Detailed perf (concurrency=%d, epoll_flags=0x%x):&quot;</span>,</div>
<div class="line">                  cfg.<a class="code hl_variable" href="structpj__ioqueue__cfg.htm#acb27aaeadf5fa65adff56b68c250c81d">default_concurrency</a>, cfg.<a class="code hl_variable" href="structpj__ioqueue__cfg.htm#ab85803d52ec881318a395a72abe1ce33">epoll_flags</a>));</div>
<div class="line">        rc = perform_test(&amp;cfg,</div>
<div class="line">                          <a class="code hl_define" href="group__PJ__SOCK.htm#gaaa5fa1293ffc11d0970811819b3828dc">pj_SOCK_DGRAM</a>(),</div>
<div class="line">                          <span class="stringliteral">&quot;udp&quot;</span>,</div>
<div class="line">                          8,</div>
<div class="line">                          8,</div>
<div class="line">                          512,</div>
<div class="line">                          <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bead235b21a623d982cc561fb12bffa87c0">PJ_TRUE</a>,</div>
<div class="line">                          &amp;bandwidth);</div>
<div class="line">        <span class="keywordflow">if</span> (rc != 0)</div>
<div class="line">            <span class="keywordflow">return</span> rc;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* Defailed performance report (concurrency=0) */</span></div>
<div class="line">    <a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga7f8ea5160ad41ac46770594888579dca">pj_ioqueue_cfg_default</a>(&amp;cfg);</div>
<div class="line">    cfg.<a class="code hl_variable" href="structpj__ioqueue__cfg.htm#acb27aaeadf5fa65adff56b68c250c81d">default_concurrency</a> = <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bead95511b40a74f4625b161dd9e42c6e6e">PJ_FALSE</a>;</div>
<div class="line">    <a class="code hl_define" href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a>(3,(THIS_FILE, <span class="stringliteral">&quot; Detailed perf (concurrency=%d, epoll_flags=0x%x):&quot;</span>,</div>
<div class="line">              cfg.<a class="code hl_variable" href="structpj__ioqueue__cfg.htm#acb27aaeadf5fa65adff56b68c250c81d">default_concurrency</a>, cfg.<a class="code hl_variable" href="structpj__ioqueue__cfg.htm#ab85803d52ec881318a395a72abe1ce33">epoll_flags</a>));</div>
<div class="line">    rc = perform_test(&amp;cfg,</div>
<div class="line">                      <a class="code hl_define" href="group__PJ__SOCK.htm#gaaa5fa1293ffc11d0970811819b3828dc">pj_SOCK_DGRAM</a>(),</div>
<div class="line">                      <span class="stringliteral">&quot;udp&quot;</span>,</div>
<div class="line">                      8,</div>
<div class="line">                      8,</div>
<div class="line">                      512,</div>
<div class="line">                      <a class="code hl_enumvalue" href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bead235b21a623d982cc561fb12bffa87c0">PJ_TRUE</a>,</div>
<div class="line">                      &amp;bandwidth);</div>
<div class="line">    <span class="keywordflow">if</span> (rc != 0)</div>
<div class="line">        <span class="keywordflow">return</span> rc;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">/* The benchmark across configs */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i=0; i&lt;<a class="code hl_define" href="group__PJ__BASIC.htm#gacd8459212a1e5175eeb04e3a6cd76659">PJ_ARRAY_SIZE</a>(epoll_flags); ++i) {</div>
<div class="line">        <span class="keywordtype">int</span> concur;</div>
<div class="line">        <span class="keywordflow">for</span> (concur=0; concur&lt;2; ++concur) {</div>
<div class="line">            <a class="code hl_function" href="group__PJ__IOQUEUE.htm#ga7f8ea5160ad41ac46770594888579dca">pj_ioqueue_cfg_default</a>(&amp;cfg);</div>
<div class="line">            cfg.<a class="code hl_variable" href="structpj__ioqueue__cfg.htm#ab85803d52ec881318a395a72abe1ce33">epoll_flags</a> = epoll_flags[i];</div>
<div class="line">            cfg.<a class="code hl_variable" href="structpj__ioqueue__cfg.htm#acb27aaeadf5fa65adff56b68c250c81d">default_concurrency</a> = concur;</div>
<div class="line">            rc = ioqueue_perf_test_imp(&amp;cfg);</div>
<div class="line">            <span class="keywordflow">if</span> (rc != 0)</div>
<div class="line">                <span class="keywordflow">return</span> rc;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="comment">/* To prevent warning about &quot;translation unit is empty&quot;</span></div>
<div class="line"><span class="comment"> * when this test is disabled. </span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line"><span class="keywordtype">int</span> dummy_uiq_perf_test;</div>
<div class="line"><span class="preprocessor">#endif  </span><span class="comment">/* INCLUDE_IOQUEUE_PERF_TEST */</span><span class="preprocessor"></span></div>
<div class="line"> </div>
<div class="line"> </div>
<div class="ttc" id="agroup__PJ__BASIC_htm_ga173588cd6381f3ad354c23c26929093a"><div class="ttname"><a href="group__PJ__BASIC.htm#ga173588cd6381f3ad354c23c26929093a">pj_ssize_t</a></div><div class="ttdeci">long pj_ssize_t</div><div class="ttdef"><b>Definition:</b> types.h:64</div></div>
<div class="ttc" id="agroup__PJ__BASIC_htm_ga1dc7a356fb36bd2dee2bc7d6c7e817e4"><div class="ttname"><a href="group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a></div><div class="ttdeci">int pj_bool_t</div><div class="ttdef"><b>Definition:</b> types.h:71</div></div>
<div class="ttc" id="agroup__PJ__BASIC_htm_ga26ca218655d86b00d807e1407854128e"><div class="ttname"><a href="group__PJ__BASIC.htm#ga26ca218655d86b00d807e1407854128e">pj_ioqueue_t</a></div><div class="ttdeci">struct pj_ioqueue_t pj_ioqueue_t</div><div class="ttdef"><b>Definition:</b> types.h:210</div></div>
<div class="ttc" id="agroup__PJ__BASIC_htm_ga5ccc87de27d1236bc31ae3673d153984"><div class="ttname"><a href="group__PJ__BASIC.htm#ga5ccc87de27d1236bc31ae3673d153984">pj_sock_t</a></div><div class="ttdeci">long pj_sock_t</div><div class="ttdef"><b>Definition:</b> types.h:263</div></div>
<div class="ttc" id="agroup__PJ__BASIC_htm_ga89da69533fa1109f3a11ef91c489d9ad"><div class="ttname"><a href="group__PJ__BASIC.htm#ga89da69533fa1109f3a11ef91c489d9ad">pj_ioqueue_key_t</a></div><div class="ttdeci">struct pj_ioqueue_key_t pj_ioqueue_key_t</div><div class="ttdef"><b>Definition:</b> types.h:216</div></div>
<div class="ttc" id="agroup__PJ__BASIC_htm_ga9fdb3ceb491cd888cd30ca30d78026e8"><div class="ttname"><a href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a></div><div class="ttdeci">size_t pj_size_t</div><div class="ttdef"><b>Definition:</b> types.h:58</div></div>
<div class="ttc" id="agroup__PJ__BASIC_htm_gab43ba3167bd2a2ab4580509dbf79200e"><div class="ttname"><a href="group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a></div><div class="ttdeci">int pj_status_t</div><div class="ttdef"><b>Definition:</b> types.h:68</div></div>
<div class="ttc" id="agroup__PJ__BASIC_htm_gacb9d46aed6813bf142efc1c3db7a2d17"><div class="ttname"><a href="group__PJ__BASIC.htm#gacb9d46aed6813bf142efc1c3db7a2d17">pj_thread_t</a></div><div class="ttdeci">struct pj_thread_t pj_thread_t</div><div class="ttdef"><b>Definition:</b> types.h:236</div></div>
<div class="ttc" id="agroup__PJ__BASIC_htm_gacd8459212a1e5175eeb04e3a6cd76659"><div class="ttname"><a href="group__PJ__BASIC.htm#gacd8459212a1e5175eeb04e3a6cd76659">PJ_ARRAY_SIZE</a></div><div class="ttdeci">#define PJ_ARRAY_SIZE(a)</div><div class="ttdef"><b>Definition:</b> types.h:281</div></div>
<div class="ttc" id="agroup__PJ__BASIC_htm_gafbfd2fd08c6041ea3cb217310c0b5b48"><div class="ttname"><a href="group__PJ__BASIC.htm#gafbfd2fd08c6041ea3cb217310c0b5b48">pj_uint32_t</a></div><div class="ttdeci">unsigned int pj_uint32_t</div><div class="ttdef"><b>Definition:</b> types.h:43</div></div>
<div class="ttc" id="agroup__PJ__BASIC_htm_gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935"><div class="ttname"><a href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a></div><div class="ttdeci">@ PJ_SUCCESS</div><div class="ttdef"><b>Definition:</b> types.h:93</div></div>
<div class="ttc" id="agroup__PJ__BASIC_htm_gga65c74a186d2c92fe9f088f3e1e8688bead235b21a623d982cc561fb12bffa87c0"><div class="ttname"><a href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bead235b21a623d982cc561fb12bffa87c0">PJ_TRUE</a></div><div class="ttdeci">@ PJ_TRUE</div><div class="ttdef"><b>Definition:</b> types.h:96</div></div>
<div class="ttc" id="agroup__PJ__BASIC_htm_gga65c74a186d2c92fe9f088f3e1e8688bead95511b40a74f4625b161dd9e42c6e6e"><div class="ttname"><a href="group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bead95511b40a74f4625b161dd9e42c6e6e">PJ_FALSE</a></div><div class="ttdeci">@ PJ_FALSE</div><div class="ttdef"><b>Definition:</b> types.h:99</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_ga2bcdc50ba1dc268a9a8c7749d18c9252"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#ga2bcdc50ba1dc268a9a8c7749d18c9252">pj_ioqueue_epoll_flag</a></div><div class="ttdeci">pj_ioqueue_epoll_flag</div><div class="ttdef"><b>Definition:</b> ioqueue.h:337</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_ga2ef6f3b6077c716793e2b4a488e03fe4"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#ga2ef6f3b6077c716793e2b4a488e03fe4">pj_ioqueue_op_key_init</a></div><div class="ttdeci">void pj_ioqueue_op_key_init(pj_ioqueue_op_key_t *op_key, pj_size_t size)</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_ga4b4a5609d565d1ea4ccc0cd5d666200f"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#ga4b4a5609d565d1ea4ccc0cd5d666200f">pj_ioqueue_create2</a></div><div class="ttdeci">pj_status_t pj_ioqueue_create2(pj_pool_t *pool, pj_size_t max_fd, const pj_ioqueue_cfg *cfg, pj_ioqueue_t **ioqueue)</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_ga59f004632b9ae20e43fa573e6b6cb237"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#ga59f004632b9ae20e43fa573e6b6cb237">pj_ioqueue_destroy</a></div><div class="ttdeci">pj_status_t pj_ioqueue_destroy(pj_ioqueue_t *ioque)</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_ga71e08c6414a6f0cd1c1d2fde267bccbe"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#ga71e08c6414a6f0cd1c1d2fde267bccbe">pj_ioqueue_recv</a></div><div class="ttdeci">pj_status_t pj_ioqueue_recv(pj_ioqueue_key_t *key, pj_ioqueue_op_key_t *op_key, void *buffer, pj_ssize_t *length, pj_uint32_t flags)</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_ga7291c776b40b0e0fffbaaf74c70aaded"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#ga7291c776b40b0e0fffbaaf74c70aaded">pj_ioqueue_get_user_data</a></div><div class="ttdeci">void * pj_ioqueue_get_user_data(pj_ioqueue_key_t *key)</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_ga7c05e3b02e71e7680679c90c2adbe230"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#ga7c05e3b02e71e7680679c90c2adbe230">pj_ioqueue_unregister</a></div><div class="ttdeci">pj_status_t pj_ioqueue_unregister(pj_ioqueue_key_t *key)</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_ga7f8ea5160ad41ac46770594888579dca"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#ga7f8ea5160ad41ac46770594888579dca">pj_ioqueue_cfg_default</a></div><div class="ttdeci">void pj_ioqueue_cfg_default(pj_ioqueue_cfg *cfg)</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_gabf96d153949aeda0e7b9dbb742ffcda7"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#gabf96d153949aeda0e7b9dbb742ffcda7">pj_ioqueue_send</a></div><div class="ttdeci">pj_status_t pj_ioqueue_send(pj_ioqueue_key_t *key, pj_ioqueue_op_key_t *op_key, const void *data, pj_ssize_t *length, pj_uint32_t flags)</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_gac65cc5cb9a04f2008d1fa62709ba2d91"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#gac65cc5cb9a04f2008d1fa62709ba2d91">pj_ioqueue_poll</a></div><div class="ttdeci">int pj_ioqueue_poll(pj_ioqueue_t *ioque, const pj_time_val *timeout)</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_gada2faae3ca27a917b90f6fa39b758355"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#gada2faae3ca27a917b90f6fa39b758355">pj_ioqueue_register_sock</a></div><div class="ttdeci">pj_status_t pj_ioqueue_register_sock(pj_pool_t *pool, pj_ioqueue_t *ioque, pj_sock_t sock, void *user_data, const pj_ioqueue_callback *cb, pj_ioqueue_key_t **key)</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_gae6041c1ae18fb855e252eb0df49440eb"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#gae6041c1ae18fb855e252eb0df49440eb">pj_ioqueue_name</a></div><div class="ttdeci">const char * pj_ioqueue_name(void)</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_gga2bcdc50ba1dc268a9a8c7749d18c9252a15e5f1dda79bcc01a771455c0abcff96"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#gga2bcdc50ba1dc268a9a8c7749d18c9252a15e5f1dda79bcc01a771455c0abcff96">PJ_IOQUEUE_EPOLL_AUTO</a></div><div class="ttdeci">@ PJ_IOQUEUE_EPOLL_AUTO</div><div class="ttdef"><b>Definition:</b> ioqueue.h:351</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_gga2bcdc50ba1dc268a9a8c7749d18c9252a537548522bcf5f41a7983f6d36aa1442"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#gga2bcdc50ba1dc268a9a8c7749d18c9252a537548522bcf5f41a7983f6d36aa1442">PJ_IOQUEUE_EPOLL_ONESHOT</a></div><div class="ttdeci">@ PJ_IOQUEUE_EPOLL_ONESHOT</div><div class="ttdef"><b>Definition:</b> ioqueue.h:344</div></div>
<div class="ttc" id="agroup__PJ__IOQUEUE_htm_gga2bcdc50ba1dc268a9a8c7749d18c9252aae582ec72fab68f1d5d64d0c5f6d634a"><div class="ttname"><a href="group__PJ__IOQUEUE.htm#gga2bcdc50ba1dc268a9a8c7749d18c9252aae582ec72fab68f1d5d64d0c5f6d634a">PJ_IOQUEUE_EPOLL_EXCLUSIVE</a></div><div class="ttdeci">@ PJ_IOQUEUE_EPOLL_EXCLUSIVE</div><div class="ttdef"><b>Definition:</b> ioqueue.h:340</div></div>
<div class="ttc" id="agroup__PJ__LOG_htm_ga767b9231bf7c2b57274771cdc4bca818"><div class="ttname"><a href="group__PJ__LOG.htm#ga767b9231bf7c2b57274771cdc4bca818">PJ_LOG</a></div><div class="ttdeci">#define PJ_LOG(level, arg)</div><div class="ttdef"><b>Definition:</b> log.h:106</div></div>
<div class="ttc" id="agroup__PJ__POOL_htm_ga14798f6ba0d0858e4f36cc8a4904bbd9"><div class="ttname"><a href="group__PJ__POOL.htm#ga14798f6ba0d0858e4f36cc8a4904bbd9">pj_pool_alloc</a></div><div class="ttdeci">void * pj_pool_alloc(pj_pool_t *pool, pj_size_t size)</div></div>
<div class="ttc" id="agroup__PJ__POOL_htm_ga4634b31af5eb0a0178481536986f1d15"><div class="ttname"><a href="group__PJ__POOL.htm#ga4634b31af5eb0a0178481536986f1d15">pj_pool_create</a></div><div class="ttdeci">pj_pool_t * pj_pool_create(pj_pool_factory *factory, const char *name, pj_size_t initial_size, pj_size_t increment_size, pj_pool_callback *callback)</div></div>
<div class="ttc" id="agroup__PJ__POOL_htm_ga4b3004c6b9b742351dcc951bb610ddfb"><div class="ttname"><a href="group__PJ__POOL.htm#ga4b3004c6b9b742351dcc951bb610ddfb">pj_pool_calloc</a></div><div class="ttdeci">void * pj_pool_calloc(pj_pool_t *pool, pj_size_t count, pj_size_t elem)</div></div>
<div class="ttc" id="agroup__PJ__POOL_htm_gade0f14f6635ecfccb576ec41c57fede5"><div class="ttname"><a href="group__PJ__POOL.htm#gade0f14f6635ecfccb576ec41c57fede5">pj_pool_release</a></div><div class="ttdeci">void pj_pool_release(pj_pool_t *pool)</div></div>
<div class="ttc" id="agroup__PJ__PSTR_htm_gaa89224d869eb10610c4c63617dcbb752"><div class="ttname"><a href="group__PJ__PSTR.htm#gaa89224d869eb10610c4c63617dcbb752">pj_create_random_string</a></div><div class="ttdeci">char * pj_create_random_string(char *str, pj_size_t length)</div></div>
<div class="ttc" id="agroup__PJ__SOCK_htm_ga8ea303b95fe973432a361e47e0459086"><div class="ttname"><a href="group__PJ__SOCK.htm#ga8ea303b95fe973432a361e47e0459086">pj_AF_INET</a></div><div class="ttdeci">#define pj_AF_INET()</div><div class="ttdef"><b>Definition:</b> sock.h:113</div></div>
<div class="ttc" id="agroup__PJ__SOCK_htm_gaaa5fa1293ffc11d0970811819b3828dc"><div class="ttname"><a href="group__PJ__SOCK.htm#gaaa5fa1293ffc11d0970811819b3828dc">pj_SOCK_DGRAM</a></div><div class="ttdeci">#define pj_SOCK_DGRAM()</div><div class="ttdef"><b>Definition:</b> sock.h:162</div></div>
<div class="ttc" id="agroup__PJ__SOCK_htm_gae224fbf8e8bd55b40030fcd8f9645291"><div class="ttname"><a href="group__PJ__SOCK.htm#gae224fbf8e8bd55b40030fcd8f9645291">pj_SOCK_STREAM</a></div><div class="ttdeci">#define pj_SOCK_STREAM()</div><div class="ttdef"><b>Definition:</b> sock.h:160</div></div>
<div class="ttc" id="agroup__PJ__THREAD_htm_ga223e764be70bd61ab21a77c76be32783"><div class="ttname"><a href="group__PJ__THREAD.htm#ga223e764be70bd61ab21a77c76be32783">pj_thread_resume</a></div><div class="ttdeci">pj_status_t pj_thread_resume(pj_thread_t *thread)</div></div>
<div class="ttc" id="agroup__PJ__THREAD_htm_ga5435f79ad044f9ce2113af311bf2b777"><div class="ttname"><a href="group__PJ__THREAD.htm#ga5435f79ad044f9ce2113af311bf2b777">pj_thread_destroy</a></div><div class="ttdeci">pj_status_t pj_thread_destroy(pj_thread_t *thread)</div></div>
<div class="ttc" id="agroup__PJ__THREAD_htm_ga60d90ce08d2f7e92dcaa0443cf87912f"><div class="ttname"><a href="group__PJ__THREAD.htm#ga60d90ce08d2f7e92dcaa0443cf87912f">pj_thread_join</a></div><div class="ttdeci">pj_status_t pj_thread_join(pj_thread_t *thread)</div></div>
<div class="ttc" id="agroup__PJ__THREAD_htm_ga7b63533cf4f3ba0cba68cab49a22d722"><div class="ttname"><a href="group__PJ__THREAD.htm#ga7b63533cf4f3ba0cba68cab49a22d722">pj_thread_create</a></div><div class="ttdeci">pj_status_t pj_thread_create(pj_pool_t *pool, const char *thread_name, pj_thread_proc *proc, void *arg, pj_size_t stack_size, unsigned flags, pj_thread_t **thread)</div></div>
<div class="ttc" id="agroup__PJ__THREAD_htm_gad59cd6fd7390711758afcc0bde375d68"><div class="ttname"><a href="group__PJ__THREAD.htm#gad59cd6fd7390711758afcc0bde375d68">pj_thread_sleep</a></div><div class="ttdeci">pj_status_t pj_thread_sleep(unsigned msec)</div></div>
<div class="ttc" id="agroup__PJ__TIMESTAMP_htm_gaa419b8448d1cb55db85aeac2e86fe11c"><div class="ttname"><a href="group__PJ__TIMESTAMP.htm#gaa419b8448d1cb55db85aeac2e86fe11c">pj_get_timestamp</a></div><div class="ttdeci">pj_status_t pj_get_timestamp(pj_timestamp *ts)</div></div>
<div class="ttc" id="agroup__PJ__TIMESTAMP_htm_gad5a0323beb04de52474b59693b4b12ac"><div class="ttname"><a href="group__PJ__TIMESTAMP.htm#gad5a0323beb04de52474b59693b4b12ac">pj_elapsed_usec</a></div><div class="ttdeci">pj_uint32_t pj_elapsed_usec(const pj_timestamp *start, const pj_timestamp *stop)</div></div>
<div class="ttc" id="agroup__pj__config_htm_gac2fba901c0f4a6af0a6cfc948a420602"><div class="ttname"><a href="group__pj__config.htm#gac2fba901c0f4a6af0a6cfc948a420602">PJ_THREAD_DEFAULT_STACK_SIZE</a></div><div class="ttdeci">#define PJ_THREAD_DEFAULT_STACK_SIZE</div><div class="ttdef"><b>Definition:</b> config.h:607</div></div>
<div class="ttc" id="agroup__pj__errno_htm_ga314a8edfdcec54a086a401e97b5b0bd0"><div class="ttname"><a href="group__pj__errno.htm#ga314a8edfdcec54a086a401e97b5b0bd0">PJ_ERR_MSG_SIZE</a></div><div class="ttdeci">#define PJ_ERR_MSG_SIZE</div><div class="ttdef"><b>Definition:</b> errno.h:84</div></div>
<div class="ttc" id="agroup__pj__errno_htm_ga7d2616aded0d61924fb31f4fd6ee45c0"><div class="ttname"><a href="group__pj__errno.htm#ga7d2616aded0d61924fb31f4fd6ee45c0">pj_strerror</a></div><div class="ttdeci">pj_str_t pj_strerror(pj_status_t statcode, char *buf, pj_size_t bufsize)</div></div>
<div class="ttc" id="agroup__pj__errno_htm_gacb73514c3158bdeda93488e8624e7b42"><div class="ttname"><a href="group__pj__errno.htm#gacb73514c3158bdeda93488e8624e7b42">PJ_PERROR</a></div><div class="ttdeci">#define PJ_PERROR(level, arg)</div><div class="ttdef"><b>Definition:</b> errno.h:175</div></div>
<div class="ttc" id="agroup__pj__errnum_htm_ga8706796879339b5dc875e2af631d6fe7"><div class="ttname"><a href="group__pj__errnum.htm#ga8706796879339b5dc875e2af631d6fe7">PJ_EPENDING</a></div><div class="ttdeci">#define PJ_EPENDING</div><div class="ttdef"><b>Definition:</b> errno.h:322</div></div>
<div class="ttc" id="astructop__key_htm"><div class="ttname"><a href="structop__key.htm">op_key</a></div><div class="ttdef"><b>Definition:</b> udp_echo_srv_ioqueue.c:27</div></div>
<div class="ttc" id="astructpj__ioqueue__callback_htm"><div class="ttname"><a href="structpj__ioqueue__callback.htm">pj_ioqueue_callback</a></div><div class="ttdef"><b>Definition:</b> ioqueue.h:219</div></div>
<div class="ttc" id="astructpj__ioqueue__callback_htm_a70ec522e331bee4a8ed0798358b62ffe"><div class="ttname"><a href="structpj__ioqueue__callback.htm#a70ec522e331bee4a8ed0798358b62ffe">pj_ioqueue_callback::on_write_complete</a></div><div class="ttdeci">void(* on_write_complete)(pj_ioqueue_key_t *key, pj_ioqueue_op_key_t *op_key, pj_ssize_t bytes_sent)</div><div class="ttdef"><b>Definition:</b> ioqueue.h:246</div></div>
<div class="ttc" id="astructpj__ioqueue__callback_htm_aaf564626f7a74bc96fa6ef96f72cb6e1"><div class="ttname"><a href="structpj__ioqueue__callback.htm#aaf564626f7a74bc96fa6ef96f72cb6e1">pj_ioqueue_callback::on_read_complete</a></div><div class="ttdeci">void(* on_read_complete)(pj_ioqueue_key_t *key, pj_ioqueue_op_key_t *op_key, pj_ssize_t bytes_read)</div><div class="ttdef"><b>Definition:</b> ioqueue.h:231</div></div>
<div class="ttc" id="astructpj__ioqueue__cfg_htm"><div class="ttname"><a href="structpj__ioqueue__cfg.htm">pj_ioqueue_cfg</a></div><div class="ttdef"><b>Definition:</b> ioqueue.h:362</div></div>
<div class="ttc" id="astructpj__ioqueue__cfg_htm_ab85803d52ec881318a395a72abe1ce33"><div class="ttname"><a href="structpj__ioqueue__cfg.htm#ab85803d52ec881318a395a72abe1ce33">pj_ioqueue_cfg::epoll_flags</a></div><div class="ttdeci">unsigned epoll_flags</div><div class="ttdef"><b>Definition:</b> ioqueue.h:370</div></div>
<div class="ttc" id="astructpj__ioqueue__cfg_htm_acb27aaeadf5fa65adff56b68c250c81d"><div class="ttname"><a href="structpj__ioqueue__cfg.htm#acb27aaeadf5fa65adff56b68c250c81d">pj_ioqueue_cfg::default_concurrency</a></div><div class="ttdeci">pj_bool_t default_concurrency</div><div class="ttdef"><b>Definition:</b> ioqueue.h:379</div></div>
<div class="ttc" id="astructpj__ioqueue__op__key__t_htm"><div class="ttname"><a href="structpj__ioqueue__op__key__t.htm">pj_ioqueue_op_key_t</a></div><div class="ttdef"><b>Definition:</b> ioqueue.h:208</div></div>
<div class="ttc" id="astructpj__pool__t_htm"><div class="ttname"><a href="structpj__pool__t.htm">pj_pool_t</a></div><div class="ttdef"><b>Definition:</b> pool.h:310</div></div>
<div class="ttc" id="astructpj__time__val_htm"><div class="ttname"><a href="structpj__time__val.htm">pj_time_val</a></div><div class="ttdef"><b>Definition:</b> types.h:397</div></div>
<div class="ttc" id="aunionpj__timestamp_htm"><div class="ttname"><a href="unionpj__timestamp.htm">pj_timestamp</a></div><div class="ttdef"><b>Definition:</b> types.h:134</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<p>&nbsp;</p>
<hr><center>
PJLIB Open Source, high performance, small footprint, and very very portable framework<br>
Copyright (C) 2006-2009 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
