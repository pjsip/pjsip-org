<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Digest AKAv1 and AKAv2 Authentication API (2.13)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJSIP Reference</p>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Digest AKAv1 and AKAv2 Authentication API<div class="ingroups"><a class="el" href="group__PJSIP__CORE.htm">Core SIP Library</a> &raquo; <a class="el" href="group__PJSIP__AUTH.htm">SIP Authorization module</a> &raquo; <a class="el" href="group__PJSIP__AUTH__API.htm">Authentication API's</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Digest AKAv1 and AKAv2 Authentication API.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga6cba7aeaf5c646162ec57489ca9642ac"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__AUTH__AKA__API.htm#ga6cba7aeaf5c646162ec57489ca9642ac">PJSIP_AKA_AKLEN</a>&#160;&#160;&#160;6</td></tr>
<tr class="separator:ga6cba7aeaf5c646162ec57489ca9642ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga52e27a99617a50b8f261126a73965e61"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__AUTH__AKA__API.htm#ga52e27a99617a50b8f261126a73965e61">PJSIP_AKA_AMFLEN</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:ga52e27a99617a50b8f261126a73965e61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4bc81b12d79cf4735ef6665062e317dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__AUTH__AKA__API.htm#ga4bc81b12d79cf4735ef6665062e317dc">PJSIP_AKA_AUTNLEN</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ga4bc81b12d79cf4735ef6665062e317dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga84104059d32457bc72b2ddc280f17105"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__AUTH__AKA__API.htm#ga84104059d32457bc72b2ddc280f17105">PJSIP_AKA_CKLEN</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ga84104059d32457bc72b2ddc280f17105"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9abe84690a8b0070c85459326f3d9ee6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__AUTH__AKA__API.htm#ga9abe84690a8b0070c85459326f3d9ee6">PJSIP_AKA_IKLEN</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ga9abe84690a8b0070c85459326f3d9ee6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga96bf2a9d3940ee550ccfb9046b6526f8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__AUTH__AKA__API.htm#ga96bf2a9d3940ee550ccfb9046b6526f8">PJSIP_AKA_KLEN</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ga96bf2a9d3940ee550ccfb9046b6526f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59994534d378362a50645df58bd74c67"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__AUTH__AKA__API.htm#ga59994534d378362a50645df58bd74c67">PJSIP_AKA_MACLEN</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:ga59994534d378362a50645df58bd74c67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0e306dff4fb54448b83fc0d7738b9ac3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__AUTH__AKA__API.htm#ga0e306dff4fb54448b83fc0d7738b9ac3">PJSIP_AKA_OPLEN</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:ga0e306dff4fb54448b83fc0d7738b9ac3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf47e8b65fd7e1e5ef303695bb661193c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__AUTH__AKA__API.htm#gaf47e8b65fd7e1e5ef303695bb661193c">PJSIP_AKA_RANDLEN</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:gaf47e8b65fd7e1e5ef303695bb661193c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4fab69a38db314f90992971d17c02530"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__AUTH__AKA__API.htm#ga4fab69a38db314f90992971d17c02530">PJSIP_AKA_RESLEN</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:ga4fab69a38db314f90992971d17c02530"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad19cf3d430bfc94fa998dd8f8e4895bc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__AUTH__AKA__API.htm#gad19cf3d430bfc94fa998dd8f8e4895bc">PJSIP_AKA_SQNLEN</a>&#160;&#160;&#160;6</td></tr>
<tr class="separator:gad19cf3d430bfc94fa998dd8f8e4895bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaafe9da8c3964f2dff4441854d7be7a1f"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__AUTH__AKA__API.htm#gaafe9da8c3964f2dff4441854d7be7a1f">pjsip_auth_create_aka_response</a> (<a class="elRef" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, const <a class="el" href="structpjsip__digest__challenge.htm">pjsip_digest_challenge</a> *chal, const <a class="el" href="structpjsip__cred__info.htm">pjsip_cred_info</a> *cred, const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *method, <a class="el" href="structpjsip__digest__credential.htm">pjsip_digest_credential</a> *auth)</td></tr>
<tr class="separator:gaafe9da8c3964f2dff4441854d7be7a1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >This module implements HTTP digest authentication using Authentication and Key Agreement (AKA) version 1 and version 2 (AKAv1-MD5 and AKAv2-MD5), as specified in RFC 3310 and RFC 4169. SIP AKA authentication is used by 3GPP and IMS systems.</p>
<h1><a class="anchor" id="pjsip_aka_using"></a>
Using Digest AKA Authentication</h1>
<p >Support for digest AKA authentication is currently made optional, so application needs to declare <em>PJSIP_HAS_DIGEST_AKA_AUTH</em> to non-zero in <code>config_site.h</code> to enable AKA support:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define PJSIP_HAS_DIGEST_AKA_AUTH   1</span></div>
</div><!-- fragment --><p >In addition, application would need to link with <b>libmilenage</b> library from <em>third_party</em> directory.</p>
<p >Application then specifies digest AKA credential by initializing the authentication credential as follows:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structpjsip__cred__info.htm">pjsip_cred_info</a> cred;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_functionRef" href="../../../pjlib/docs/html/group__PJ__PSTR.htm#gafa92001573289c87313c660146369fa3">pj_bzero</a>(&amp;cred, <span class="keyword">sizeof</span>(cred));</div>
<div class="line"> </div>
<div class="line">cred.<a class="code hl_variable" href="structpjsip__cred__info.htm#ae31c9ec1c99fb1ffa20be5954ee995a7">scheme</a> = <a class="code hl_functionRef" href="../../../pjlib/docs/html/group__PJ__PSTR.htm#ga20fa0c4d9ccddd0822a775730cf4a867">pj_str</a>(<span class="stringliteral">&quot;Digest&quot;</span>);</div>
<div class="line">cred.<a class="code hl_variable" href="structpjsip__cred__info.htm#a96eee6bdc2b0e7e3b7eea9b4e1c15674">realm</a> = <a class="code hl_functionRef" href="../../../pjlib/docs/html/group__PJ__PSTR.htm#ga20fa0c4d9ccddd0822a775730cf4a867">pj_str</a>(<span class="stringliteral">&quot;ims-domain.test&quot;</span>);</div>
<div class="line">cred.<a class="code hl_variable" href="structpjsip__cred__info.htm#a3e1f72a171886985c6dfcd57d4bc4f17">username</a> = <a class="code hl_functionRef" href="../../../pjlib/docs/html/group__PJ__PSTR.htm#ga20fa0c4d9ccddd0822a775730cf4a867">pj_str</a>(<span class="stringliteral">&quot;user@ims-domain.test&quot;</span>);</div>
<div class="line">cred.<a class="code hl_variable" href="structpjsip__cred__info.htm#a8b1e563c814bdf8012f0bdf966d0ad9d">data_type</a> = <a class="code hl_enumvalue" href="group__PJSIP__AUTH__API.htm#ggaf9ec66dd77133258711d6759fd31a7caad5f0fcf79abef3be6232fe7878173505">PJSIP_CRED_DATA_PLAIN_PASSWD</a> | <a class="code hl_enumvalue" href="group__PJSIP__AUTH__API.htm#ggaf9ec66dd77133258711d6759fd31a7caab76ba7cd4836ce01f1a2befb2532b736">PJSIP_CRED_DATA_EXT_AKA</a>;</div>
<div class="line">cred.<a class="code hl_variable" href="structpjsip__cred__info.htm#ab3947a7800c51d28a1b25f4fdaea78bd">data</a> = <a class="code hl_functionRef" href="../../../pjlib/docs/html/group__PJ__PSTR.htm#ga20fa0c4d9ccddd0822a775730cf4a867">pj_str</a>(<span class="stringliteral">&quot;password&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// AKA extended info</span></div>
<div class="line">cred.<a class="code hl_variable" href="structpjsip__cred__info.htm#afaba47ee696edaa9b6963de2f61a238c">ext</a>.<a class="code hl_variable" href="structpjsip__cred__info.htm#a5e026e435f67819e3ca133dabfedc001">aka</a>.<a class="code hl_variable" href="structpjsip__cred__info.htm#a3dbfe6988e0f97b95e3f258d2c680824">k</a> = <a class="code hl_functionRef" href="../../../pjlib/docs/html/group__PJ__PSTR.htm#ga20fa0c4d9ccddd0822a775730cf4a867">pj_str</a>(<span class="stringliteral">&quot;password&quot;</span>);</div>
<div class="line">cred.<a class="code hl_variable" href="structpjsip__cred__info.htm#afaba47ee696edaa9b6963de2f61a238c">ext</a>.<a class="code hl_variable" href="structpjsip__cred__info.htm#a5e026e435f67819e3ca133dabfedc001">aka</a>.<a class="code hl_variable" href="structpjsip__cred__info.htm#ae7f29983687bade46c3a6a0ecefd0111">cb</a> = &amp;<a class="code hl_function" href="group__PJSIP__AUTH__AKA__API.htm#gaafe9da8c3964f2dff4441854d7be7a1f">pjsip_auth_create_aka_response</a></div>
<div class="ttc" id="agroup__PJSIP__AUTH__AKA__API_htm_gaafe9da8c3964f2dff4441854d7be7a1f"><div class="ttname"><a href="group__PJSIP__AUTH__AKA__API.htm#gaafe9da8c3964f2dff4441854d7be7a1f">pjsip_auth_create_aka_response</a></div><div class="ttdeci">pj_status_t pjsip_auth_create_aka_response(pj_pool_t *pool, const pjsip_digest_challenge *chal, const pjsip_cred_info *cred, const pj_str_t *method, pjsip_digest_credential *auth)</div></div>
<div class="ttc" id="agroup__PJSIP__AUTH__API_htm_ggaf9ec66dd77133258711d6759fd31a7caab76ba7cd4836ce01f1a2befb2532b736"><div class="ttname"><a href="group__PJSIP__AUTH__API.htm#ggaf9ec66dd77133258711d6759fd31a7caab76ba7cd4836ce01f1a2befb2532b736">PJSIP_CRED_DATA_EXT_AKA</a></div><div class="ttdeci">@ PJSIP_CRED_DATA_EXT_AKA</div><div class="ttdef"><b>Definition:</b> sip_auth.h:58</div></div>
<div class="ttc" id="agroup__PJSIP__AUTH__API_htm_ggaf9ec66dd77133258711d6759fd31a7caad5f0fcf79abef3be6232fe7878173505"><div class="ttname"><a href="group__PJSIP__AUTH__API.htm#ggaf9ec66dd77133258711d6759fd31a7caad5f0fcf79abef3be6232fe7878173505">PJSIP_CRED_DATA_PLAIN_PASSWD</a></div><div class="ttdeci">@ PJSIP_CRED_DATA_PLAIN_PASSWD</div><div class="ttdef"><b>Definition:</b> sip_auth.h:55</div></div>
<div class="ttc" id="agroup__PJ__PSTR_htm_ga20fa0c4d9ccddd0822a775730cf4a867"><div class="ttname"><a href="../../../pjlib/docs/html/group__PJ__PSTR.htm#ga20fa0c4d9ccddd0822a775730cf4a867">pj_str</a></div><div class="ttdeci">pj_str_t pj_str(char *str)</div></div>
<div class="ttc" id="agroup__PJ__PSTR_htm_gafa92001573289c87313c660146369fa3"><div class="ttname"><a href="../../../pjlib/docs/html/group__PJ__PSTR.htm#gafa92001573289c87313c660146369fa3">pj_bzero</a></div><div class="ttdeci">void pj_bzero(void *dst, pj_size_t size)</div></div>
<div class="ttc" id="astructpjsip__cred__info_htm"><div class="ttname"><a href="structpjsip__cred__info.htm">pjsip_cred_info</a></div><div class="ttdef"><b>Definition:</b> sip_auth.h:112</div></div>
<div class="ttc" id="astructpjsip__cred__info_htm_a3dbfe6988e0f97b95e3f258d2c680824"><div class="ttname"><a href="structpjsip__cred__info.htm#a3dbfe6988e0f97b95e3f258d2c680824">pjsip_cred_info::k</a></div><div class="ttdeci">pj_str_t k</div><div class="ttdef"><b>Definition:</b> sip_auth.h:130</div></div>
<div class="ttc" id="astructpjsip__cred__info_htm_a3e1f72a171886985c6dfcd57d4bc4f17"><div class="ttname"><a href="structpjsip__cred__info.htm#a3e1f72a171886985c6dfcd57d4bc4f17">pjsip_cred_info::username</a></div><div class="ttdeci">pj_str_t username</div><div class="ttdef"><b>Definition:</b> sip_auth.h:117</div></div>
<div class="ttc" id="astructpjsip__cred__info_htm_a5e026e435f67819e3ca133dabfedc001"><div class="ttname"><a href="structpjsip__cred__info.htm#a5e026e435f67819e3ca133dabfedc001">pjsip_cred_info::aka</a></div><div class="ttdeci">struct pjsip_cred_info::@2::@3 aka</div></div>
<div class="ttc" id="astructpjsip__cred__info_htm_a8b1e563c814bdf8012f0bdf966d0ad9d"><div class="ttname"><a href="structpjsip__cred__info.htm#a8b1e563c814bdf8012f0bdf966d0ad9d">pjsip_cred_info::data_type</a></div><div class="ttdeci">int data_type</div><div class="ttdef"><b>Definition:</b> sip_auth.h:118</div></div>
<div class="ttc" id="astructpjsip__cred__info_htm_a96eee6bdc2b0e7e3b7eea9b4e1c15674"><div class="ttname"><a href="structpjsip__cred__info.htm#a96eee6bdc2b0e7e3b7eea9b4e1c15674">pjsip_cred_info::realm</a></div><div class="ttdeci">pj_str_t realm</div><div class="ttdef"><b>Definition:</b> sip_auth.h:113</div></div>
<div class="ttc" id="astructpjsip__cred__info_htm_ab3947a7800c51d28a1b25f4fdaea78bd"><div class="ttname"><a href="structpjsip__cred__info.htm#ab3947a7800c51d28a1b25f4fdaea78bd">pjsip_cred_info::data</a></div><div class="ttdeci">pj_str_t data</div><div class="ttdef"><b>Definition:</b> sip_auth.h:119</div></div>
<div class="ttc" id="astructpjsip__cred__info_htm_ae31c9ec1c99fb1ffa20be5954ee995a7"><div class="ttname"><a href="structpjsip__cred__info.htm#ae31c9ec1c99fb1ffa20be5954ee995a7">pjsip_cred_info::scheme</a></div><div class="ttdeci">pj_str_t scheme</div><div class="ttdef"><b>Definition:</b> sip_auth.h:116</div></div>
<div class="ttc" id="astructpjsip__cred__info_htm_ae7f29983687bade46c3a6a0ecefd0111"><div class="ttname"><a href="structpjsip__cred__info.htm#ae7f29983687bade46c3a6a0ecefd0111">pjsip_cred_info::cb</a></div><div class="ttdeci">pjsip_cred_cb cb</div><div class="ttdef"><b>Definition:</b> sip_auth.h:133</div></div>
<div class="ttc" id="astructpjsip__cred__info_htm_afaba47ee696edaa9b6963de2f61a238c"><div class="ttname"><a href="structpjsip__cred__info.htm#afaba47ee696edaa9b6963de2f61a238c">pjsip_cred_info::ext</a></div><div class="ttdeci">union pjsip_cred_info::@2 ext</div></div>
</div><!-- fragment --><p >Description:</p><ul>
<li>To support AKA, application adds <em>PJSIP_CRED_DATA_EXT_AKA</em> flag in the <em>data_type</em> field. This indicates that extended information specific to AKA authentication is available in the credential, and that response digest computation will use the callback function instead of the usual MD5 digest computation.</li>
<li>The <em>scheme</em> for the credential is "Digest".</li>
<li>The <em>realm</em> is the expected realm in the challenge. Application may also specify wildcard realm ("*") if it wishes to respond to any realms in the challenge.</li>
<li>The <em>data</em> field is optional. Application may fill this with the password if it wants to support both MD5 and AKA MD5 in a single credential. The <a class="el" href="group__PJSIP__AUTH__AKA__API.htm#gaafe9da8c3964f2dff4441854d7be7a1f">pjsip_auth_create_aka_response()</a> function will use this field if the challenge indicates "MD5" as the algorithm instead of "AKAv1-MD5" or "AKAv2-MD5".</li>
<li>The <em>ext.aka.k</em> field specifies the permanent subscriber key to be used for AKA authentication. Application may specify binary password containing NULL character in this key, since the length of the key is indicated in the <em>slen</em> field of the string.</li>
<li>The <em>ext.aka.cb</em> field specifies the callback function to calculate the response digest. Application can specify <a class="el" href="group__PJSIP__AUTH__AKA__API.htm#gaafe9da8c3964f2dff4441854d7be7a1f">pjsip_auth_create_aka_response()</a> in this field to use PJSIP's implementation, but it's free to provide it's own function.</li>
<li>Optionally application may set <em>ext.aka.op</em> and <em>ext.aka.amf</em> in the credential to specify AKA Operator variant key and AKA Authentication Management Field information. </li>
</ul>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga6cba7aeaf5c646162ec57489ca9642ac" name="ga6cba7aeaf5c646162ec57489ca9642ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6cba7aeaf5c646162ec57489ca9642ac">&#9670;&nbsp;</a></span>PJSIP_AKA_AKLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJSIP_AKA_AKLEN&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Length of Authentication Key (AK) in bytes. </p>

</div>
</div>
<a id="ga52e27a99617a50b8f261126a73965e61" name="ga52e27a99617a50b8f261126a73965e61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga52e27a99617a50b8f261126a73965e61">&#9670;&nbsp;</a></span>PJSIP_AKA_AMFLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJSIP_AKA_AMFLEN&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Length of Authentication Management Field (AMF) in bytes. </p>

</div>
</div>
<a id="ga4bc81b12d79cf4735ef6665062e317dc" name="ga4bc81b12d79cf4735ef6665062e317dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4bc81b12d79cf4735ef6665062e317dc">&#9670;&nbsp;</a></span>PJSIP_AKA_AUTNLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJSIP_AKA_AUTNLEN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Length of AUTN in bytes. </p>

</div>
</div>
<a id="ga84104059d32457bc72b2ddc280f17105" name="ga84104059d32457bc72b2ddc280f17105"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga84104059d32457bc72b2ddc280f17105">&#9670;&nbsp;</a></span>PJSIP_AKA_CKLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJSIP_AKA_CKLEN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Length of Confidentiality Key (CK) in bytes. </p>

</div>
</div>
<a id="ga9abe84690a8b0070c85459326f3d9ee6" name="ga9abe84690a8b0070c85459326f3d9ee6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9abe84690a8b0070c85459326f3d9ee6">&#9670;&nbsp;</a></span>PJSIP_AKA_IKLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJSIP_AKA_IKLEN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Length of Integrity Key (AK) in bytes. </p>

</div>
</div>
<a id="ga96bf2a9d3940ee550ccfb9046b6526f8" name="ga96bf2a9d3940ee550ccfb9046b6526f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga96bf2a9d3940ee550ccfb9046b6526f8">&#9670;&nbsp;</a></span>PJSIP_AKA_KLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJSIP_AKA_KLEN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Length of permanent/subscriber Key (K) in bytes. </p>

</div>
</div>
<a id="ga59994534d378362a50645df58bd74c67" name="ga59994534d378362a50645df58bd74c67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga59994534d378362a50645df58bd74c67">&#9670;&nbsp;</a></span>PJSIP_AKA_MACLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJSIP_AKA_MACLEN&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Length of AKA authentication code in bytes. </p>

</div>
</div>
<a id="ga0e306dff4fb54448b83fc0d7738b9ac3" name="ga0e306dff4fb54448b83fc0d7738b9ac3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0e306dff4fb54448b83fc0d7738b9ac3">&#9670;&nbsp;</a></span>PJSIP_AKA_OPLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJSIP_AKA_OPLEN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Length of operator key in bytes. </p>

</div>
</div>
<a id="gaf47e8b65fd7e1e5ef303695bb661193c" name="gaf47e8b65fd7e1e5ef303695bb661193c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf47e8b65fd7e1e5ef303695bb661193c">&#9670;&nbsp;</a></span>PJSIP_AKA_RANDLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJSIP_AKA_RANDLEN&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Length of random challenge (RAND) in bytes. </p>

</div>
</div>
<a id="ga4fab69a38db314f90992971d17c02530" name="ga4fab69a38db314f90992971d17c02530"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4fab69a38db314f90992971d17c02530">&#9670;&nbsp;</a></span>PJSIP_AKA_RESLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJSIP_AKA_RESLEN&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Length of response digest in bytes. </p>

</div>
</div>
<a id="gad19cf3d430bfc94fa998dd8f8e4895bc" name="gad19cf3d430bfc94fa998dd8f8e4895bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad19cf3d430bfc94fa998dd8f8e4895bc">&#9670;&nbsp;</a></span>PJSIP_AKA_SQNLEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJSIP_AKA_SQNLEN&#160;&#160;&#160;6</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Length of sequence number (SQN) in bytes. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaafe9da8c3964f2dff4441854d7be7a1f" name="gaafe9da8c3964f2dff4441854d7be7a1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaafe9da8c3964f2dff4441854d7be7a1f">&#9670;&nbsp;</a></span>pjsip_auth_create_aka_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_auth_create_aka_response </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__digest__challenge.htm">pjsip_digest_challenge</a> *&#160;</td>
          <td class="paramname"><em>chal</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__cred__info.htm">pjsip_cred_info</a> *&#160;</td>
          <td class="paramname"><em>cred</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__digest__credential.htm">pjsip_digest_credential</a> *&#160;</td>
          <td class="paramname"><em>auth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >This function creates MD5, AKAv1-MD5, or AKAv2-MD5 response for the specified challenge in <em>chal</em>, according to the algorithm specified in the challenge, and based on the information in the credential <em>cred</em>.</p>
<p >Application may register this function as <em>ext.aka.cb</em> field of <a class="el" href="structpjsip__cred__info.htm">pjsip_cred_info</a> structure to make PJSIP automatically call this function to calculate the response digest. To do so, it needs to add <em>PJSIP_CRED_DATA_EXT_AKA</em> flag in the <em>data_type</em> field of the credential, and fills up other AKA specific information in the credential.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Pool to allocate memory. </td></tr>
    <tr><td class="paramname">chal</td><td>The authentication challenge sent by server in 401 or 401 response, as either Proxy-Authenticate or WWW-Authenticate header. </td></tr>
    <tr><td class="paramname">cred</td><td>The credential to be used. </td></tr>
    <tr><td class="paramname">method</td><td>The request method. </td></tr>
    <tr><td class="paramname">auth</td><td>The digest credential where the digest response will be placed to. Upon calling this function, the nonce, nc, cnonce, qop, uri, and realm fields of this structure must have been set by caller. Upon return, the <em>response</em> field will be initialized by this function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS if response has been created successfully. </dd></dl>

<p class="reference">References <a class="elRef" href="../../../pjlib/docs/html/group__pj__config.htm#gac961f7d199eeed7666ab3ec2442c1b00">PJ_END_DECL</a>.</p>

</div>
</div>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJSIP Open Source, high performance, small footprint, and very very portable SIP stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
