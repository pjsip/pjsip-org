<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PJSIP Reference: SIP REFER (RFC 3515) for Call Transfer etc. (1.16)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJSIP Reference</p>

<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.htm"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.htm"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.htm"><span>Modules</span></a></li>
      <li><a href="annotated.htm"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.htm"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>SIP REFER (RFC 3515) for Call Transfer etc.<br/>
<small>
[<a class="el" href="group__PJSIP__HIGH__UA.htm">User Agent Library</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>SIP REFER dialog usage (call transfer, etc.).  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structpjsip__method.htm">pjsip_method</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga35aa3b45f582ee8240a25c176f0459b8">pjsip_get_refer_method</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga97746dc727dd55845df4d5d909e98cfb">pjsip_xfer_init_module</a> (<a class="el" href="sip__types_8h.htm#a2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *endpt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga94dd90def5855d33895254b268a13d7e">pjsip_xfer_create_uac</a> (<a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *dlg, const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *user_cb, <a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> **p_evsub)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#gaa6e88b22d59d8b708b20c6e29aee0c1f">pjsip_xfer_create_uas</a> (<a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *dlg, const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *user_cb, <a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, <a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> **p_evsub)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga9868321d7ca14d3c55c6c1a8dd6fc4bd">pjsip_xfer_initiate</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *refer_to_uri, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#gad22101ca3b21e8683083f3e5c7935b31">pjsip_xfer_accept</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a> st_code, const <a class="el" href="structpjsip__hdr.htm">pjsip_hdr</a> *hdr_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga4db2f6af2d3fdf4a5e3cb7f8af1636dc">pjsip_xfer_notify</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="group__PJSIP__EVENT__NOT.htm#ga4a6454679f18fe8337a2fc78063010bf">pjsip_evsub_state</a> state, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a> xfer_st_code, const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *xfer_st_text, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga471db9bf2e3c1fd2fd2bd6e584273fc1">pjsip_xfer_current_notify</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#gabba0200ce8c64be4bbad1073d2d8a56e">pjsip_xfer_send_request</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> *tdata)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">PJ_BEGIN_DECL const <a class="el" href="structpjsip__method.htm">pjsip_method</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga4d6934f496ba085d704171663b700b63">pjsip_refer_method</a></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This describes a generic handling of SIP REFER request. The SIP REFER request is described in RFC 3515, and commonly used to perform call transfer functionality. Other types of SIP REFER usages are described in draft-worley-sip-many-refers-00 draft, for example:</p>
<ul>
<li>Remote Dial: where UAC sends REFER to instruct REFER recipient to initiate an INVITE session to some target.</li>
</ul>
<p>A REFER request can be sent inside or outside existing dialog context, although for call transfer case, it is more common to send REFER inside existing INVITE session context. PJSIP supports both sending REFER request inside or outside dialog context.</p>
<p>The REFER framework uses <a class="el" href="group__PJSIP__EVENT__NOT.htm">SIP Event Notification (RFC 3265) Module</a> to manage the event subscription created by the REFER request. Because of this, application must link with <b>pjsip-ua</b> AND <b>pjsip-simple</b> static libraries to use REFER functionality.</p>
<p>Reference:</p>
<ul>
<li><a href="http://www.ietf.org/rfc/rfc3515.txt">RFC 3515: The Session Initiation Protocol (SIP) Refer Method</a></li>
<li><a class="el" href="group__PJSIP__EVENT__NOT.htm">SIP Event Notification (RFC 3265) Module</a> </li>
</ul>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga35aa3b45f582ee8240a25c176f0459b8"></a><!-- doxytag: member="sip_xfer.h::pjsip_get_refer_method" ref="ga35aa3b45f582ee8240a25c176f0459b8" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structpjsip__method.htm">pjsip_method</a>* pjsip_get_refer_method </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get REFER method constant </p>

</div>
</div>
<a class="anchor" id="ga97746dc727dd55845df4d5d909e98cfb"></a><!-- doxytag: member="sip_xfer.h::pjsip_xfer_init_module" ref="ga97746dc727dd55845df4d5d909e98cfb" args="(pjsip_endpoint *endpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_init_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sip__types_8h.htm#a2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>endpt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize the REFER subsystem. This currently does very little (only register REFER as supported method). </p>

</div>
</div>
<a class="anchor" id="ga94dd90def5855d33895254b268a13d7e"></a><!-- doxytag: member="sip_xfer.h::pjsip_xfer_create_uac" ref="ga94dd90def5855d33895254b268a13d7e" args="(pjsip_dialog *dlg, const pjsip_evsub_user *user_cb, pjsip_evsub **p_evsub)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_create_uac </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *&nbsp;</td>
          <td class="paramname"> <em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *&nbsp;</td>
          <td class="paramname"> <em>user_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> **&nbsp;</td>
          <td class="paramname"> <em>p_evsub</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create transferer (sender of REFER request).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dlg</em>&nbsp;</td><td>The underlying dialog to use. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_cb</em>&nbsp;</td><td>Pointer to callbacks to receive presence subscription events. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_evsub</em>&nbsp;</td><td>Pointer to receive the presence subscription session.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="gaa6e88b22d59d8b708b20c6e29aee0c1f"></a><!-- doxytag: member="sip_xfer.h::pjsip_xfer_create_uas" ref="gaa6e88b22d59d8b708b20c6e29aee0c1f" args="(pjsip_dialog *dlg, const pjsip_evsub_user *user_cb, pjsip_rx_data *rdata, pjsip_evsub **p_evsub)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_create_uas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *&nbsp;</td>
          <td class="paramname"> <em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *&nbsp;</td>
          <td class="paramname"> <em>user_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&nbsp;</td>
          <td class="paramname"> <em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> **&nbsp;</td>
          <td class="paramname"> <em>p_evsub</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create transferee (receiver of REFER request).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dlg</em>&nbsp;</td><td>The underlying dialog to use. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_cb</em>&nbsp;</td><td>Pointer to callbacks to receive presence subscription events. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rdata</em>&nbsp;</td><td>The incoming SUBSCRIBE request that creates the event subscription. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_evsub</em>&nbsp;</td><td>Pointer to receive the presence subscription session.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9868321d7ca14d3c55c6c1a8dd6fc4bd"></a><!-- doxytag: member="sip_xfer.h::pjsip_xfer_initiate" ref="ga9868321d7ca14d3c55c6c1a8dd6fc4bd" args="(pjsip_evsub *sub, const pj_str_t *refer_to_uri, pjsip_tx_data **p_tdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_initiate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&nbsp;</td>
          <td class="paramname"> <em>refer_to_uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&nbsp;</td>
          <td class="paramname"> <em>p_tdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Call this function to create request to initiate REFER subscription, to refresh subscription, or to unsubscribe. For request other than the initial REFER request, "refer_to_uri" argument may be NULL.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>Client subscription instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>refer_to_uri</em>&nbsp;</td><td>URI to be put to the Refer-To header. This argument may be NULL for subsequent REFER requests. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_tdata</em>&nbsp;</td><td>Pointer to receive the request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="gad22101ca3b21e8683083f3e5c7935b31"></a><!-- doxytag: member="sip_xfer.h::pjsip_xfer_accept" ref="gad22101ca3b21e8683083f3e5c7935b31" args="(pjsip_evsub *sub, pjsip_rx_data *rdata, int st_code, const pjsip_hdr *hdr_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_accept </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&nbsp;</td>
          <td class="paramname"> <em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a>&nbsp;</td>
          <td class="paramname"> <em>st_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__hdr.htm">pjsip_hdr</a> *&nbsp;</td>
          <td class="paramname"> <em>hdr_list</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Accept the incoming REFER request by sending 2xx response.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>Server subscription instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rdata</em>&nbsp;</td><td>The incoming subscription request message. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>st_code</em>&nbsp;</td><td>Status code, which MUST be 2xx. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdr_list</em>&nbsp;</td><td>Optional list of headers to be added in the response.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga4db2f6af2d3fdf4a5e3cb7f8af1636dc"></a><!-- doxytag: member="sip_xfer.h::pjsip_xfer_notify" ref="ga4db2f6af2d3fdf4a5e3cb7f8af1636dc" args="(pjsip_evsub *sub, pjsip_evsub_state state, int xfer_st_code, const pj_str_t *xfer_st_text, pjsip_tx_data **p_tdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#ga4a6454679f18fe8337a2fc78063010bf">pjsip_evsub_state</a>&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a>&nbsp;</td>
          <td class="paramname"> <em>xfer_st_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&nbsp;</td>
          <td class="paramname"> <em>xfer_st_text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&nbsp;</td>
          <td class="paramname"> <em>p_tdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>For notifier, create NOTIFY request to subscriber, and set the state of the subscription.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>The server subscription (notifier) instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>New state to set. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>xfer_st_code</em>&nbsp;</td><td>The call status code to be reported with the NOTIFY request. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>xfer_st_text</em>&nbsp;</td><td>Optional call status text to be reported with the NOTIFY request. If the value is NULL, default status text will be used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_tdata</em>&nbsp;</td><td>Pointer to receive the request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga471db9bf2e3c1fd2fd2bd6e584273fc1"></a><!-- doxytag: member="sip_xfer.h::pjsip_xfer_current_notify" ref="ga471db9bf2e3c1fd2fd2bd6e584273fc1" args="(pjsip_evsub *sub, pjsip_tx_data **p_tdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_current_notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&nbsp;</td>
          <td class="paramname"> <em>p_tdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create NOTIFY request to reflect current subscription status. Application can only call this function after it has sent NOTIFY before. This will also re-send the last "message/sipfrag" body that was sent in the previous NOTIFY.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>Server subscription object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_tdata</em>&nbsp;</td><td>Pointer to receive request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="gabba0200ce8c64be4bbad1073d2d8a56e"></a><!-- doxytag: member="sip_xfer.h::pjsip_xfer_send_request" ref="gabba0200ce8c64be4bbad1073d2d8a56e" args="(pjsip_evsub *sub, pjsip_tx_data *tdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_send_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> *&nbsp;</td>
          <td class="paramname"> <em>tdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Send request message that was previously created with initiate(), notify(), or current_notify(). Application may also send request created with other functions, e.g. authentication. But the request MUST be either request that creates/refresh subscription or NOTIFY request.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>The event subscription object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tdata</em>&nbsp;</td><td>Request message to be send.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ga4d6934f496ba085d704171663b700b63"></a><!-- doxytag: member="sip_xfer.h::pjsip_refer_method" ref="ga4d6934f496ba085d704171663b700b63" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">PJ_BEGIN_DECL const <a class="el" href="structpjsip__method.htm">pjsip_method</a> <a class="el" href="group__PJSUA__XFER.htm#ga4d6934f496ba085d704171663b700b63">pjsip_refer_method</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Declaration for REFER method constant. </p>

</div>
</div>
</div>
<p>&nbsp;</p>
<hr><center>
PJSIP Open Source, high performance, small footprint, and very very portable SIP stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->

</BODY>
</HTML>
