<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Caching Pool Factory (2.13)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJLIB Reference</p>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Caching Pool Factory<div class="ingroups"><a class="el" href="group__PJ__POOL__GROUP.htm">Fast Memory Pool</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Caching pool is one sample implementation of pool factory where the factory can reuse memory to create a pool. Application defines what the maximum memory the factory can hold, and when a pool is released the factory decides whether to destroy the pool or to keep it for future use. If the total amount of memory in the internal cache is still within the limit, the factory will keep the pool in the internal cache, otherwise the pool will be destroyed, thus releasing the memory back to the system.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpj__caching__pool.htm">pj_caching_pool</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaab4b67d443e59e3da94eef050d3771e3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJ__CACHING__POOL.htm#gaab4b67d443e59e3da94eef050d3771e3">PJ_CACHING_POOL_ARRAY_SIZE</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:gaab4b67d443e59e3da94eef050d3771e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafbf5400f191e2095240bc6472754e94f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJ__CACHING__POOL.htm#gafbf5400f191e2095240bc6472754e94f">pj_caching_pool_init</a> (<a class="el" href="structpj__caching__pool.htm">pj_caching_pool</a> *ch_pool, const <a class="el" href="structpj__pool__factory__policy.htm">pj_pool_factory_policy</a> *policy, <a class="el" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> max_capacity)</td></tr>
<tr class="separator:gafbf5400f191e2095240bc6472754e94f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4c912e7d9e08dae33c2fecea9f1949bc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJ__CACHING__POOL.htm#ga4c912e7d9e08dae33c2fecea9f1949bc">pj_caching_pool_destroy</a> (<a class="el" href="structpj__caching__pool.htm">pj_caching_pool</a> *ch_pool)</td></tr>
<tr class="separator:ga4c912e7d9e08dae33c2fecea9f1949bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Caching pool is one sample implementation of pool factory where the factory can reuse memory to create a pool. Application defines what the maximum memory the factory can hold, and when a pool is released the factory decides whether to destroy the pool or to keep it for future use. If the total amount of memory in the internal cache is still within the limit, the factory will keep the pool in the internal cache, otherwise the pool will be destroyed, thus releasing the memory back to the system. </p>
<p >// PJ_POOL_FACTORY </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gaab4b67d443e59e3da94eef050d3771e3" name="gaab4b67d443e59e3da94eef050d3771e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaab4b67d443e59e3da94eef050d3771e3">&#9670;&nbsp;</a></span>PJ_CACHING_POOL_ARRAY_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJ_CACHING_POOL_ARRAY_SIZE&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Number of unique sizes, to be used as index to the free list. Each pool in the free list is organized by it's size. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4c912e7d9e08dae33c2fecea9f1949bc" name="ga4c912e7d9e08dae33c2fecea9f1949bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4c912e7d9e08dae33c2fecea9f1949bc">&#9670;&nbsp;</a></span>pj_caching_pool_destroy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pj_caching_pool_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpj__caching__pool.htm">pj_caching_pool</a> *&#160;</td>
          <td class="paramname"><em>ch_pool</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Destroy caching pool, and release all the pools in the recycling list.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch_pool</td><td>The caching pool. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gafbf5400f191e2095240bc6472754e94f" name="gafbf5400f191e2095240bc6472754e94f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafbf5400f191e2095240bc6472754e94f">&#9670;&nbsp;</a></span>pj_caching_pool_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pj_caching_pool_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpj__caching__pool.htm">pj_caching_pool</a> *&#160;</td>
          <td class="paramname"><em>ch_pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpj__pool__factory__policy.htm">pj_pool_factory_policy</a> *&#160;</td>
          <td class="paramname"><em>policy</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a>&#160;</td>
          <td class="paramname"><em>max_capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initialize caching pool.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ch_pool</td><td>The caching pool factory to be initialized. </td></tr>
    <tr><td class="paramname">policy</td><td>Pool factory policy. </td></tr>
    <tr><td class="paramname">max_capacity</td><td>The total capacity to be retained in the cache. When the pool is returned to the cache, it will be kept in recycling list if the total capacity of pools in this list plus the capacity of the pool is still below this value. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJLIB Open Source, high performance, small footprint, and very very portable framework<br>
Copyright (C) 2006-2009 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
