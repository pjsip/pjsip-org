<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>pj_caching_pool Struct Reference (2.12)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJLIB Reference</p>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">pj_caching_pool Struct Reference<div class="ingroups"><a class="el" href="group__PJ__POOL__GROUP.htm">Fast Memory Pool</a> &raquo; <a class="el" href="group__PJ__CACHING__POOL.htm">Caching Pool Factory</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a0849ace123d8760dfab52418c2732af3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpj__pool__factory.htm">pj_pool_factory</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpj__caching__pool.htm#a0849ace123d8760dfab52418c2732af3">factory</a></td></tr>
<tr class="separator:a0849ace123d8760dfab52418c2732af3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab37c22934a74c2a323a60a1d63c2faf2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpj__caching__pool.htm#ab37c22934a74c2a323a60a1d63c2faf2">capacity</a></td></tr>
<tr class="separator:ab37c22934a74c2a323a60a1d63c2faf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e8ae839188eee356cbc0cdbbcd71a62"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpj__caching__pool.htm#a6e8ae839188eee356cbc0cdbbcd71a62">max_capacity</a></td></tr>
<tr class="separator:a6e8ae839188eee356cbc0cdbbcd71a62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af478fd77c170b604c87337adca02607a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpj__caching__pool.htm#af478fd77c170b604c87337adca02607a">used_count</a></td></tr>
<tr class="separator:af478fd77c170b604c87337adca02607a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a765d23af5664d99404ead10f295c0b74"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpj__caching__pool.htm#a765d23af5664d99404ead10f295c0b74">used_size</a></td></tr>
<tr class="separator:a765d23af5664d99404ead10f295c0b74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35969ade75058f069f8f89a9365083ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpj__caching__pool.htm#a35969ade75058f069f8f89a9365083ed">peak_used_size</a></td></tr>
<tr class="separator:a35969ade75058f069f8f89a9365083ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2e6f8fd12b1ea85041548181b20486c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpj__list.htm">pj_list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpj__caching__pool.htm#ae2e6f8fd12b1ea85041548181b20486c">free_list</a> [16]</td></tr>
<tr class="separator:ae2e6f8fd12b1ea85041548181b20486c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6fa4949f2afdfd90358874a0bfdb66"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpj__list.htm">pj_list</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpj__caching__pool.htm#a7d6fa4949f2afdfd90358874a0bfdb66">used_list</a></td></tr>
<tr class="separator:a7d6fa4949f2afdfd90358874a0bfdb66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7aad428d31be42137d12d482371879ef"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpj__caching__pool.htm#a7aad428d31be42137d12d482371879ef">pool_buf</a> [256 *(sizeof(size_t)/4)]</td></tr>
<tr class="separator:a7aad428d31be42137d12d482371879ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c52deb4260066621787a70a55f88b3a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__PJ__BASIC.htm#ga3dc49084043901d31c7b12e5afc9fb2f">pj_lock_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpj__caching__pool.htm#a8c52deb4260066621787a70a55f88b3a">lock</a></td></tr>
<tr class="separator:a8c52deb4260066621787a70a55f88b3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba429342dd61e2a007b815c2c5578519"><td class="memItemLeft" align="right" valign="top"><a id="aba429342dd61e2a007b815c2c5578519"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>used_count</b></td></tr>
<tr class="separator:aba429342dd61e2a007b815c2c5578519"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e551175d5dfc123387a6c2ebebe2b0d"><td class="memItemLeft" align="right" valign="top"><a id="a1e551175d5dfc123387a6c2ebebe2b0d"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>used_size</b></td></tr>
<tr class="separator:a1e551175d5dfc123387a6c2ebebe2b0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc76c565c49f43866a01e62f61a2d506"><td class="memItemLeft" align="right" valign="top"><a id="afc76c565c49f43866a01e62f61a2d506"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>peak_used_size</b></td></tr>
<tr class="separator:afc76c565c49f43866a01e62f61a2d506"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Declaration for caching pool. Application doesn't normally need to care about the contents of this struct, it is only provided here because application need to define an instance of this struct (we can not allocate the struct from a pool since there is no pool factory yet!).</p>
<p>Forward declaration for caching pool, a pool factory implementation. </p>
</div><h2 class="groupheader">Field Documentation</h2>
<a id="ab37c22934a74c2a323a60a1d63c2faf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab37c22934a74c2a323a60a1d63c2faf2">&#9670;&nbsp;</a></span>capacity</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> pj_caching_pool::capacity</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Current factory's capacity, i.e. number of bytes that are allocated and available for application in this factory. The factory's capacity represents the size of all pools kept by this factory in it's free list, which will be returned to application when it requests to create a new pool. </p>

</div>
</div>
<a id="a0849ace123d8760dfab52418c2732af3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0849ace123d8760dfab52418c2732af3">&#9670;&nbsp;</a></span>factory</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpj__pool__factory.htm">pj_pool_factory</a> pj_caching_pool::factory</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Pool factory interface, must be declared first. </p>

</div>
</div>
<a id="ae2e6f8fd12b1ea85041548181b20486c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae2e6f8fd12b1ea85041548181b20486c">&#9670;&nbsp;</a></span>free_list</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpj__list.htm">pj_list</a> pj_caching_pool::free_list[16]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lists of pools in the cache, indexed by pool size. </p>

</div>
</div>
<a id="a8c52deb4260066621787a70a55f88b3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c52deb4260066621787a70a55f88b3a">&#9670;&nbsp;</a></span>lock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__PJ__BASIC.htm#ga3dc49084043901d31c7b12e5afc9fb2f">pj_lock_t</a>* pj_caching_pool::lock</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mutex. </p>

</div>
</div>
<a id="a6e8ae839188eee356cbc0cdbbcd71a62"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e8ae839188eee356cbc0cdbbcd71a62">&#9670;&nbsp;</a></span>max_capacity</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> pj_caching_pool::max_capacity</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum size that can be held by this factory. Once the capacity has exceeded <em>max_capacity</em>, further <a class="el" href="group__PJ__POOL.htm#gade0f14f6635ecfccb576ec41c57fede5">pj_pool_release()</a> will flush the pool. If the capacity is still below the <em>max_capacity</em>, <a class="el" href="group__PJ__POOL.htm#gade0f14f6635ecfccb576ec41c57fede5">pj_pool_release()</a> will save the pool to the factory's free list. </p>

</div>
</div>
<a id="a35969ade75058f069f8f89a9365083ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35969ade75058f069f8f89a9365083ed">&#9670;&nbsp;</a></span>peak_used_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> pj_caching_pool::peak_used_size</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The maximum size of memory used by application throughout the life of the caching pool. </p>

</div>
</div>
<a id="a7aad428d31be42137d12d482371879ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7aad428d31be42137d12d482371879ef">&#9670;&nbsp;</a></span>pool_buf</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char pj_caching_pool::pool_buf[256 *(sizeof(size_t)/4)]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Internal pool. </p>

</div>
</div>
<a id="af478fd77c170b604c87337adca02607a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af478fd77c170b604c87337adca02607a">&#9670;&nbsp;</a></span>used_count</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> pj_caching_pool::used_count</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of pools currently held by applications. This number gets incremented everytime <a class="el" href="group__PJ__POOL.htm#gaf58c3ba26a1314c0e0be103960ba4a5e">pj_pool_create()</a> is called, and gets decremented when <a class="el" href="group__PJ__POOL.htm#gade0f14f6635ecfccb576ec41c57fede5">pj_pool_release()</a> is called. </p>

</div>
</div>
<a id="a7d6fa4949f2afdfd90358874a0bfdb66"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d6fa4949f2afdfd90358874a0bfdb66">&#9670;&nbsp;</a></span>used_list</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpj__list.htm">pj_list</a> pj_caching_pool::used_list</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>List of pools currently allocated by applications. </p>

</div>
</div>
<a id="a765d23af5664d99404ead10f295c0b74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a765d23af5664d99404ead10f295c0b74">&#9670;&nbsp;</a></span>used_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> pj_caching_pool::used_size</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Total size of memory currently used by application. </p>

</div>
</div>
<hr/>The documentation for this struct was generated from the following files:<ul>
<li><a class="el" href="pool_8h_source.htm">pool.h</a></li>
<li><a class="el" href="pool__alt_8h_source.htm">pool_alt.h</a></li>
</ul>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJLIB Open Source, high performance, small footprint, and very very portable framework<br>
Copyright (C) 2006-2009 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
