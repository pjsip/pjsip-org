<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PJMEDIA Reference: Secure RTP (SRTP) Media Transport (1.16)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->

	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJMEDIA Reference</p>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.htm"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.htm"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.htm"><span>Modules</span></a></li>
      <li><a href="annotated.htm"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.htm"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Secure RTP (SRTP) Media Transport<br/>
<small>
[<a class="el" href="group__PJMEDIA__TRANSPORT.htm">Media Transport</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Media transport adapter to add SRTP feature to existing transports.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpjmedia__srtp__crypto.htm">pjmedia_srtp_crypto</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpjmedia__srtp__setting.htm">pjmedia_srtp_setting</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpjmedia__srtp__info.htm">pjmedia_srtp_info</a></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#ga20443caba6c27266422c53ac91943233">pjmedia_srtp_crypto_option</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#gga20443caba6c27266422c53ac91943233a2d553cc0286406312847d1a6a9330f43">PJMEDIA_SRTP_NO_ENCRYPTION</a> =  1, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#gga20443caba6c27266422c53ac91943233ad52cac8f20ee735b0bd0531e4e328545">PJMEDIA_SRTP_NO_AUTHENTICATION</a> =  2
<br/>
 }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#ga52f4c561c77ebd7a992feefc77624ace">pjmedia_srtp_use</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#gga52f4c561c77ebd7a992feefc77624aceaf19b573266ffd49695cd8a4ac8384b09">PJMEDIA_SRTP_DISABLED</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#gga52f4c561c77ebd7a992feefc77624acea39be62bb6503d86553cb1af3bbd1d9a3">PJMEDIA_SRTP_OPTIONAL</a>, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#gga52f4c561c77ebd7a992feefc77624aceac74214bfb0a53ba6fd3d1ebcd71f9a04">PJMEDIA_SRTP_MANDATORY</a>
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#ga9297e2f8344bb5a424ac72d3651f1834">pjmedia_srtp_init_lib</a> (<a class="el" href="group__PJMEDIA__TYPES.htm#ga7c3623d8e90e22b7184a6e42dc24f6f5">pjmedia_endpt</a> *endpt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#ga0f8049c3687a59a9e71563befd257459">pjmedia_srtp_setting_default</a> (<a class="el" href="structpjmedia__srtp__setting.htm">pjmedia_srtp_setting</a> *opt)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#ga07f81c23177830803f93a2e27b98a368">pjmedia_transport_srtp_create</a> (<a class="el" href="group__PJMEDIA__TYPES.htm#ga7c3623d8e90e22b7184a6e42dc24f6f5">pjmedia_endpt</a> *endpt, <a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> *tp, const <a class="el" href="structpjmedia__srtp__setting.htm">pjmedia_srtp_setting</a> *opt, <a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> **p_tp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#gab603d4f070665cb1a8038c021a6019e6">pjmedia_transport_srtp_start</a> (<a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> *srtp, const <a class="el" href="structpjmedia__srtp__crypto.htm">pjmedia_srtp_crypto</a> *tx, const <a class="el" href="structpjmedia__srtp__crypto.htm">pjmedia_srtp_crypto</a> *rx)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#ga6e7e77639e6cfbcf74ec583a06acf492">pjmedia_transport_srtp_stop</a> (<a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> *srtp)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#ga2819af0f84a1fd52a290779e3cd427af">pjmedia_transport_srtp_decrypt_pkt</a> (<a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> *tp, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> is_rtp, void *pkt, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a> *pkt_len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#ga2d71bf2613172a3098f8076bdd62d9d1">pjmedia_transport_srtp_get_member</a> (<a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> *srtp)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This module implements SRTP as described by RFC 3711, using RFC 4568 as key exchange method. It implements <a class="el" href="group__PJMEDIA__TRANSPORT.htm">Media Transport</a> to integrate with the rest of PJMEDIA framework.</p>
<p>As we know, media transport is separated from the stream object (which does the encoding/decoding of PCM frames, (de)packetization of RTP/RTCP packets, and de-jitter buffering). The connection between stream and media transport is established when the stream is created (we need to specify media transport during stream creation), and the interconnection can be depicted from the diagram below:</p>
<div align="center">
<img src="media-transport.PNG" alt="media-transport.PNG"/>
</div>
<p>I think the diagram above is self-explanatory.</p>
<p>SRTP functionality is implemented as some kind of "adapter", which is plugged between the stream and the actual media transport that does sending/receiving RTP/RTCP packets. When SRTP is used, the interconnection between stream and transport is like the diagram below:</p>
<div align="center">
<img src="media-srtp-transport.PNG" alt="media-srtp-transport.PNG"/>
</div>
<p>So to stream, the SRTP transport behaves as if it is a media transport (because it is a media transport), and to the media transport it behaves as if it is a stream. The SRTP object then forwards RTP packets back and forth between stream and the actual transport, encrypting/decrypting the RTP/RTCP packets as necessary.</p>
<p>The neat thing about this design is the SRTP "adapter" then can be used to encrypt any kind of media transports. We currently have UDP and ICE media transports that can benefit SRTP, and we could add SRTP to any media transports that will be added in the future. </p>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga20443caba6c27266422c53ac91943233"></a><!-- doxytag: member="transport_srtp.h::pjmedia_srtp_crypto_option" ref="ga20443caba6c27266422c53ac91943233" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#ga20443caba6c27266422c53ac91943233">pjmedia_srtp_crypto_option</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Crypto option. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga20443caba6c27266422c53ac91943233a2d553cc0286406312847d1a6a9330f43"></a><!-- doxytag: member="PJMEDIA_SRTP_NO_ENCRYPTION" ref="gga20443caba6c27266422c53ac91943233a2d553cc0286406312847d1a6a9330f43" args="" -->PJMEDIA_SRTP_NO_ENCRYPTION</em>&nbsp;</td><td>
<p>When this flag is specified, encryption will be disabled. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga20443caba6c27266422c53ac91943233ad52cac8f20ee735b0bd0531e4e328545"></a><!-- doxytag: member="PJMEDIA_SRTP_NO_AUTHENTICATION" ref="gga20443caba6c27266422c53ac91943233ad52cac8f20ee735b0bd0531e4e328545" args="" -->PJMEDIA_SRTP_NO_AUTHENTICATION</em>&nbsp;</td><td>
<p>When this flag is specified, authentication will be disabled. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<a class="anchor" id="ga52f4c561c77ebd7a992feefc77624ace"></a><!-- doxytag: member="transport_srtp.h::pjmedia_srtp_use" ref="ga52f4c561c77ebd7a992feefc77624ace" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#ga52f4c561c77ebd7a992feefc77624ace">pjmedia_srtp_use</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This enumeration specifies the behavior of the SRTP transport regarding media security offer and answer. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga52f4c561c77ebd7a992feefc77624aceaf19b573266ffd49695cd8a4ac8384b09"></a><!-- doxytag: member="PJMEDIA_SRTP_DISABLED" ref="gga52f4c561c77ebd7a992feefc77624aceaf19b573266ffd49695cd8a4ac8384b09" args="" -->PJMEDIA_SRTP_DISABLED</em>&nbsp;</td><td>
<p>When this flag is specified, SRTP will be disabled, and the transport will reject RTP/SAVP offer. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga52f4c561c77ebd7a992feefc77624acea39be62bb6503d86553cb1af3bbd1d9a3"></a><!-- doxytag: member="PJMEDIA_SRTP_OPTIONAL" ref="gga52f4c561c77ebd7a992feefc77624acea39be62bb6503d86553cb1af3bbd1d9a3" args="" -->PJMEDIA_SRTP_OPTIONAL</em>&nbsp;</td><td>
<p>When this flag is specified, SRTP will be advertised as optional and incoming SRTP offer will be accepted. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga52f4c561c77ebd7a992feefc77624aceac74214bfb0a53ba6fd3d1ebcd71f9a04"></a><!-- doxytag: member="PJMEDIA_SRTP_MANDATORY" ref="gga52f4c561c77ebd7a992feefc77624aceac74214bfb0a53ba6fd3d1ebcd71f9a04" args="" -->PJMEDIA_SRTP_MANDATORY</em>&nbsp;</td><td>
<p>When this flag is specified, the transport will require that RTP/SAVP media shall be used. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga9297e2f8344bb5a424ac72d3651f1834"></a><!-- doxytag: member="transport_srtp.h::pjmedia_srtp_init_lib" ref="ga9297e2f8344bb5a424ac72d3651f1834" args="(pjmedia_endpt *endpt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_srtp_init_lib </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__TYPES.htm#ga7c3623d8e90e22b7184a6e42dc24f6f5">pjmedia_endpt</a> *&nbsp;</td>
          <td class="paramname"> <em>endpt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize SRTP library. This function should be called before any SRTP functions, however calling <a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#ga07f81c23177830803f93a2e27b98a368">pjmedia_transport_srtp_create()</a> will also invoke this function. This function will also register SRTP library deinitialization to <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gaf70d7ec244bab9f2a33f0d60966ced40">pj_atexit()</a>, so the deinitialization of SRTP library will be performed automatically by PJLIB destructor.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>endpt</em>&nbsp;</td><td>The media endpoint instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0f8049c3687a59a9e71563befd257459"></a><!-- doxytag: member="transport_srtp.h::pjmedia_srtp_setting_default" ref="ga0f8049c3687a59a9e71563befd257459" args="(pjmedia_srtp_setting *opt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pjmedia_srtp_setting_default </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjmedia__srtp__setting.htm">pjmedia_srtp_setting</a> *&nbsp;</td>
          <td class="paramname"> <em>opt</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize SRTP setting with its default values.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>opt</em>&nbsp;</td><td>SRTP setting to be initialized. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga07f81c23177830803f93a2e27b98a368"></a><!-- doxytag: member="transport_srtp.h::pjmedia_transport_srtp_create" ref="ga07f81c23177830803f93a2e27b98a368" args="(pjmedia_endpt *endpt, pjmedia_transport *tp, const pjmedia_srtp_setting *opt, pjmedia_transport **p_tp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_transport_srtp_create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__TYPES.htm#ga7c3623d8e90e22b7184a6e42dc24f6f5">pjmedia_endpt</a> *&nbsp;</td>
          <td class="paramname"> <em>endpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> *&nbsp;</td>
          <td class="paramname"> <em>tp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjmedia__srtp__setting.htm">pjmedia_srtp_setting</a> *&nbsp;</td>
          <td class="paramname"> <em>opt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> **&nbsp;</td>
          <td class="paramname"> <em>p_tp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create an SRTP media transport.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>endpt</em>&nbsp;</td><td>The media endpoint instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tp</em>&nbsp;</td><td>The actual media transport to send and receive RTP/RTCP packets. This media transport will be kept as member transport of this SRTP instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>opt</em>&nbsp;</td><td>Optional settings. If NULL is given, default settings will be used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_tp</em>&nbsp;</td><td>Pointer to receive the transport SRTP instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="gab603d4f070665cb1a8038c021a6019e6"></a><!-- doxytag: member="transport_srtp.h::pjmedia_transport_srtp_start" ref="gab603d4f070665cb1a8038c021a6019e6" args="(pjmedia_transport *srtp, const pjmedia_srtp_crypto *tx, const pjmedia_srtp_crypto *rx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_transport_srtp_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> *&nbsp;</td>
          <td class="paramname"> <em>srtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjmedia__srtp__crypto.htm">pjmedia_srtp_crypto</a> *&nbsp;</td>
          <td class="paramname"> <em>tx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjmedia__srtp__crypto.htm">pjmedia_srtp_crypto</a> *&nbsp;</td>
          <td class="paramname"> <em>rx</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Manually start SRTP session with the given parameters. Application only needs to call this function when the SRTP transport is used without SDP offer/answer. When SDP offer/answer framework is used, the SRTP transport will be started/stopped by <a class="el" href="group__PJMEDIA__TRANSPORT.htm#ga74ab1c1b9b09d75865a231519bb58aa7">pjmedia_transport_media_start()</a> and <a class="el" href="group__PJMEDIA__TRANSPORT.htm#gaed068de25cc5cbda27c1b7058597d3b5">pjmedia_transport_media_stop()</a> respectively.</p>
<p>Please note that even if an RTP stream is only one direction, application will still need to provide both crypto suites, because it is needed by RTCP.</p>
<p>If application specifies the crypto keys, the keys for transmit and receive direction MUST be different.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>srtp</em>&nbsp;</td><td>The SRTP transport. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tx</em>&nbsp;</td><td>Crypto suite setting for transmit direction. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rx</em>&nbsp;</td><td>Crypto suite setting for receive direction.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga6e7e77639e6cfbcf74ec583a06acf492"></a><!-- doxytag: member="transport_srtp.h::pjmedia_transport_srtp_stop" ref="ga6e7e77639e6cfbcf74ec583a06acf492" args="(pjmedia_transport *srtp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_transport_srtp_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> *&nbsp;</td>
          <td class="paramname"> <em>srtp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Stop SRTP session.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>srtp</em>&nbsp;</td><td>The SRTP media transport.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__PJMEDIA__TRANSPORT__SRTP.htm#gab603d4f070665cb1a8038c021a6019e6">pjmedia_transport_srtp_start()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga2819af0f84a1fd52a290779e3cd427af"></a><!-- doxytag: member="transport_srtp.h::pjmedia_transport_srtp_decrypt_pkt" ref="ga2819af0f84a1fd52a290779e3cd427af" args="(pjmedia_transport *tp, pj_bool_t is_rtp, void *pkt, int *pkt_len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_transport_srtp_decrypt_pkt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> *&nbsp;</td>
          <td class="paramname"> <em>tp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a>&nbsp;</td>
          <td class="paramname"> <em>is_rtp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>pkt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a> *&nbsp;</td>
          <td class="paramname"> <em>pkt_len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is a utility function to decrypt SRTP packet using SRTP transport. This function is not part of SRTP transport's API, but it can be used to decrypt SRTP packets from non-network (for example, from a saved file) without having to use the transport framework. See pcaputil.c in the samples collection on how to use this function.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>tp</em>&nbsp;</td><td>The SRTP transport. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>is_rtp</em>&nbsp;</td><td>Set to non-zero if the packet is SRTP, otherwise set to zero if the packet is SRTCP. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pkt</em>&nbsp;</td><td>On input, it contains SRTP or SRTCP packet. On output, it contains the decrypted RTP/RTCP packet. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pkt_len</em>&nbsp;</td><td>On input, specify the length of the buffer. On output, it will be filled with the actual length of decrypted packet.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga2d71bf2613172a3098f8076bdd62d9d1"></a><!-- doxytag: member="transport_srtp.h::pjmedia_transport_srtp_get_member" ref="ga2d71bf2613172a3098f8076bdd62d9d1" args="(pjmedia_transport *srtp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a>* pjmedia_transport_srtp_get_member </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjmedia__transport.htm">pjmedia_transport</a> *&nbsp;</td>
          <td class="paramname"> <em>srtp</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Query member transport of SRTP.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>srtp</em>&nbsp;</td><td>The SRTP media transport.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>member media transport. </dd></dl>

</div>
</div>
</div>
<p>&nbsp;</p>
<hr><center>
PJMEDIA small footprint Open Source media stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
