<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PJMEDIA Reference: Accoustic Echo Cancellation API (1.16)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->

	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJMEDIA Reference</p>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.htm"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.htm"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.htm"><span>Modules</span></a></li>
      <li><a href="annotated.htm"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.htm"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Accoustic Echo Cancellation API<br/>
<small>
[<a class="el" href="group__PJMEDIA__PORT.htm">Media Ports Framework</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Echo Cancellation API.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef typedefPJ_BEGIN_DECL <br class="typebreak"/>
struct <a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gaa92df3d6726a21598e25bf5d4a23897e">pjmedia_echo_flag</a> { <br/>
&nbsp;&nbsp;<a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ggaa92df3d6726a21598e25bf5d4a23897ea39ef7855b2768b019c6a57cbb07a88e6">PJMEDIA_ECHO_DEFAULT</a> =  0, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ggaa92df3d6726a21598e25bf5d4a23897ea71144361b767cd76b7024123880ffc59">PJMEDIA_ECHO_SPEEX</a> =  1, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ggaa92df3d6726a21598e25bf5d4a23897ea55f87d3533995a8cc2a23f3f42da0af2">PJMEDIA_ECHO_SIMPLE</a> =  2, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ggaa92df3d6726a21598e25bf5d4a23897ea630a278468cadef209dab137a0b8ecbf">PJMEDIA_ECHO_ALGO_MASK</a> =  15, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ggaa92df3d6726a21598e25bf5d4a23897ead2141759cd8711dab10a67c85467124d">PJMEDIA_ECHO_NO_LOCK</a> =  16, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ggaa92df3d6726a21598e25bf5d4a23897ea0a0ae7236417c0bc4a1abb00503202bb">PJMEDIA_ECHO_USE_SIMPLE_FIFO</a> =  32, 
<br/>
&nbsp;&nbsp;<a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ggaa92df3d6726a21598e25bf5d4a23897ea237230ab92f106d49c2100389a4838b4">PJMEDIA_ECHO_USE_SW_ECHO</a> =  64
<br/>
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ga6b2a27be70d96eb16fac66f19b6913d3">pjmedia_echo_create</a> (<a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, unsigned clock_rate, unsigned samples_per_frame, unsigned tail_ms, unsigned latency_ms, unsigned options, <a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> **p_echo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ga0a456fe70e930f3ae6b2b798562708cf">pjmedia_echo_create2</a> (<a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, unsigned clock_rate, unsigned channel_count, unsigned samples_per_frame, unsigned tail_ms, unsigned latency_ms, unsigned options, <a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> **p_echo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ga41462cd5b4d358fd8aaed2dc1a5f7d5e">pjmedia_echo_destroy</a> (<a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> *echo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ga2cf4d876ef64dbfe7ad5aab96e41de16">pjmedia_echo_reset</a> (<a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> *echo)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ga7608226d38a27fdad940450e5b6ea5d3">pjmedia_echo_playback</a> (<a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> *echo, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> *play_frm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ga464dcd241b4f71e3d09cdcb204fd2a6f">pjmedia_echo_capture</a> (<a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> *echo, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> *rec_frm, unsigned options)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac1e6528324d9b1384788cc85c5fc69a4">pjmedia_echo_cancel</a> (<a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> *echo, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> *rec_frm, const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> *play_frm, unsigned options, void *reserved)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This section describes API to perform echo cancellation to audio signal. There may be multiple echo canceller implementation in PJMEDIA, ranging from simple echo suppressor to a full Accoustic Echo Canceller/AEC. By using this API, application should be able to use which EC backend to use base on the requirement and capability of the platform. </p>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="gac706b0f94ce48220364fcd65e9c983e0"></a><!-- doxytag: member="echo.h::pjmedia_echo_state" ref="gac706b0f94ce48220364fcd65e9c983e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef typedefPJ_BEGIN_DECL struct <a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> <a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Opaque type for PJMEDIA Echo Canceller state. </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="gaa92df3d6726a21598e25bf5d4a23897e"></a><!-- doxytag: member="echo.h::pjmedia_echo_flag" ref="gaa92df3d6726a21598e25bf5d4a23897e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gaa92df3d6726a21598e25bf5d4a23897e">pjmedia_echo_flag</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Echo cancellation options. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="ggaa92df3d6726a21598e25bf5d4a23897ea39ef7855b2768b019c6a57cbb07a88e6"></a><!-- doxytag: member="PJMEDIA_ECHO_DEFAULT" ref="ggaa92df3d6726a21598e25bf5d4a23897ea39ef7855b2768b019c6a57cbb07a88e6" args="" -->PJMEDIA_ECHO_DEFAULT</em>&nbsp;</td><td>
<p>Use any available backend echo canceller algorithm. This is the default settings. This setting is mutually exclusive with PJMEDIA_ECHO_SIMPLE and PJMEDIA_ECHO_SPEEX. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa92df3d6726a21598e25bf5d4a23897ea71144361b767cd76b7024123880ffc59"></a><!-- doxytag: member="PJMEDIA_ECHO_SPEEX" ref="ggaa92df3d6726a21598e25bf5d4a23897ea71144361b767cd76b7024123880ffc59" args="" -->PJMEDIA_ECHO_SPEEX</em>&nbsp;</td><td>
<p>Force to use Speex AEC as the backend echo canceller algorithm. This setting is mutually exclusive with PJMEDIA_ECHO_SIMPLE. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa92df3d6726a21598e25bf5d4a23897ea55f87d3533995a8cc2a23f3f42da0af2"></a><!-- doxytag: member="PJMEDIA_ECHO_SIMPLE" ref="ggaa92df3d6726a21598e25bf5d4a23897ea55f87d3533995a8cc2a23f3f42da0af2" args="" -->PJMEDIA_ECHO_SIMPLE</em>&nbsp;</td><td>
<p>If PJMEDIA_ECHO_SIMPLE flag is specified during echo canceller creation, then a simple echo suppressor will be used instead of an accoustic echo cancellation. This setting is mutually exclusive with PJMEDIA_ECHO_SPEEX. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa92df3d6726a21598e25bf5d4a23897ea630a278468cadef209dab137a0b8ecbf"></a><!-- doxytag: member="PJMEDIA_ECHO_ALGO_MASK" ref="ggaa92df3d6726a21598e25bf5d4a23897ea630a278468cadef209dab137a0b8ecbf" args="" -->PJMEDIA_ECHO_ALGO_MASK</em>&nbsp;</td><td>
<p>For internal use. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa92df3d6726a21598e25bf5d4a23897ead2141759cd8711dab10a67c85467124d"></a><!-- doxytag: member="PJMEDIA_ECHO_NO_LOCK" ref="ggaa92df3d6726a21598e25bf5d4a23897ead2141759cd8711dab10a67c85467124d" args="" -->PJMEDIA_ECHO_NO_LOCK</em>&nbsp;</td><td>
<p>If PJMEDIA_ECHO_NO_LOCK flag is specified, no mutex will be created for the echo canceller, but application will guarantee that echo canceller will not be called by different threads at the same time. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa92df3d6726a21598e25bf5d4a23897ea0a0ae7236417c0bc4a1abb00503202bb"></a><!-- doxytag: member="PJMEDIA_ECHO_USE_SIMPLE_FIFO" ref="ggaa92df3d6726a21598e25bf5d4a23897ea0a0ae7236417c0bc4a1abb00503202bb" args="" -->PJMEDIA_ECHO_USE_SIMPLE_FIFO</em>&nbsp;</td><td>
<p>If PJMEDIA_ECHO_USE_SIMPLE_FIFO flag is specified, the delay buffer created for the echo canceller will use simple FIFO mechanism, i.e. without using WSOLA to expand and shrink audio samples. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="ggaa92df3d6726a21598e25bf5d4a23897ea237230ab92f106d49c2100389a4838b4"></a><!-- doxytag: member="PJMEDIA_ECHO_USE_SW_ECHO" ref="ggaa92df3d6726a21598e25bf5d4a23897ea237230ab92f106d49c2100389a4838b4" args="" -->PJMEDIA_ECHO_USE_SW_ECHO</em>&nbsp;</td><td>
<p>If PJMEDIA_ECHO_USE_SW_ECHO flag is specified, software echo canceller will be used instead of device EC. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga6b2a27be70d96eb16fac66f19b6913d3"></a><!-- doxytag: member="echo.h::pjmedia_echo_create" ref="ga6b2a27be70d96eb16fac66f19b6913d3" args="(pj_pool_t *pool, unsigned clock_rate, unsigned samples_per_frame, unsigned tail_ms, unsigned latency_ms, unsigned options, pjmedia_echo_state **p_echo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_echo_create </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>clock_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>samples_per_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>tail_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>latency_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> **&nbsp;</td>
          <td class="paramname"> <em>p_echo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create the echo canceller.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>Pool to allocate memory. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clock_rate</em>&nbsp;</td><td>Media clock rate/sampling rate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>samples_per_frame</em>&nbsp;</td><td>Number of samples per frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tail_ms</em>&nbsp;</td><td>Tail length, miliseconds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>latency_ms</em>&nbsp;</td><td>Total lacency introduced by playback and recording device. Set to zero if the latency is not known. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>Options. If PJMEDIA_ECHO_SIMPLE is specified, then a simple echo suppressor implementation will be used instead of an accoustic echo cancellation. See <a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gaa92df3d6726a21598e25bf5d4a23897e">pjmedia_echo_flag</a> for other options. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_echo</em>&nbsp;</td><td>Pointer to receive the Echo Canceller state.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success, or the appropriate status. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0a456fe70e930f3ae6b2b798562708cf"></a><!-- doxytag: member="echo.h::pjmedia_echo_create2" ref="ga0a456fe70e930f3ae6b2b798562708cf" args="(pj_pool_t *pool, unsigned clock_rate, unsigned channel_count, unsigned samples_per_frame, unsigned tail_ms, unsigned latency_ms, unsigned options, pjmedia_echo_state **p_echo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_echo_create2 </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>clock_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>channel_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>samples_per_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>tail_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>latency_ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> **&nbsp;</td>
          <td class="paramname"> <em>p_echo</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create multi-channel the echo canceller.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>Pool to allocate memory. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>clock_rate</em>&nbsp;</td><td>Media clock rate/sampling rate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channel_count</em>&nbsp;</td><td>Number of channels. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>samples_per_frame</em>&nbsp;</td><td>Number of samples per frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tail_ms</em>&nbsp;</td><td>Tail length, miliseconds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>latency_ms</em>&nbsp;</td><td>Total lacency introduced by playback and recording device. Set to zero if the latency is not known. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>Options. If PJMEDIA_ECHO_SIMPLE is specified, then a simple echo suppressor implementation will be used instead of an accoustic echo cancellation. See <a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gaa92df3d6726a21598e25bf5d4a23897e">pjmedia_echo_flag</a> for other options. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_echo</em>&nbsp;</td><td>Pointer to receive the Echo Canceller state.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success, or the appropriate status. </dd></dl>

</div>
</div>
<a class="anchor" id="ga41462cd5b4d358fd8aaed2dc1a5f7d5e"></a><!-- doxytag: member="echo.h::pjmedia_echo_destroy" ref="ga41462cd5b4d358fd8aaed2dc1a5f7d5e" args="(pjmedia_echo_state *echo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_echo_destroy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> *&nbsp;</td>
          <td class="paramname"> <em>echo</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destroy the Echo Canceller.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>echo</em>&nbsp;</td><td>The Echo Canceller.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga2cf4d876ef64dbfe7ad5aab96e41de16"></a><!-- doxytag: member="echo.h::pjmedia_echo_reset" ref="ga2cf4d876ef64dbfe7ad5aab96e41de16" args="(pjmedia_echo_state *echo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_echo_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> *&nbsp;</td>
          <td class="paramname"> <em>echo</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Reset the echo canceller.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>echo</em>&nbsp;</td><td>The Echo Canceller.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga7608226d38a27fdad940450e5b6ea5d3"></a><!-- doxytag: member="echo.h::pjmedia_echo_playback" ref="ga7608226d38a27fdad940450e5b6ea5d3" args="(pjmedia_echo_state *echo, pj_int16_t *play_frm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_echo_playback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> *&nbsp;</td>
          <td class="paramname"> <em>echo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> *&nbsp;</td>
          <td class="paramname"> <em>play_frm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Let the Echo Canceller know that a frame has been played to the speaker. The Echo Canceller will keep the frame in its internal buffer, to be used when cancelling the echo with <a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ga464dcd241b4f71e3d09cdcb204fd2a6f">pjmedia_echo_capture()</a>.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>echo</em>&nbsp;</td><td>The Echo Canceller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>play_frm</em>&nbsp;</td><td>Sample buffer containing frame to be played (or has been played) to the playback device. The frame must contain exactly samples_per_frame number of samples.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga464dcd241b4f71e3d09cdcb204fd2a6f"></a><!-- doxytag: member="echo.h::pjmedia_echo_capture" ref="ga464dcd241b4f71e3d09cdcb204fd2a6f" args="(pjmedia_echo_state *echo, pj_int16_t *rec_frm, unsigned options)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_echo_capture </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> *&nbsp;</td>
          <td class="paramname"> <em>echo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> *&nbsp;</td>
          <td class="paramname"> <em>rec_frm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>options</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Let the Echo Canceller know that a frame has been captured from the microphone. The Echo Canceller will cancel the echo from the captured signal, using the internal buffer (supplied by <a class="el" href="group__PJMEDIA__Echo__Cancel.htm#ga7608226d38a27fdad940450e5b6ea5d3">pjmedia_echo_playback()</a>) as the FES (Far End Speech) reference.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>echo</em>&nbsp;</td><td>The Echo Canceller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rec_frm</em>&nbsp;</td><td>On input, it contains the input signal (captured from microphone) which echo is to be removed. Upon returning this function, this buffer contain the processed signal with the echo removed. The frame must contain exactly samples_per_frame number of samples. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>Echo cancellation options, reserved for future use. Put zero for now.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="gac1e6528324d9b1384788cc85c5fc69a4"></a><!-- doxytag: member="echo.h::pjmedia_echo_cancel" ref="gac1e6528324d9b1384788cc85c5fc69a4" args="(pjmedia_echo_state *echo, pj_int16_t *rec_frm, const pj_int16_t *play_frm, unsigned options, void *reserved)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_echo_cancel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__Echo__Cancel.htm#gac706b0f94ce48220364fcd65e9c983e0">pjmedia_echo_state</a> *&nbsp;</td>
          <td class="paramname"> <em>echo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> *&nbsp;</td>
          <td class="paramname"> <em>rec_frm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> *&nbsp;</td>
          <td class="paramname"> <em>play_frm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>reserved</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Perform echo cancellation.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>echo</em>&nbsp;</td><td>The Echo Canceller. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rec_frm</em>&nbsp;</td><td>On input, it contains the input signal (captured from microphone) which echo is to be removed. Upon returning this function, this buffer contain the processed signal with the echo removed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>play_frm</em>&nbsp;</td><td>Sample buffer containing frame to be played (or has been played) to the playback device. The frame must contain exactly samples_per_frame number of samples. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>Echo cancellation options, reserved for future use. Put zero for now. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reserved</em>&nbsp;</td><td>Reserved for future use, put NULL for now.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
</div>
<p>&nbsp;</p>
<hr><center>
PJMEDIA small footprint Open Source media stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
