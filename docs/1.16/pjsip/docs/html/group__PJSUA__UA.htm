<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PJSIP Reference: SIP User Agent Module (1.16)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJSIP Reference</p>

<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.htm"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.htm"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.htm"><span>Modules</span></a></li>
      <li><a href="annotated.htm"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.htm"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>SIP User Agent Module<br/>
<small>
[<a class="el" href="group__PJSIP__UA.htm">Base User Agent Layer/Common Dialog Layer</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Provides dialog management.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpjsip__ua__init__param.htm">pjsip_ua_init_param</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__UA.htm#ga444b57c13a6e8ac9131bd2c2ff6356ed">pjsip_ua_init_module</a> (<a class="el" href="sip__types_8h.htm#a2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *endpt, const <a class="el" href="structpjsip__ua__init__param.htm">pjsip_ua_init_param</a> *prm)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpjsip__module.htm">pjsip_user_agent</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__UA.htm#gaec6ebe425231e64b6cc47f908e187a1e">pjsip_ua_instance</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gafbfd2fd08c6041ea3cb217310c0b5b48">pj_uint32_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__UA.htm#gab5285bfef75964687c90171ec873692b">pjsip_ua_get_dlg_set_count</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__UA.htm#gad850a1ff653d86c0735060e38f1e3e33">pjsip_ua_find_dialog</a> (const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *call_id, const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *local_tag, const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *remote_tag, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> lock_dialog)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__UA.htm#ga0334d72b8c03415fb505ae396e308df7">pjsip_ua_destroy</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__UA.htm#ga8f2c3cf8260554eb3cf93f9ae60005b1">pjsip_ua_dump</a> (<a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> detail)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="sip__types_8h.htm#a2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__UA.htm#ga1c5a96200aeee70bc2d137e4769e2b21">pjsip_ua_get_endpt</a> (<a class="el" href="structpjsip__module.htm">pjsip_user_agent</a> *ua)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Application MUST initialize the user agent layer module by calling <a class="el" href="group__PJSUA__UA.htm#ga444b57c13a6e8ac9131bd2c2ff6356ed">pjsip_ua_init_module()</a> before using any of the dialog API, and link the application with with <b>pjsip-core</b> library. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga444b57c13a6e8ac9131bd2c2ff6356ed"></a><!-- doxytag: member="sip_ua_layer.h::pjsip_ua_init_module" ref="ga444b57c13a6e8ac9131bd2c2ff6356ed" args="(pjsip_endpoint *endpt, const pjsip_ua_init_param *prm)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_ua_init_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sip__types_8h.htm#a2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>endpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__ua__init__param.htm">pjsip_ua_init_param</a> *&nbsp;</td>
          <td class="paramname"> <em>prm</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize user agent layer and register it to the specified endpoint.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>endpt</em>&nbsp;</td><td>The endpoint where the user agent will be registered. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prm</em>&nbsp;</td><td>UA initialization parameter.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="gaec6ebe425231e64b6cc47f908e187a1e"></a><!-- doxytag: member="sip_ua_layer.h::pjsip_ua_instance" ref="gaec6ebe425231e64b6cc47f908e187a1e" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpjsip__module.htm">pjsip_user_agent</a>* pjsip_ua_instance </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the instance of the user agent.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The user agent module instance. </dd></dl>

</div>
</div>
<a class="anchor" id="gab5285bfef75964687c90171ec873692b"></a><!-- doxytag: member="sip_ua_layer.h::pjsip_ua_get_dlg_set_count" ref="gab5285bfef75964687c90171ec873692b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gafbfd2fd08c6041ea3cb217310c0b5b48">pj_uint32_t</a> pjsip_ua_get_dlg_set_count </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Retrieve the current number of dialog-set currently registered in the hash table. Note that dialog-set is different than dialog when the request forks. In this case, all dialogs created from the original request will belong to the same dialog set. When no forking occurs, the number of dialog sets will be equal to the number of dialogs.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Number of dialog sets. </dd></dl>

</div>
</div>
<a class="anchor" id="gad850a1ff653d86c0735060e38f1e3e33"></a><!-- doxytag: member="sip_ua_layer.h::pjsip_ua_find_dialog" ref="gad850a1ff653d86c0735060e38f1e3e33" args="(const pj_str_t *call_id, const pj_str_t *local_tag, const pj_str_t *remote_tag, pj_bool_t lock_dialog)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a>* pjsip_ua_find_dialog </td>
          <td>(</td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&nbsp;</td>
          <td class="paramname"> <em>call_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&nbsp;</td>
          <td class="paramname"> <em>local_tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&nbsp;</td>
          <td class="paramname"> <em>remote_tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a>&nbsp;</td>
          <td class="paramname"> <em>lock_dialog</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Find a dialog with the specified Call-ID and tags properties. This function may optionally lock the matching dialog instance before returning it back to the caller.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>call_id</em>&nbsp;</td><td>The call ID to be matched. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>local_tag</em>&nbsp;</td><td>The local tag to be matched. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remote_tag</em>&nbsp;</td><td>The remote tag to be matched. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lock_dialog</em>&nbsp;</td><td>If non-zero, instruct the function to lock the matching dialog with <a class="el" href="group__PJSIP__DIALOG.htm#ga5d87304615303ffbe20a09e0a3ff59df">pjsip_dlg_inc_lock()</a>. Application is responsible to release the dialog's lock after it has finished manipulating the dialog, by calling <a class="el" href="group__PJSIP__DIALOG.htm#ga3283f8502b1df5d37914668338351a4f">pjsip_dlg_dec_lock()</a>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The matching dialog instance, or NULL if no matching dialog is found. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0334d72b8c03415fb505ae396e308df7"></a><!-- doxytag: member="sip_ua_layer.h::pjsip_ua_destroy" ref="ga0334d72b8c03415fb505ae396e308df7" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_ua_destroy </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Destroy the user agent layer.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga8f2c3cf8260554eb3cf93f9ae60005b1"></a><!-- doxytag: member="sip_ua_layer.h::pjsip_ua_dump" ref="ga8f2c3cf8260554eb3cf93f9ae60005b1" args="(pj_bool_t detail)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pjsip_ua_dump </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a>&nbsp;</td>
          <td class="paramname"> <em>detail</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Dump user agent contents (e.g. all dialogs).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>detail</em>&nbsp;</td><td>If non-zero, list of dialogs will be printed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga1c5a96200aeee70bc2d137e4769e2b21"></a><!-- doxytag: member="sip_ua_layer.h::pjsip_ua_get_endpt" ref="ga1c5a96200aeee70bc2d137e4769e2b21" args="(pjsip_user_agent *ua)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sip__types_8h.htm#a2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a>* pjsip_ua_get_endpt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__module.htm">pjsip_user_agent</a> *&nbsp;</td>
          <td class="paramname"> <em>ua</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the endpoint instance of a user agent module.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ua</em>&nbsp;</td><td>The user agent instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The endpoint instance where the user agent is registered. </dd></dl>

</div>
</div>
</div>
<p>&nbsp;</p>
<hr><center>
PJSIP Open Source, high performance, small footprint, and very very portable SIP stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->

</BODY>
</HTML>
