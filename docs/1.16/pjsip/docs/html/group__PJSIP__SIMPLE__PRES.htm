<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PJSIP Reference: SIP Extension for Presence (RFC 3856) (1.16)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJSIP Reference</p>

<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.htm"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.htm"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.htm"><span>Modules</span></a></li>
      <li><a href="annotated.htm"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.htm"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>SIP Extension for Presence (RFC 3856)<br/>
<small>
[<a class="el" href="group__PJSIP__SIMPLE.htm">Event and Presence Framework</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Support for SIP Extension for Presence (RFC 3856).  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#gab3bd692d59f7be044647fc863d85208c">PJSIP_PRES_STATUS_MAX_INFO</a>&nbsp;&nbsp;&nbsp;8</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga7e588bd39d4a500e9c4ea6743a78e8fc">pjsip_pres_init_module</a> (<a class="el" href="sip__types_8h.htm#a2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *endpt, <a class="el" href="structpjsip__module.htm">pjsip_module</a> *mod_evsub)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpjsip__module.htm">pjsip_module</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga4b1ad56afc8795e238428debf6f0236f">pjsip_pres_instance</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga6a5f82648a32d214b9cb60c4b0488157">pjsip_pres_create_uac</a> (<a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *dlg, const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *user_cb, unsigned <a class="elRef" doxygen="pjmedia.tag:../../../pjmedia/docs/html/" href="../../../pjmedia/docs/html/structapp__t_1_1options.htm">options</a>, <a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> **p_evsub)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga61dffe7e42b59dd65307959836e2d92e">pjsip_pres_create_uas</a> (<a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *dlg, const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *user_cb, <a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, <a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> **p_evsub)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#gacc739c92c7014234bef0629f84ddfce6">pjsip_pres_terminate</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> notify)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga4b5f6c44f10775a2ea94b4f775e7ab57">pjsip_pres_initiate</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gac65eeb4771a6fc34225302fee5bcb7e2">pj_int32_t</a> expires, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga1cfd0b94c700a3a01a9c286ddd464a18">pjsip_pres_add_header</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, const <a class="el" href="structpjsip__hdr.htm">pjsip_hdr</a> *hdr_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga0937bfe6361a48a1cdef990a766ff07b">pjsip_pres_accept</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a> st_code, const <a class="el" href="structpjsip__hdr.htm">pjsip_hdr</a> *hdr_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga1a4bb9d809938f05c285d433632ce866">pjsip_pres_notify</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="group__PJSIP__EVENT__NOT.htm#ga4a6454679f18fe8337a2fc78063010bf">pjsip_evsub_state</a> state, const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *state_str, const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *reason, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga470f80433d0695fc0599801e43c3ff65">pjsip_pres_current_notify</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga2752ed1db44c0b605a1a89a02313d4c9">pjsip_pres_send_request</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> *tdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga8f4b9f63c2a5b8b350acb3105f2d18ed">pjsip_pres_get_status</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *status)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#gaecb0ff971376b31252f7c9d8638efbe9">pjsip_pres_set_status</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, const <a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *status)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#gaae915cb5208379b1e53ca38e8585addb">pjsip_pres_create_pidf</a> (<a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, const <a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *status, const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *entity, <a class="el" href="structpjsip__msg__body.htm">pjsip_msg_body</a> **p_body)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga4aef732c66433c50ddfc67d838ae4348">pjsip_pres_create_xpidf</a> (<a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, const <a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *status, const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *entity, <a class="el" href="structpjsip__msg__body.htm">pjsip_msg_body</a> **p_body)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga45f3da0a6c7477ef043f2c2b9bd39f4a">pjsip_pres_parse_pidf</a> (<a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, <a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *status)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga84308fc8508e4693f13d7169799ae85a">pjsip_pres_parse_pidf2</a> (char *body, unsigned body_len, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, <a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *status)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga344d09ba56e6875879c8645338f7020d">pjsip_pres_parse_xpidf</a> (<a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, <a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *status)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga96b80e36626fafde46526ab4cb4d4215">pjsip_pres_parse_xpidf2</a> (char *body, unsigned body_len, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, <a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *status)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This module contains the implementation of SIP Presence Extension as described in RFC 3856. It uses the SIP Event Notification framework (<a class="el" href="evsub_8h.htm" title="SIP Specific Event Notification Extension (RFC 3265).">evsub.h</a>) and extends the framework by implementing "presence" event package. </p>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="gab3bd692d59f7be044647fc863d85208c"></a><!-- doxytag: member="presence.h::PJSIP_PRES_STATUS_MAX_INFO" ref="gab3bd692d59f7be044647fc863d85208c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJSIP_PRES_STATUS_MAX_INFO&nbsp;&nbsp;&nbsp;8</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Maximum presence status info. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga7e588bd39d4a500e9c4ea6743a78e8fc"></a><!-- doxytag: member="presence.h::pjsip_pres_init_module" ref="ga7e588bd39d4a500e9c4ea6743a78e8fc" args="(pjsip_endpoint *endpt, pjsip_module *mod_evsub)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_init_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sip__types_8h.htm#a2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>endpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__module.htm">pjsip_module</a> *&nbsp;</td>
          <td class="paramname"> <em>mod_evsub</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize the presence module and register it as endpoint module and package to the event subscription module.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>endpt</em>&nbsp;</td><td>The endpoint instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mod_evsub</em>&nbsp;</td><td>The event subscription module instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS if the module is successfully initialized and registered to both endpoint and the event subscription module. </dd></dl>

</div>
</div>
<a class="anchor" id="ga4b1ad56afc8795e238428debf6f0236f"></a><!-- doxytag: member="presence.h::pjsip_pres_instance" ref="ga4b1ad56afc8795e238428debf6f0236f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpjsip__module.htm">pjsip_module</a>* pjsip_pres_instance </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the presence module instance.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The presence module instance. </dd></dl>

</div>
</div>
<a class="anchor" id="ga6a5f82648a32d214b9cb60c4b0488157"></a><!-- doxytag: member="presence.h::pjsip_pres_create_uac" ref="ga6a5f82648a32d214b9cb60c4b0488157" args="(pjsip_dialog *dlg, const pjsip_evsub_user *user_cb, unsigned options, pjsip_evsub **p_evsub)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_create_uac </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *&nbsp;</td>
          <td class="paramname"> <em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *&nbsp;</td>
          <td class="paramname"> <em>user_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> **&nbsp;</td>
          <td class="paramname"> <em>p_evsub</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create presence client subscription session.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dlg</em>&nbsp;</td><td>The underlying dialog to use. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_cb</em>&nbsp;</td><td>Pointer to callbacks to receive presence subscription events. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>Option flags. Currently only PJSIP_EVSUB_NO_EVENT_ID is recognized. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_evsub</em>&nbsp;</td><td>Pointer to receive the presence subscription session.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga61dffe7e42b59dd65307959836e2d92e"></a><!-- doxytag: member="presence.h::pjsip_pres_create_uas" ref="ga61dffe7e42b59dd65307959836e2d92e" args="(pjsip_dialog *dlg, const pjsip_evsub_user *user_cb, pjsip_rx_data *rdata, pjsip_evsub **p_evsub)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_create_uas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *&nbsp;</td>
          <td class="paramname"> <em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *&nbsp;</td>
          <td class="paramname"> <em>user_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&nbsp;</td>
          <td class="paramname"> <em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> **&nbsp;</td>
          <td class="paramname"> <em>p_evsub</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create presence server subscription session.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dlg</em>&nbsp;</td><td>The underlying dialog to use. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_cb</em>&nbsp;</td><td>Pointer to callbacks to receive presence subscription events. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rdata</em>&nbsp;</td><td>The incoming SUBSCRIBE request that creates the event subscription. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_evsub</em>&nbsp;</td><td>Pointer to receive the presence subscription session.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="gacc739c92c7014234bef0629f84ddfce6"></a><!-- doxytag: member="presence.h::pjsip_pres_terminate" ref="gacc739c92c7014234bef0629f84ddfce6" args="(pjsip_evsub *sub, pj_bool_t notify)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_terminate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a>&nbsp;</td>
          <td class="paramname"> <em>notify</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Forcefully destroy the presence subscription. This function should only be called on special condition, such as when the subscription initialization has failed. For other conditions, application MUST terminate the subscription by sending the appropriate un(SUBSCRIBE) or NOTIFY.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>The presence subscription. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>notify</em>&nbsp;</td><td>Specify whether the state notification callback should be called.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS if subscription session has been destroyed. </dd></dl>

</div>
</div>
<a class="anchor" id="ga4b5f6c44f10775a2ea94b4f775e7ab57"></a><!-- doxytag: member="presence.h::pjsip_pres_initiate" ref="ga4b5f6c44f10775a2ea94b4f775e7ab57" args="(pjsip_evsub *sub, pj_int32_t expires, pjsip_tx_data **p_tdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_initiate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gac65eeb4771a6fc34225302fee5bcb7e2">pj_int32_t</a>&nbsp;</td>
          <td class="paramname"> <em>expires</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&nbsp;</td>
          <td class="paramname"> <em>p_tdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Call this function to create request to initiate presence subscription, to refresh subcription, or to request subscription termination.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>Client subscription instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>expires</em>&nbsp;</td><td>Subscription expiration. If the value is set to zero, this will request unsubscription. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_tdata</em>&nbsp;</td><td>Pointer to receive the request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1cfd0b94c700a3a01a9c286ddd464a18"></a><!-- doxytag: member="presence.h::pjsip_pres_add_header" ref="ga1cfd0b94c700a3a01a9c286ddd464a18" args="(pjsip_evsub *sub, const pjsip_hdr *hdr_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_add_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__hdr.htm">pjsip_hdr</a> *&nbsp;</td>
          <td class="paramname"> <em>hdr_list</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Add a list of headers to the subscription instance. The list of headers will be added to outgoing presence subscription requests.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>Subscription instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdr_list</em>&nbsp;</td><td>List of headers to be added.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga0937bfe6361a48a1cdef990a766ff07b"></a><!-- doxytag: member="presence.h::pjsip_pres_accept" ref="ga0937bfe6361a48a1cdef990a766ff07b" args="(pjsip_evsub *sub, pjsip_rx_data *rdata, int st_code, const pjsip_hdr *hdr_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_accept </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&nbsp;</td>
          <td class="paramname"> <em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a>&nbsp;</td>
          <td class="paramname"> <em>st_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__hdr.htm">pjsip_hdr</a> *&nbsp;</td>
          <td class="paramname"> <em>hdr_list</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Accept the incoming subscription request by sending 2xx response to incoming SUBSCRIBE request.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>Server subscription instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rdata</em>&nbsp;</td><td>The incoming subscription request message. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>st_code</em>&nbsp;</td><td>Status code, which MUST be final response. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdr_list</em>&nbsp;</td><td>Optional list of headers to be added in the response.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga1a4bb9d809938f05c285d433632ce866"></a><!-- doxytag: member="presence.h::pjsip_pres_notify" ref="ga1a4bb9d809938f05c285d433632ce866" args="(pjsip_evsub *sub, pjsip_evsub_state state, const pj_str_t *state_str, const pj_str_t *reason, pjsip_tx_data **p_tdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#ga4a6454679f18fe8337a2fc78063010bf">pjsip_evsub_state</a>&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&nbsp;</td>
          <td class="paramname"> <em>state_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&nbsp;</td>
          <td class="paramname"> <em>reason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&nbsp;</td>
          <td class="paramname"> <em>p_tdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>For notifier, create NOTIFY request to subscriber, and set the state of the subscription. Application MUST set the presence status to the appropriate state (by calling <a class="el" href="group__PJSIP__SIMPLE__PRES.htm#gaecb0ff971376b31252f7c9d8638efbe9">pjsip_pres_set_status()</a>) before calling this function.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>The server subscription (notifier) instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>New state to set. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>state_str</em>&nbsp;</td><td>The state string name, if state contains value other than active, pending, or terminated. Otherwise this argument is ignored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reason</em>&nbsp;</td><td>Specify reason if new state is terminated, otherwise put NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_tdata</em>&nbsp;</td><td>Pointer to receive the request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga470f80433d0695fc0599801e43c3ff65"></a><!-- doxytag: member="presence.h::pjsip_pres_current_notify" ref="ga470f80433d0695fc0599801e43c3ff65" args="(pjsip_evsub *sub, pjsip_tx_data **p_tdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_current_notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&nbsp;</td>
          <td class="paramname"> <em>p_tdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create NOTIFY request to reflect current subscription status.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>Server subscription object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_tdata</em>&nbsp;</td><td>Pointer to receive request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga2752ed1db44c0b605a1a89a02313d4c9"></a><!-- doxytag: member="presence.h::pjsip_pres_send_request" ref="ga2752ed1db44c0b605a1a89a02313d4c9" args="(pjsip_evsub *sub, pjsip_tx_data *tdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_send_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> *&nbsp;</td>
          <td class="paramname"> <em>tdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Send request message that was previously created with initiate(), notify(), or current_notify(). Application may also send request created with other functions, e.g. authentication. But the request MUST be either request that creates/refresh subscription or NOTIFY request.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>The subscription object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tdata</em>&nbsp;</td><td>Request message to be sent.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga8f4b9f63c2a5b8b350acb3105f2d18ed"></a><!-- doxytag: member="presence.h::pjsip_pres_get_status" ref="ga8f4b9f63c2a5b8b350acb3105f2d18ed" args="(pjsip_evsub *sub, pjsip_pres_status *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_get_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the presence status. Client normally would call this function after receiving NOTIFY request from server.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>The client or server subscription. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>The structure to receive presence status.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="gaecb0ff971376b31252f7c9d8638efbe9"></a><!-- doxytag: member="presence.h::pjsip_pres_set_status" ref="gaecb0ff971376b31252f7c9d8638efbe9" args="(pjsip_evsub *sub, const pjsip_pres_status *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_set_status </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Set the presence status. This operation is only valid for server subscription. After calling this function, application would need to send NOTIFY request to client.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>The server subscription. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>Status to be set.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="gaae915cb5208379b1e53ca38e8585addb"></a><!-- doxytag: member="presence.h::pjsip_pres_create_pidf" ref="gaae915cb5208379b1e53ca38e8585addb" args="(pj_pool_t *pool, const pjsip_pres_status *status, const pj_str_t *entity, pjsip_msg_body **p_body)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_create_pidf </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *&nbsp;</td>
          <td class="paramname"> <em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&nbsp;</td>
          <td class="paramname"> <em>entity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__msg__body.htm">pjsip_msg_body</a> **&nbsp;</td>
          <td class="paramname"> <em>p_body</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is a utility function to create PIDF message body from PJSIP presence status (<a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a>).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>The pool to allocate memory for the message body. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>Presence status to be converted into PIDF message body. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>entity</em>&nbsp;</td><td>The entity ID, which normally is equal to the presentity ID publishing this presence info. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_body</em>&nbsp;</td><td>Pointer to receive the SIP message body.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga4aef732c66433c50ddfc67d838ae4348"></a><!-- doxytag: member="presence.h::pjsip_pres_create_xpidf" ref="ga4aef732c66433c50ddfc67d838ae4348" args="(pj_pool_t *pool, const pjsip_pres_status *status, const pj_str_t *entity, pjsip_msg_body **p_body)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_create_xpidf </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *&nbsp;</td>
          <td class="paramname"> <em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&nbsp;</td>
          <td class="paramname"> <em>entity</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__msg__body.htm">pjsip_msg_body</a> **&nbsp;</td>
          <td class="paramname"> <em>p_body</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is a utility function to create X-PIDF message body from PJSIP presence status (<a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a>).</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>The pool to allocate memory for the message body. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>Presence status to be converted into X-PIDF message body. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>entity</em>&nbsp;</td><td>The entity ID, which normally is equal to the presentity ID publishing this presence info. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_body</em>&nbsp;</td><td>Pointer to receive the SIP message body.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga45f3da0a6c7477ef043f2c2b9bd39f4a"></a><!-- doxytag: member="presence.h::pjsip_pres_parse_pidf" ref="ga45f3da0a6c7477ef043f2c2b9bd39f4a" args="(pjsip_rx_data *rdata, pj_pool_t *pool, pjsip_pres_status *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_parse_pidf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&nbsp;</td>
          <td class="paramname"> <em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is a utility function to parse PIDF body into PJSIP presence status.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rdata</em>&nbsp;</td><td>The incoming SIP message containing the PIDF body. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>Pool to allocate memory to copy the strings into the presence status structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>The presence status to be initialized.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga84308fc8508e4693f13d7169799ae85a">pjsip_pres_parse_pidf2()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga84308fc8508e4693f13d7169799ae85a"></a><!-- doxytag: member="presence.h::pjsip_pres_parse_pidf2" ref="ga84308fc8508e4693f13d7169799ae85a" args="(char *body, unsigned body_len, pj_pool_t *pool, pjsip_pres_status *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_parse_pidf2 </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>body_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is a utility function to parse PIDF body into PJSIP presence status.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>body</em>&nbsp;</td><td>Text body, with one extra space at the end to place NULL character temporarily during parsing. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>body_len</em>&nbsp;</td><td>Length of the body, not including the NULL termination character. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>Pool to allocate memory to copy the strings into the presence status structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>The presence status to be initialized.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga45f3da0a6c7477ef043f2c2b9bd39f4a">pjsip_pres_parse_pidf()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga344d09ba56e6875879c8645338f7020d"></a><!-- doxytag: member="presence.h::pjsip_pres_parse_xpidf" ref="ga344d09ba56e6875879c8645338f7020d" args="(pjsip_rx_data *rdata, pj_pool_t *pool, pjsip_pres_status *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_parse_xpidf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&nbsp;</td>
          <td class="paramname"> <em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is a utility function to parse X-PIDF body into PJSIP presence status.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>rdata</em>&nbsp;</td><td>The incoming SIP message containing the X-PIDF body. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>Pool to allocate memory to copy the strings into the presence status structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>The presence status to be initialized.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga96b80e36626fafde46526ab4cb4d4215">pjsip_pres_parse_xpidf2()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ga96b80e36626fafde46526ab4cb4d4215"></a><!-- doxytag: member="presence.h::pjsip_pres_parse_xpidf2" ref="ga96b80e36626fafde46526ab4cb4d4215" args="(char *body, unsigned body_len, pj_pool_t *pool, pjsip_pres_status *status)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_pres_parse_xpidf2 </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>body_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__pres__status.htm">pjsip_pres_status</a> *&nbsp;</td>
          <td class="paramname"> <em>status</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>This is a utility function to parse X-PIDF body into PJSIP presence status.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>body</em>&nbsp;</td><td>Text body, with one extra space at the end to place NULL character temporarily during parsing. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>body_len</em>&nbsp;</td><td>Length of the body, not including the NULL termination character. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>Pool to allocate memory to copy the strings into the presence status structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>The presence status to be initialized.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group__PJSIP__SIMPLE__PRES.htm#ga344d09ba56e6875879c8645338f7020d">pjsip_pres_parse_xpidf()</a> </dd></dl>

</div>
</div>
</div>
<p>&nbsp;</p>
<hr><center>
PJSIP Open Source, high performance, small footprint, and very very portable SIP stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->

</BODY>
</HTML>
