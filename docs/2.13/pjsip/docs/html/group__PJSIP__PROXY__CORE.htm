<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Core Proxy Layer (2.13)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJSIP Reference</p>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Core Proxy Layer</div></div>
</div><!--header-->
<div class="contents">

<p>Core proxy operations.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7e524d733e91519c6e797a7a1951dd60"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__PROXY__CORE.htm#ga7e524d733e91519c6e797a7a1951dd60">pjsip_endpt_create_request_fwd</a> (<a class="el" href="group__PJSIP__TYPES.htm#ga2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *endpt, <a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, const <a class="el" href="structpjsip__uri.htm">pjsip_uri</a> *uri, const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *branch, unsigned options, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **tdata)</td></tr>
<tr class="separator:ga7e524d733e91519c6e797a7a1951dd60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga46302c3cc1fed442d555855d1b7fd6e7"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__PROXY__CORE.htm#ga46302c3cc1fed442d555855d1b7fd6e7">pjsip_endpt_create_response_fwd</a> (<a class="el" href="group__PJSIP__TYPES.htm#ga2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *endpt, <a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, unsigned options, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **tdata)</td></tr>
<tr class="separator:ga46302c3cc1fed442d555855d1b7fd6e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca4e1f5ebdc6877d01702213c1bd04b3"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__PROXY__CORE.htm#gaca4e1f5ebdc6877d01702213c1bd04b3">pjsip_calculate_branch_id</a> (<a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata)</td></tr>
<tr class="separator:gaca4e1f5ebdc6877d01702213c1bd04b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga7e524d733e91519c6e797a7a1951dd60" name="ga7e524d733e91519c6e797a7a1951dd60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7e524d733e91519c6e797a7a1951dd60">&#9670;&nbsp;</a></span>pjsip_endpt_create_request_fwd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_endpt_create_request_fwd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__TYPES.htm#ga2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__uri.htm">pjsip_uri</a> *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&#160;</td>
          <td class="paramname"><em>branch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&#160;</td>
          <td class="paramname"><em>tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create new request message to be forwarded upstream to new destination URI in uri. The new request is a full/deep clone of the request received in rdata, unless if other copy mechanism is specified in the options. The branch parameter, if not NULL, will be used as the branch-param in the Via header. If it is NULL, then a unique branch parameter will be used.</p>
<p >Note: this function DOES NOT perform Route information preprocessing as described in RFC 3261 Section 16.4. Application must take care of removing/updating the Route headers according of the rules as described in that section.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpt</td><td>The endpoint instance. </td></tr>
    <tr><td class="paramname">rdata</td><td>The incoming request message. </td></tr>
    <tr><td class="paramname">uri</td><td>The URI where the request will be forwarded to. </td></tr>
    <tr><td class="paramname">branch</td><td>Optional branch parameter. Application may specify its own branch, for example if it wishes to perform loop detection. If the branch parameter is not specified, this function will generate its own by calling <a class="el" href="group__PJSIP__PROXY__CORE.htm#gaca4e1f5ebdc6877d01702213c1bd04b3">pjsip_calculate_branch_id()</a> function. </td></tr>
    <tr><td class="paramname">options</td><td>Optional option flags when duplicating the message. </td></tr>
    <tr><td class="paramname">tdata</td><td>The result.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga46302c3cc1fed442d555855d1b7fd6e7" name="ga46302c3cc1fed442d555855d1b7fd6e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga46302c3cc1fed442d555855d1b7fd6e7">&#9670;&nbsp;</a></span>pjsip_endpt_create_response_fwd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_endpt_create_response_fwd </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__TYPES.htm#ga2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&#160;</td>
          <td class="paramname"><em>tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create new response message to be forwarded downstream by the proxy from the response message found in rdata. Note that this function practically will clone the response as is, i.e. without checking the validity of the response or removing top most Via header. This function will perform full/deep clone of the response, unless other copy mechanism is used in the options.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpt</td><td>The endpoint instance. </td></tr>
    <tr><td class="paramname">rdata</td><td>The incoming response message. </td></tr>
    <tr><td class="paramname">options</td><td>Optional option flags when duplicate the message. </td></tr>
    <tr><td class="paramname">tdata</td><td>The result</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="gaca4e1f5ebdc6877d01702213c1bd04b3" name="gaca4e1f5ebdc6877d01702213c1bd04b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaca4e1f5ebdc6877d01702213c1bd04b3">&#9670;&nbsp;</a></span>pjsip_calculate_branch_id()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> pjsip_calculate_branch_id </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&#160;</td>
          <td class="paramname"><em>rdata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create a globally unique branch parameter based on the information in the incoming request message, for the purpose of creating a new request for forwarding. This is the default implementation used by <a class="el" href="group__PJSIP__PROXY__CORE.htm#ga7e524d733e91519c6e797a7a1951dd60">pjsip_endpt_create_request_fwd()</a> function if the branch parameter is not specified.</p>
<p >The default implementation here will just create an MD5 hash of the top-most Via.</p>
<p >Note that the returned string was allocated from rdata's pool.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rdata</td><td>The incoming request message.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Unique branch-ID string. </dd></dl>

<p class="reference">References <a class="elRef" href="../../../pjlib/docs/html/group__pj__config.htm#gac961f7d199eeed7666ab3ec2442c1b00">PJ_END_DECL</a>.</p>

</div>
</div>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJSIP Open Source, high performance, small footprint, and very very portable SIP stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
