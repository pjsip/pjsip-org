<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>BCG729 Codec (2.12)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJMEDIA Reference</p>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">BCG729 Codec<div class="ingroups"><a class="el" href="group__PJMEDIA__CODEC.htm">Codec Framework</a> &raquo; <a class="el" href="group__PJMEDIA__CODEC__CODECS.htm">Supported codecs</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Implementation of BCG729 codecs.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga8a66ffc282b71459a55ac3ded2aeca5f"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__config.htm#ga288f0f20eddba864219d6d9b3cd006e1">PJ_BEGIN_DECL</a> <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__BCG729.htm#ga8a66ffc282b71459a55ac3ded2aeca5f">pjmedia_codec_bcg729_init</a> (<a class="el" href="group__PJMEDIA__TYPES.htm#ga7c3623d8e90e22b7184a6e42dc24f6f5">pjmedia_endpt</a> *endpt)</td></tr>
<tr class="separator:ga8a66ffc282b71459a55ac3ded2aeca5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30df69dabb26c966d59efd49e5c1b558"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__BCG729.htm#ga30df69dabb26c966d59efd49e5c1b558">pjmedia_codec_bcg729_deinit</a> (void)</td></tr>
<tr class="separator:ga30df69dabb26c966d59efd49e5c1b558"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This section describes functions to initialize and register BCG729 codec factory to the codec manager. After the codec factory has been registered, application can use <a class="el" href="group__PJMEDIA__CODEC.htm">Codec Framework</a> API to manipulate the codec.</p>
<p>This codec factory contains G.729 codec.</p>
<h1><a class="anchor" id="pjmedia_codec_bcg729"></a>
BCG729</h1>
<p>BCG729 is compliant with ITU-T G.729 and Annexes A, B specifications.</p>
<p>BCGG729 supports 16-bit PCM audio signal with sampling rate 8000Hz, frame length 10ms, and resulting in bitrate 8000bps.</p>
<h2><a class="anchor" id="codec_setting"></a>
Codec Settings</h2>
<p>General codec settings for this codec such as VAD and PLC can be manipulated through the <code>setting</code> field in <a class="el" href="structpjmedia__codec__param.htm">pjmedia_codec_param</a>. Please see the documentation of <a class="el" href="structpjmedia__codec__param.htm">pjmedia_codec_param</a> for more info.</p>
<p>Note that G.729 VAD status should be signalled in SDP, see more description below.</p>
<h3><a class="anchor" id="annexb"></a>
Annex B</h3>
<p>The capability of VAD/DTX is specified in Annex B.</p>
<p>By default, Annex B is enabled. This default setting of Annex B can be modified using <a class="el" href="group__PJMEDIA__CODEC.htm#gacbd83a91545d9f969370cd5e7918c75d">pjmedia_codec_mgr_set_default_param()</a>.</p>
<p>In <a class="el" href="structpjmedia__codec__param.htm">pjmedia_codec_param</a>, Annex B is configured via VAD setting and format parameter "annexb" in the SDP "a=fmtp" attribute in decoding fmtp field. Valid values are "yes" and "no", the implementation default is "yes". When this parameter is omitted in the SDP, the value will be "yes" (RFC 4856 Section 2.1.9).</p>
<p>Here is an example of modifying default setting of Annex B to be disabled using <a class="el" href="group__PJMEDIA__CODEC.htm#gacbd83a91545d9f969370cd5e7918c75d">pjmedia_codec_mgr_set_default_param()</a>: </p><div class="fragment"><div class="line"><a class="code" href="structpjmedia__codec__param.htm">pjmedia_codec_param</a> param;</div><div class="line"></div><div class="line"><a class="code" href="group__PJMEDIA__CODEC.htm#ga7766eaa06db1ec402540cefe1b329af1">pjmedia_codec_mgr_get_default_param</a>(.., &amp;param);</div><div class="line">...</div><div class="line"><span class="comment">// Set VAD</span></div><div class="line">param.setting.vad = 0;</div><div class="line"><span class="comment">// Set SDP format parameter</span></div><div class="line">param.<a class="code" href="structpjmedia__codec__param.htm#a33372b5bb303019cfc1c964bb1d9f3ce">setting</a>.<a class="code" href="structpjmedia__codec__param.htm#a2d891e3d98021f471cfaa05c647d8c3f">dec_fmtp</a>.<a class="code" href="structpjmedia__codec__fmtp.htm#a127c3ffcbfe5b927edf2c4f9ff18c882">cnt</a> = 1;</div><div class="line">param.<a class="code" href="structpjmedia__codec__param.htm#a33372b5bb303019cfc1c964bb1d9f3ce">setting</a>.<a class="code" href="structpjmedia__codec__param.htm#a2d891e3d98021f471cfaa05c647d8c3f">dec_fmtp</a>.<a class="code" href="structpjmedia__codec__fmtp.htm#a83796d7c2443947e325ac4351a27f0d6">param</a>[0].<a class="code" href="structpjmedia__codec__fmtp_1_1param.htm#af7323aa6141b024071e64b00ef294af1">name</a> = <a class="codeRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__PSTR.htm#ga20fa0c4d9ccddd0822a775730cf4a867">pj_str</a>(<span class="stringliteral">&quot;annexb&quot;</span>);</div><div class="line">param.<a class="code" href="structpjmedia__codec__param.htm#a33372b5bb303019cfc1c964bb1d9f3ce">setting</a>.<a class="code" href="structpjmedia__codec__param.htm#a2d891e3d98021f471cfaa05c647d8c3f">dec_fmtp</a>.<a class="code" href="structpjmedia__codec__fmtp.htm#a83796d7c2443947e325ac4351a27f0d6">param</a>[0].<a class="code" href="structpjmedia__codec__fmtp_1_1param.htm#a5e283ff0035328a2b3b749fe420b544f">val</a>  = <a class="codeRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__PSTR.htm#ga20fa0c4d9ccddd0822a775730cf4a867">pj_str</a>(<span class="stringliteral">&quot;no&quot;</span>);</div><div class="line">...</div><div class="line">pjmedia_codec_mgr_set_default_param(.., &amp;param);</div></div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The difference of Annex B status in SDP offer/answer may be considered as incompatible codec in SDP negotiation. </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga8a66ffc282b71459a55ac3ded2aeca5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8a66ffc282b71459a55ac3ded2aeca5f">&#9670;&nbsp;</a></span>pjmedia_codec_bcg729_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__config.htm#ga288f0f20eddba864219d6d9b3cd006e1">PJ_BEGIN_DECL</a> <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_codec_bcg729_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__TYPES.htm#ga7c3623d8e90e22b7184a6e42dc24f6f5">pjmedia_endpt</a> *&#160;</td>
          <td class="paramname"><em>endpt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize and register BCG729 codec factory to pjmedia endpoint.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpt</td><td>The pjmedia endpoint.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga30df69dabb26c966d59efd49e5c1b558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga30df69dabb26c966d59efd49e5c1b558">&#9670;&nbsp;</a></span>pjmedia_codec_bcg729_deinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_codec_bcg729_deinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unregister BCG729 codec factory from pjmedia endpoint and deinitialize the BCG729 codec library.</p>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJMEDIA small footprint Open Source media stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
