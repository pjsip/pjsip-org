<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PJSIP Reference: SIP Message Summary and Message Waiting Indication (RFC 3842) (1.16)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJSIP Reference</p>

<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.htm"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.htm"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.htm"><span>Modules</span></a></li>
      <li><a href="annotated.htm"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.htm"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>SIP Message Summary and Message Waiting Indication (RFC 3842)<br/>
<small>
[<a class="el" href="group__PJSIP__SIMPLE.htm">Event and Presence Framework</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Support for SIP MWI Extension (RFC 3842).  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#gaa641204447cd5fb8bda33a11db089a32">pjsip_mwi_init_module</a> (<a class="el" href="sip__types_8h.htm#a2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *endpt, <a class="el" href="structpjsip__module.htm">pjsip_module</a> *mod_evsub)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="structpjsip__module.htm">pjsip_module</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#gae95f00dcf843cafc465e163d63c6e204">pjsip_mwi_instance</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga9eb4c5d8cfb8eb9808f426112e16b162">pjsip_mwi_create_uac</a> (<a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *dlg, const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *user_cb, unsigned <a class="elRef" doxygen="pjmedia.tag:../../../pjmedia/docs/html/" href="../../../pjmedia/docs/html/structapp__t_1_1options.htm">options</a>, <a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> **p_evsub)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga7ad8bfe409e2a74e1f73c59c69a5289a">pjsip_mwi_create_uas</a> (<a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *dlg, const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *user_cb, <a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, <a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> **p_evsub)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga9ac47fbe558e2b4424d1e0c334ca30ff">pjsip_mwi_terminate</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> notify)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga9c18898cb2091c10b1a13c8a387eae18">pjsip_mwi_initiate</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gac65eeb4771a6fc34225302fee5bcb7e2">pj_int32_t</a> expires, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga5fadf8430ebbbde346aba5b2e4472157">pjsip_mwi_accept</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a> st_code, const <a class="el" href="structpjsip__hdr.htm">pjsip_hdr</a> *hdr_list)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga2ddfb9c5f61a5260c9c624223788d364">pjsip_mwi_notify</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="group__PJSIP__EVENT__NOT.htm#ga4a6454679f18fe8337a2fc78063010bf">pjsip_evsub_state</a> state, const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *state_str, const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *reason, const <a class="el" href="structpjsip__media__type.htm">pjsip_media_type</a> *mime_type, const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *body, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#ga5f1753b490bb5508d144ec903249f24e">pjsip_mwi_current_notify</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mwi.htm#gafbd97ff78ae1d5f8f574e8d85082ca6d">pjsip_mwi_send_request</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> *tdata)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>This module implements RFC 3842: A Message Summary and Message Waiting Indication Event Package for the Session Initiation Protocol (SIP). It uses the SIP Event Notification framework (<a class="el" href="evsub_8h.htm" title="SIP Specific Event Notification Extension (RFC 3265).">evsub.h</a>) and extends the framework by implementing "message-summary" event package. </p>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaa641204447cd5fb8bda33a11db089a32"></a><!-- doxytag: member="mwi.h::pjsip_mwi_init_module" ref="gaa641204447cd5fb8bda33a11db089a32" args="(pjsip_endpoint *endpt, pjsip_module *mod_evsub)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_init_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sip__types_8h.htm#a2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *&nbsp;</td>
          <td class="paramname"> <em>endpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__module.htm">pjsip_module</a> *&nbsp;</td>
          <td class="paramname"> <em>mod_evsub</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialize the MWI module and register it as endpoint module and package to the event subscription module.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>endpt</em>&nbsp;</td><td>The endpoint instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mod_evsub</em>&nbsp;</td><td>The event subscription module instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS if the module is successfully initialized and registered to both endpoint and the event subscription module. </dd></dl>

</div>
</div>
<a class="anchor" id="gae95f00dcf843cafc465e163d63c6e204"></a><!-- doxytag: member="mwi.h::pjsip_mwi_instance" ref="gae95f00dcf843cafc465e163d63c6e204" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpjsip__module.htm">pjsip_module</a>* pjsip_mwi_instance </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Get the MWI module instance.</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>The MWI module instance. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9eb4c5d8cfb8eb9808f426112e16b162"></a><!-- doxytag: member="mwi.h::pjsip_mwi_create_uac" ref="ga9eb4c5d8cfb8eb9808f426112e16b162" args="(pjsip_dialog *dlg, const pjsip_evsub_user *user_cb, unsigned options, pjsip_evsub **p_evsub)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_create_uac </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *&nbsp;</td>
          <td class="paramname"> <em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *&nbsp;</td>
          <td class="paramname"> <em>user_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> **&nbsp;</td>
          <td class="paramname"> <em>p_evsub</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create MWI client subscription session.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dlg</em>&nbsp;</td><td>The underlying dialog to use. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_cb</em>&nbsp;</td><td>Pointer to callbacks to receive MWI subscription events. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>Option flags. Currently only PJSIP_EVSUB_NO_EVENT_ID is recognized. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_evsub</em>&nbsp;</td><td>Pointer to receive the MWI subscription session.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga7ad8bfe409e2a74e1f73c59c69a5289a"></a><!-- doxytag: member="mwi.h::pjsip_mwi_create_uas" ref="ga7ad8bfe409e2a74e1f73c59c69a5289a" args="(pjsip_dialog *dlg, const pjsip_evsub_user *user_cb, pjsip_rx_data *rdata, pjsip_evsub **p_evsub)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_create_uas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *&nbsp;</td>
          <td class="paramname"> <em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *&nbsp;</td>
          <td class="paramname"> <em>user_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&nbsp;</td>
          <td class="paramname"> <em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> **&nbsp;</td>
          <td class="paramname"> <em>p_evsub</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create MWI server subscription session.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>dlg</em>&nbsp;</td><td>The underlying dialog to use. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_cb</em>&nbsp;</td><td>Pointer to callbacks to receive MWI subscription events. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rdata</em>&nbsp;</td><td>The incoming SUBSCRIBE request that creates the event subscription. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_evsub</em>&nbsp;</td><td>Pointer to receive the MWI subscription session.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9ac47fbe558e2b4424d1e0c334ca30ff"></a><!-- doxytag: member="mwi.h::pjsip_mwi_terminate" ref="ga9ac47fbe558e2b4424d1e0c334ca30ff" args="(pjsip_evsub *sub, pj_bool_t notify)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_terminate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a>&nbsp;</td>
          <td class="paramname"> <em>notify</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Forcefully destroy the MWI subscription. This function should only be called on special condition, such as when the subscription initialization has failed. For other conditions, application MUST terminate the subscription by sending the appropriate un(SUBSCRIBE) or NOTIFY.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>The MWI subscription. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>notify</em>&nbsp;</td><td>Specify whether the state notification callback should be called.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS if subscription session has been destroyed. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9c18898cb2091c10b1a13c8a387eae18"></a><!-- doxytag: member="mwi.h::pjsip_mwi_initiate" ref="ga9c18898cb2091c10b1a13c8a387eae18" args="(pjsip_evsub *sub, pj_int32_t expires, pjsip_tx_data **p_tdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_initiate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gac65eeb4771a6fc34225302fee5bcb7e2">pj_int32_t</a>&nbsp;</td>
          <td class="paramname"> <em>expires</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&nbsp;</td>
          <td class="paramname"> <em>p_tdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Call this function to create request to initiate MWI subscription, to refresh subcription, or to request subscription termination.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>Client subscription instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>expires</em>&nbsp;</td><td>Subscription expiration. If the value is set to zero, this will request unsubscription. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_tdata</em>&nbsp;</td><td>Pointer to receive the request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5fadf8430ebbbde346aba5b2e4472157"></a><!-- doxytag: member="mwi.h::pjsip_mwi_accept" ref="ga5fadf8430ebbbde346aba5b2e4472157" args="(pjsip_evsub *sub, pjsip_rx_data *rdata, int st_code, const pjsip_hdr *hdr_list)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_accept </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&nbsp;</td>
          <td class="paramname"> <em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a>&nbsp;</td>
          <td class="paramname"> <em>st_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__hdr.htm">pjsip_hdr</a> *&nbsp;</td>
          <td class="paramname"> <em>hdr_list</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Accept the incoming subscription request by sending 2xx response to incoming SUBSCRIBE request.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>Server subscription instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rdata</em>&nbsp;</td><td>The incoming subscription request message. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>st_code</em>&nbsp;</td><td>Status code, which MUST be final response. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>hdr_list</em>&nbsp;</td><td>Optional list of headers to be added in the response.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga2ddfb9c5f61a5260c9c624223788d364"></a><!-- doxytag: member="mwi.h::pjsip_mwi_notify" ref="ga2ddfb9c5f61a5260c9c624223788d364" args="(pjsip_evsub *sub, pjsip_evsub_state state, const pj_str_t *state_str, const pj_str_t *reason, const pjsip_media_type *mime_type, const pj_str_t *body, pjsip_tx_data **p_tdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#ga4a6454679f18fe8337a2fc78063010bf">pjsip_evsub_state</a>&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&nbsp;</td>
          <td class="paramname"> <em>state_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&nbsp;</td>
          <td class="paramname"> <em>reason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__media__type.htm">pjsip_media_type</a> *&nbsp;</td>
          <td class="paramname"> <em>mime_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&nbsp;</td>
          <td class="paramname"> <em>body</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&nbsp;</td>
          <td class="paramname"> <em>p_tdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>For notifier, create NOTIFY request to subscriber, and set the state of the subscription.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>The server subscription (notifier) instance. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>New state to set. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>state_str</em>&nbsp;</td><td>The state string name, if state contains value other than active, pending, or terminated. Otherwise this argument is ignored. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reason</em>&nbsp;</td><td>Specify reason if new state is terminated, otherwise put NULL. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mime_type</em>&nbsp;</td><td>MIME type/content type of the message body. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>body</em>&nbsp;</td><td>Message body to be included in the NOTIFY request. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_tdata</em>&nbsp;</td><td>Pointer to receive the request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="ga5f1753b490bb5508d144ec903249f24e"></a><!-- doxytag: member="mwi.h::pjsip_mwi_current_notify" ref="ga5f1753b490bb5508d144ec903249f24e" args="(pjsip_evsub *sub, pjsip_tx_data **p_tdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_current_notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&nbsp;</td>
          <td class="paramname"> <em>p_tdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create NOTIFY request containing message body from the last NOITFY message created.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>Server subscription object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_tdata</em>&nbsp;</td><td>Pointer to receive request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a class="anchor" id="gafbd97ff78ae1d5f8f574e8d85082ca6d"></a><!-- doxytag: member="mwi.h::pjsip_mwi_send_request" ref="gafbd97ff78ae1d5f8f574e8d85082ca6d" args="(pjsip_evsub *sub, pjsip_tx_data *tdata)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_mwi_send_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gabef75338a5839ec42984bdf37b54a093">pjsip_evsub</a> *&nbsp;</td>
          <td class="paramname"> <em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> *&nbsp;</td>
          <td class="paramname"> <em>tdata</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Send request message that was previously created with initiate(), notify(), or current_notify(). Application may also send request created with other functions, e.g. authentication. But the request MUST be either request that creates/refresh subscription or NOTIFY request.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sub</em>&nbsp;</td><td>The subscription object. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>tdata</em>&nbsp;</td><td>Request message to be sent.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
</div>
<p>&nbsp;</p>
<hr><center>
PJSIP Open Source, high performance, small footprint, and very very portable SIP stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->

</BODY>
</HTML>
