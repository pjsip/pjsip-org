<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>h264_packetizer.h File Reference (2.13)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJMEDIA Reference</p>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d522931ffa1371640980b621734a4381.htm">Users</a></li><li class="navelem"><a class="el" href="dir_f10acb7f9e802ca2f02187fc109748fd.htm">ming</a></li><li class="navelem"><a class="el" href="dir_dd0bbfa1909181a7127b13621450150c.htm">teluu</a></li><li class="navelem"><a class="el" href="dir_6aea2bada83f98b9876600f5a2f504d9.htm">pjproject-mac</a></li><li class="navelem"><a class="el" href="dir_619130c7648d06490994d3bae666f77c.htm">pjmedia</a></li><li class="navelem"><a class="el" href="dir_31e62ff4d9c777f46aee42c18e6e0cd9.htm">include</a></li><li class="navelem"><a class="el" href="dir_95046922207baeab3fe616251868b16e.htm">pjmedia-codec</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">h264_packetizer.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Packetizes H.264 bitstream into RTP payload and vice versa.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpjmedia__h264__packetizer__cfg.htm">pjmedia_h264_packetizer_cfg</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a3e89e1a3600229824050cca28d9da9a0"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="h264__packetizer_8h.htm#a3e89e1a3600229824050cca28d9da9a0">pjmedia_h264_packetizer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h264__packetizer_8h.htm#a3e89e1a3600229824050cca28d9da9a0">pjmedia_h264_packetizer</a></td></tr>
<tr class="separator:a3e89e1a3600229824050cca28d9da9a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:af24e621ef94c6003c78c556d66a7c873"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h264__packetizer_8h.htm#af24e621ef94c6003c78c556d66a7c873">pjmedia_h264_packetizer_mode</a> { <br />
&#160;&#160;<a class="el" href="h264__packetizer_8h.htm#af24e621ef94c6003c78c556d66a7c873a578bcb1077296f6fec7eea6a9a5a4f68">PJMEDIA_H264_PACKETIZER_MODE_SINGLE_NAL</a>
, <br />
&#160;&#160;<a class="el" href="h264__packetizer_8h.htm#af24e621ef94c6003c78c556d66a7c873a9c0ec9006e0c653287332e560917047a">PJMEDIA_H264_PACKETIZER_MODE_NON_INTERLEAVED</a>
, <br />
&#160;&#160;<a class="el" href="h264__packetizer_8h.htm#af24e621ef94c6003c78c556d66a7c873ae8d20c4e12f8e227d44618816d9c9725">PJMEDIA_H264_PACKETIZER_MODE_INTERLEAVED</a>
<br />
 }</td></tr>
<tr class="separator:af24e621ef94c6003c78c556d66a7c873"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad1b6d7a9c8121dcc1db6fbe270bbc3ca"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h264__packetizer_8h.htm#ad1b6d7a9c8121dcc1db6fbe270bbc3ca">pjmedia_h264_packetizer_create</a> (<a class="elRef" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, const <a class="el" href="structpjmedia__h264__packetizer__cfg.htm">pjmedia_h264_packetizer_cfg</a> *cfg, <a class="el" href="h264__packetizer_8h.htm#a3e89e1a3600229824050cca28d9da9a0">pjmedia_h264_packetizer</a> **p_pktz)</td></tr>
<tr class="separator:ad1b6d7a9c8121dcc1db6fbe270bbc3ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00f68203d9a8bf1869f855733b470fa2"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h264__packetizer_8h.htm#a00f68203d9a8bf1869f855733b470fa2">pjmedia_h264_packetize</a> (<a class="el" href="h264__packetizer_8h.htm#a3e89e1a3600229824050cca28d9da9a0">pjmedia_h264_packetizer</a> *pktz, <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga03cd006c29b1d24580f5df4db912749e">pj_uint8_t</a> *bits, <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> bits_len, unsigned *bits_pos, const <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga03cd006c29b1d24580f5df4db912749e">pj_uint8_t</a> **payload, <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> *payload_len)</td></tr>
<tr class="separator:a00f68203d9a8bf1869f855733b470fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad48b418b11337fe6444f2dea1a8931ba"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="h264__packetizer_8h.htm#ad48b418b11337fe6444f2dea1a8931ba">pjmedia_h264_unpacketize</a> (<a class="el" href="h264__packetizer_8h.htm#a3e89e1a3600229824050cca28d9da9a0">pjmedia_h264_packetizer</a> *pktz, const <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga03cd006c29b1d24580f5df4db912749e">pj_uint8_t</a> *payload, <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> payload_len, <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga03cd006c29b1d24580f5df4db912749e">pj_uint8_t</a> *bits, <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> bits_len, unsigned *bits_pos)</td></tr>
<tr class="separator:ad48b418b11337fe6444f2dea1a8931ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a3e89e1a3600229824050cca28d9da9a0" name="a3e89e1a3600229824050cca28d9da9a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e89e1a3600229824050cca28d9da9a0">&#9670;&nbsp;</a></span>pjmedia_h264_packetizer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="h264__packetizer_8h.htm#a3e89e1a3600229824050cca28d9da9a0">pjmedia_h264_packetizer</a> <a class="el" href="h264__packetizer_8h.htm#a3e89e1a3600229824050cca28d9da9a0">pjmedia_h264_packetizer</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Opaque declaration for H.264 packetizer. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="af24e621ef94c6003c78c556d66a7c873" name="af24e621ef94c6003c78c556d66a7c873"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af24e621ef94c6003c78c556d66a7c873">&#9670;&nbsp;</a></span>pjmedia_h264_packetizer_mode</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="h264__packetizer_8h.htm#af24e621ef94c6003c78c556d66a7c873">pjmedia_h264_packetizer_mode</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Enumeration of H.264 packetization modes. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="af24e621ef94c6003c78c556d66a7c873a578bcb1077296f6fec7eea6a9a5a4f68" name="af24e621ef94c6003c78c556d66a7c873a578bcb1077296f6fec7eea6a9a5a4f68"></a>PJMEDIA_H264_PACKETIZER_MODE_SINGLE_NAL&#160;</td><td class="fielddoc"><p >Single NAL unit packetization mode will only generate payloads containing a complete single NAL unit packet. As H.264 NAL unit size can be very large, this mode is usually not applicable for network environments with MTU size limitation. </p>
</td></tr>
<tr><td class="fieldname"><a id="af24e621ef94c6003c78c556d66a7c873a9c0ec9006e0c653287332e560917047a" name="af24e621ef94c6003c78c556d66a7c873a9c0ec9006e0c653287332e560917047a"></a>PJMEDIA_H264_PACKETIZER_MODE_NON_INTERLEAVED&#160;</td><td class="fielddoc"><p >Non-interleaved packetization mode will generate payloads with the following possible formats:</p><ul>
<li>single NAL unit packets,</li>
<li>NAL units aggregation STAP-A packets,</li>
<li>fragmented NAL unit FU-A packets. </li>
</ul>
</td></tr>
<tr><td class="fieldname"><a id="af24e621ef94c6003c78c556d66a7c873ae8d20c4e12f8e227d44618816d9c9725" name="af24e621ef94c6003c78c556d66a7c873ae8d20c4e12f8e227d44618816d9c9725"></a>PJMEDIA_H264_PACKETIZER_MODE_INTERLEAVED&#160;</td><td class="fielddoc"><p >Interleaved packetization mode will generate payloads with the following possible formats:</p><ul>
<li>single NAL unit packets,</li>
<li>NAL units aggregation STAP-A &amp; STAP-B packets,</li>
<li>fragmented NAL unit FU-A &amp; FU-B packets. This packetization mode is currently unsupported. </li>
</ul>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad1b6d7a9c8121dcc1db6fbe270bbc3ca" name="ad1b6d7a9c8121dcc1db6fbe270bbc3ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1b6d7a9c8121dcc1db6fbe270bbc3ca">&#9670;&nbsp;</a></span>pjmedia_h264_packetizer_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_h264_packetizer_create </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjmedia__h264__packetizer__cfg.htm">pjmedia_h264_packetizer_cfg</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="h264__packetizer_8h.htm#a3e89e1a3600229824050cca28d9da9a0">pjmedia_h264_packetizer</a> **&#160;</td>
          <td class="paramname"><em>p_pktz</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create H.264 packetizer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>The memory pool. </td></tr>
    <tr><td class="paramname">cfg</td><td>Packetizer settings, if NULL, default setting will be used. </td></tr>
    <tr><td class="paramname">p_pktz</td><td>Pointer to receive the packetizer.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="a00f68203d9a8bf1869f855733b470fa2" name="a00f68203d9a8bf1869f855733b470fa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00f68203d9a8bf1869f855733b470fa2">&#9670;&nbsp;</a></span>pjmedia_h264_packetize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_h264_packetize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="h264__packetizer_8h.htm#a3e89e1a3600229824050cca28d9da9a0">pjmedia_h264_packetizer</a> *&#160;</td>
          <td class="paramname"><em>pktz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga03cd006c29b1d24580f5df4db912749e">pj_uint8_t</a> *&#160;</td>
          <td class="paramname"><em>bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a>&#160;</td>
          <td class="paramname"><em>bits_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>bits_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga03cd006c29b1d24580f5df4db912749e">pj_uint8_t</a> **&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> *&#160;</td>
          <td class="paramname"><em>payload_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Generate an RTP payload from a H.264 picture bitstream. Note that this function will apply in-place processing, so the bitstream may be modified during the packetization.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pktz</td><td>The packetizer. </td></tr>
    <tr><td class="paramname">bits</td><td>The picture bitstream to be packetized. </td></tr>
    <tr><td class="paramname">bits_len</td><td>The length of the bitstream. </td></tr>
    <tr><td class="paramname">bits_pos</td><td>The bitstream offset to be packetized. </td></tr>
    <tr><td class="paramname">payload</td><td>The output payload. </td></tr>
    <tr><td class="paramname">payload_len</td><td>The output payload length.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ad48b418b11337fe6444f2dea1a8931ba" name="ad48b418b11337fe6444f2dea1a8931ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad48b418b11337fe6444f2dea1a8931ba">&#9670;&nbsp;</a></span>pjmedia_h264_unpacketize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_h264_unpacketize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="h264__packetizer_8h.htm#a3e89e1a3600229824050cca28d9da9a0">pjmedia_h264_packetizer</a> *&#160;</td>
          <td class="paramname"><em>pktz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga03cd006c29b1d24580f5df4db912749e">pj_uint8_t</a> *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a>&#160;</td>
          <td class="paramname"><em>payload_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga03cd006c29b1d24580f5df4db912749e">pj_uint8_t</a> *&#160;</td>
          <td class="paramname"><em>bits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a>&#160;</td>
          <td class="paramname"><em>bits_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>bits_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Append an RTP payload to an H.264 picture bitstream. Note that in case of noticing packet lost, application should keep calling this function with payload pointer set to NULL, as the packetizer need to update its internal state.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pktz</td><td>The packetizer. </td></tr>
    <tr><td class="paramname">payload</td><td>The payload to be unpacketized. </td></tr>
    <tr><td class="paramname">payload_len</td><td>The payload length. </td></tr>
    <tr><td class="paramname">bits</td><td>The bitstream buffer. </td></tr>
    <tr><td class="paramname">bits_len</td><td>The bitstream buffer size. </td></tr>
    <tr><td class="paramname">bits_pos</td><td>The bitstream offset to put the unpacketized payload in the bitstream, upon return, this will be updated to the latest offset as a result of the unpacketized payload.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

<p class="reference">References <a class="elRef" href="../../../pjlib/docs/html/group__pj__config.htm#gac961f7d199eeed7666ab3ec2442c1b00">PJ_END_DECL</a>.</p>

</div>
</div>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJMEDIA small footprint Open Source media stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
