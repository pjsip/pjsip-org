<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Loop Transport (2.12)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJSIP Reference</p>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Loop Transport<div class="ingroups"><a class="el" href="group__PJSIP__CORE.htm">Core SIP Library</a> &raquo; <a class="el" href="group__PJSIP__TRANSPORT.htm">Transport</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Loopback transport (for testing purposes).The loopback transport simply bounce back outgoing messages as incoming messages. This feature is used mostly during automated testing, to provide controlled behavior.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gad18b03432bcca962bdcf75a4c78dfd71"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__config.htm#ga288f0f20eddba864219d6d9b3cd006e1">PJ_BEGIN_DECL</a> <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__TRANSPORT__LOOP.htm#gad18b03432bcca962bdcf75a4c78dfd71">pjsip_loop_start</a> (<a class="el" href="sip__types_8h.htm#a2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *endpt, <a class="el" href="structpjsip__transport.htm">pjsip_transport</a> **transport)</td></tr>
<tr class="separator:gad18b03432bcca962bdcf75a4c78dfd71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadbdb430143e5eefa395cac92e5527476"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__TRANSPORT__LOOP.htm#gadbdb430143e5eefa395cac92e5527476">pjsip_loop_set_discard</a> (<a class="el" href="structpjsip__transport.htm">pjsip_transport</a> *tp, <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> discard, <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> *prev_value)</td></tr>
<tr class="separator:gadbdb430143e5eefa395cac92e5527476"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6389ecc0e8a2df9a0ffa4887dbb1abc1"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__TRANSPORT__LOOP.htm#ga6389ecc0e8a2df9a0ffa4887dbb1abc1">pjsip_loop_set_failure</a> (<a class="el" href="structpjsip__transport.htm">pjsip_transport</a> *tp, <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a> fail_flag, <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a> *prev_value)</td></tr>
<tr class="separator:ga6389ecc0e8a2df9a0ffa4887dbb1abc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga474a333bd3a5f3e1ebb896e8909fe60b"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__TRANSPORT__LOOP.htm#ga474a333bd3a5f3e1ebb896e8909fe60b">pjsip_loop_set_recv_delay</a> (<a class="el" href="structpjsip__transport.htm">pjsip_transport</a> *tp, unsigned delay, unsigned *prev_value)</td></tr>
<tr class="separator:ga474a333bd3a5f3e1ebb896e8909fe60b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabe69b85432bee7c2bae574c5414a20bc"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__TRANSPORT__LOOP.htm#gabe69b85432bee7c2bae574c5414a20bc">pjsip_loop_set_send_callback_delay</a> (<a class="el" href="structpjsip__transport.htm">pjsip_transport</a> *tp, unsigned delay, unsigned *prev_value)</td></tr>
<tr class="separator:gabe69b85432bee7c2bae574c5414a20bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga32071e69f9589807edcf3811ca97ac1a"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSIP__TRANSPORT__LOOP.htm#ga32071e69f9589807edcf3811ca97ac1a">pjsip_loop_set_delay</a> (<a class="el" href="structpjsip__transport.htm">pjsip_transport</a> *tp, unsigned delay)</td></tr>
<tr class="separator:ga32071e69f9589807edcf3811ca97ac1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="gad18b03432bcca962bdcf75a4c78dfd71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad18b03432bcca962bdcf75a4c78dfd71">&#9670;&nbsp;</a></span>pjsip_loop_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__config.htm#ga288f0f20eddba864219d6d9b3cd006e1">PJ_BEGIN_DECL</a> <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_loop_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="sip__types_8h.htm#a2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__transport.htm">pjsip_transport</a> **&#160;</td>
          <td class="paramname"><em>transport</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create and start datagram loop transport.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpt</td><td>The endpoint instance. </td></tr>
    <tr><td class="paramname">transport</td><td>Pointer to receive the transport instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="gadbdb430143e5eefa395cac92e5527476"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadbdb430143e5eefa395cac92e5527476">&#9670;&nbsp;</a></span>pjsip_loop_set_discard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_loop_set_discard </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__transport.htm">pjsip_transport</a> *&#160;</td>
          <td class="paramname"><em>tp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a>&#160;</td>
          <td class="paramname"><em>discard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> *&#160;</td>
          <td class="paramname"><em>prev_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable/disable flag to discard any packets sent using the specified loop transport.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tp</td><td>The loop transport. </td></tr>
    <tr><td class="paramname">discard</td><td>If non-zero, any outgoing packets will be discarded. </td></tr>
    <tr><td class="paramname">prev_value</td><td>Optional argument to receive previous value of the discard flag.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga6389ecc0e8a2df9a0ffa4887dbb1abc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6389ecc0e8a2df9a0ffa4887dbb1abc1">&#9670;&nbsp;</a></span>pjsip_loop_set_failure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_loop_set_failure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__transport.htm">pjsip_transport</a> *&#160;</td>
          <td class="paramname"><em>tp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a>&#160;</td>
          <td class="paramname"><em>fail_flag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__THREAD.htm#gab600dc33a20a0f36550a4538506d020e">int</a> *&#160;</td>
          <td class="paramname"><em>prev_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Enable/disable flag to simulate network error. When this flag is set, outgoing transmission will return either immediate error or error via callback. If error is to be notified via callback, then the notification will occur after some delay, which is controlled by <a class="el" href="group__PJSIP__TRANSPORT__LOOP.htm#ga32071e69f9589807edcf3811ca97ac1a">pjsip_loop_set_delay()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tp</td><td>The loop transport. </td></tr>
    <tr><td class="paramname">fail_flag</td><td>If set to 1, the transport will return fail to deliver the message. If delay is zero, failure will occur immediately; otherwise it will be reported in callback. If set to zero, the transport will successfully deliver the packet. </td></tr>
    <tr><td class="paramname">prev_value</td><td>Optional argument to receive previous value of the failure flag.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga474a333bd3a5f3e1ebb896e8909fe60b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga474a333bd3a5f3e1ebb896e8909fe60b">&#9670;&nbsp;</a></span>pjsip_loop_set_recv_delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_loop_set_recv_delay </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__transport.htm">pjsip_transport</a> *&#160;</td>
          <td class="paramname"><em>tp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>delay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>prev_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set delay (in miliseconds) before packet is received by the other end of the loop transport. This will also control the delay for error notification callback.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tp</td><td>The loop transport. </td></tr>
    <tr><td class="paramname">delay</td><td>Delay, in miliseconds. </td></tr>
    <tr><td class="paramname">prev_value</td><td>Optional argument to receive previous value of the delay.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="gabe69b85432bee7c2bae574c5414a20bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabe69b85432bee7c2bae574c5414a20bc">&#9670;&nbsp;</a></span>pjsip_loop_set_send_callback_delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_loop_set_send_callback_delay </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__transport.htm">pjsip_transport</a> *&#160;</td>
          <td class="paramname"><em>tp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>delay</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>prev_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set delay (in miliseconds) before send notification is delivered to sender. This will also control the delay for error notification callback.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tp</td><td>The loop transport. </td></tr>
    <tr><td class="paramname">delay</td><td>Delay, in miliseconds. </td></tr>
    <tr><td class="paramname">prev_value</td><td>Optional argument to receive previous value of the delay.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga32071e69f9589807edcf3811ca97ac1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga32071e69f9589807edcf3811ca97ac1a">&#9670;&nbsp;</a></span>pjsip_loop_set_delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_loop_set_delay </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__transport.htm">pjsip_transport</a> *&#160;</td>
          <td class="paramname"><em>tp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>delay</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set both receive and send notification delay.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tp</td><td>The loop transport. </td></tr>
    <tr><td class="paramname">delay</td><td>Delay, in miliseconds.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJSIP Open Source, high performance, small footprint, and very very portable SIP stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
