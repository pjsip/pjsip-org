<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Monochannel and multichannel audio frame converter (2.12)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJMEDIA Reference</p>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Monochannel and multichannel audio frame converter<div class="ingroups"><a class="el" href="group__PJMEDIA__FRAME__OP.htm">Audio Manipulation Algorithms</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Mono - multi-channels audio conversion.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga07cb3adfbb390919ef0c262e263807dd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__STEREO.htm#ga07cb3adfbb390919ef0c262e263807dd">PJMEDIA_STEREO_MIX</a>&#160;&#160;&#160;<a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bead235b21a623d982cc561fb12bffa87c0">PJ_TRUE</a></td></tr>
<tr class="separator:ga07cb3adfbb390919ef0c262e263807dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga60ab9d767c6f592e67bf59bc47e5654d"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__STEREO.htm#ga60ab9d767c6f592e67bf59bc47e5654d">pjmedia_stereo_port_options</a> { <a class="el" href="group__PJMEDIA__STEREO.htm#gga60ab9d767c6f592e67bf59bc47e5654dadafe2f6476ffc1985f8047074dedb00b">PJMEDIA_STEREO_DONT_DESTROY_DN</a> = 4
 }</td></tr>
<tr class="separator:ga60ab9d767c6f592e67bf59bc47e5654d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gadf2b0d00bb222ec55c3410b649399213"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__STEREO.htm#gadf2b0d00bb222ec55c3410b649399213">pjmedia_convert_channel_nto1</a> (<a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> mono[], const <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> multi[], unsigned channel_count, unsigned samples_per_frame, <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> mix, unsigned channel_src)</td></tr>
<tr class="separator:gadf2b0d00bb222ec55c3410b649399213"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b199f06f0643b49460dad95340435f9"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__STEREO.htm#ga5b199f06f0643b49460dad95340435f9">pjmedia_convert_channel_1ton</a> (<a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> multi[], const <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> mono[], unsigned channel_count, unsigned samples_per_frame, unsigned options)</td></tr>
<tr class="separator:ga5b199f06f0643b49460dad95340435f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga704a744d9f3161bb40d9bb993b301f46"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__STEREO.htm#ga704a744d9f3161bb40d9bb993b301f46">pjmedia_stereo_port_create</a> (<a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, <a class="el" href="structpjmedia__port.htm">pjmedia_port</a> *dn_port, unsigned channel_count, unsigned options, <a class="el" href="structpjmedia__port.htm">pjmedia_port</a> **p_port)</td></tr>
<tr class="separator:ga704a744d9f3161bb40d9bb993b301f46"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga07cb3adfbb390919ef0c262e263807dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga07cb3adfbb390919ef0c262e263807dd">&#9670;&nbsp;</a></span>PJMEDIA_STEREO_MIX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJMEDIA_STEREO_MIX&#160;&#160;&#160;<a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bead235b21a623d982cc561fb12bffa87c0">PJ_TRUE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Multichannel to monochannel conversion mixes samples from all channels into the monochannel. </p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga60ab9d767c6f592e67bf59bc47e5654d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga60ab9d767c6f592e67bf59bc47e5654d">&#9670;&nbsp;</a></span>pjmedia_stereo_port_options</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__PJMEDIA__STEREO.htm#ga60ab9d767c6f592e67bf59bc47e5654d">pjmedia_stereo_port_options</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Options for channel converter port. The #pjmedia_stereo_options is also valid for this port options. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga60ab9d767c6f592e67bf59bc47e5654dadafe2f6476ffc1985f8047074dedb00b"></a>PJMEDIA_STEREO_DONT_DESTROY_DN&#160;</td><td class="fielddoc"><p>Specifies whether this port should not destroy downstream port when this port is destroyed. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gadf2b0d00bb222ec55c3410b649399213"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadf2b0d00bb222ec55c3410b649399213">&#9670;&nbsp;</a></span>pjmedia_convert_channel_nto1()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_convert_channel_nto1 </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a>&#160;</td>
          <td class="paramname"><em>mono</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a>&#160;</td>
          <td class="paramname"><em>multi</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>channel_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>samples_per_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a>&#160;</td>
          <td class="paramname"><em>mix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>channel_src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Multichannel to monochannel conversion, it has two operation mode specified by param options, </p><dl class="section see"><dt>See also</dt><dd>pjmedia_stereo_options. This function can work safely using the same buffer (in place conversion).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mono</td><td>Output buffer to store the mono frame extracted from the multichannels frame. </td></tr>
    <tr><td class="paramname">multi</td><td>Input frame containing multichannels audio. </td></tr>
    <tr><td class="paramname">channel_count</td><td>Number of channels in the input frame. </td></tr>
    <tr><td class="paramname">samples_per_frame</td><td>Number of samples in the input frame. </td></tr>
    <tr><td class="paramname">mix</td><td>If the value is PJ_TRUE then the input channels will be mixed to produce output frame, otherwise only frame from channel_src will be copied to the output frame. </td></tr>
    <tr><td class="paramname">channel_src</td><td>When mixing is disabled, the mono output frame will be copied from this channel number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success; </dd></dl>

<p class="reference">References <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__assert.htm#gac98bea768b573f53432076a387864fb3">PJ_ASSERT_RETURN</a>, <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__errnum.htm#gaf414fe58f215fb4ea1ca3e3b401ae535">PJ_EINVAL</a>, <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bead95511b40a74f4625b161dd9e42c6e6e">PJ_FALSE</a>, <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__config.htm#gac928151ecd64bc26385f2725100b559c">PJ_INLINE</a>, and <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a>.</p>

</div>
</div>
<a id="ga5b199f06f0643b49460dad95340435f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5b199f06f0643b49460dad95340435f9">&#9670;&nbsp;</a></span>pjmedia_convert_channel_1ton()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_convert_channel_1ton </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a>&#160;</td>
          <td class="paramname"><em>multi</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a>&#160;</td>
          <td class="paramname"><em>mono</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>channel_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>samples_per_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Monochannel to multichannel conversion, it will just duplicate the samples from monochannel frame to all channels in the multichannel frame. This function can work safely using the same buffer (in place conversion) as long as the buffer is big enough for the multichannel samples.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">multi</td><td>Output buffer to store the multichannels frame mixed from the mono frame. </td></tr>
    <tr><td class="paramname">mono</td><td>The input monochannel audio frame. </td></tr>
    <tr><td class="paramname">channel_count</td><td>Desired number of channels in the output frame. </td></tr>
    <tr><td class="paramname">samples_per_frame</td><td>Number of samples in the input frame. </td></tr>
    <tr><td class="paramname">options</td><td>Options for conversion, currently must be zero.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success; </dd></dl>

<p class="reference">References <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__assert.htm#gac98bea768b573f53432076a387864fb3">PJ_ASSERT_RETURN</a>, <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__errnum.htm#gaf414fe58f215fb4ea1ca3e3b401ae535">PJ_EINVAL</a>, <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__config.htm#gac928151ecd64bc26385f2725100b559c">PJ_INLINE</a>, <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gga65c74a186d2c92fe9f088f3e1e8688bea312497101cf4a5d856e77d5302059935">PJ_SUCCESS</a>, and <a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__config.htm#ga7523f8576efd271c22b188eab05d7870">PJ_UNUSED_ARG</a>.</p>

</div>
</div>
<a id="ga704a744d9f3161bb40d9bb993b301f46"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga704a744d9f3161bb40d9bb993b301f46">&#9670;&nbsp;</a></span>pjmedia_stereo_port_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_stereo_port_create </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjmedia__port.htm">pjmedia_port</a> *&#160;</td>
          <td class="paramname"><em>dn_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>channel_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjmedia__port.htm">pjmedia_port</a> **&#160;</td>
          <td class="paramname"><em>p_port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Create a mono-multi channel converter port. This creates a converter session, which will adjust the samples of audio frame to a different channel count when the port's get_frame() and put_frame() is called.</p>
<p>When the port's get_frame() is called, this port will get a frame from the downstream port and convert the frame to the target channel count before returning it to the caller.</p>
<p>When the port's put_frame() is called, this port will convert the frame to the downstream port's channel count before giving the frame to the downstream port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Pool to allocate the structure and buffers. </td></tr>
    <tr><td class="paramname">dn_port</td><td>The downstream port, which channel count is to be converted to the target channel count. </td></tr>
    <tr><td class="paramname">channel_count</td><td>This port channel count. </td></tr>
    <tr><td class="paramname">options</td><td>Bitmask flags from <a class="el" href="group__PJMEDIA__STEREO.htm#ga60ab9d767c6f592e67bf59bc47e5654d">pjmedia_stereo_port_options</a> and also application may add PJMEDIA_STEREO_MIX to mix channels. When this flag is zero, the default behavior is to use simple N-to-1 channel converter and to destroy downstream port when this port is destroyed. </td></tr>
    <tr><td class="paramname">p_port</td><td>Pointer to receive the stereo port instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJMEDIA small footprint Open Source media stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
