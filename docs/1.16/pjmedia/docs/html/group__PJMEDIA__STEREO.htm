<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>PJMEDIA Reference: Monochannel and multichannel audio frame converter (1.16)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->

	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJMEDIA Reference</p>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.htm"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.htm"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.htm"><span>Modules</span></a></li>
      <li><a href="annotated.htm"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.htm"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>Monochannel and multichannel audio frame converter<br/>
<small>
[<a class="el" href="group__PJMEDIA__FRAME__OP.htm">Audio Manipulation Algorithms</a>]</small>
</h1>  </div>
</div>
<div class="contents">

<p>Mono - multi-channels audio conversion.  
</p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__STEREO.htm#ga07cb3adfbb390919ef0c262e263807dd">PJMEDIA_STEREO_MIX</a>&nbsp;&nbsp;&nbsp;PJ_TRUE</td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__STEREO.htm#ga60ab9d767c6f592e67bf59bc47e5654d">pjmedia_stereo_port_options</a> { <a class="el" href="group__PJMEDIA__STEREO.htm#gga60ab9d767c6f592e67bf59bc47e5654dadafe2f6476ffc1985f8047074dedb00b">PJMEDIA_STEREO_DONT_DESTROY_DN</a> =  4
 }</td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__STEREO.htm#gadf2b0d00bb222ec55c3410b649399213">pjmedia_convert_channel_nto1</a> (<a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> mono[], const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> multi[], unsigned channel_count, unsigned samples_per_frame, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a> mix, unsigned channel_src)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__STEREO.htm#ga5b199f06f0643b49460dad95340435f9">pjmedia_convert_channel_1ton</a> (<a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> multi[], const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a> mono[], unsigned channel_count, unsigned samples_per_frame, unsigned options)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__STEREO.htm#ga704a744d9f3161bb40d9bb993b301f46">pjmedia_stereo_port_create</a> (<a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, <a class="el" href="structpjmedia__port.htm">pjmedia_port</a> *dn_port, unsigned channel_count, unsigned options, <a class="el" href="structpjmedia__port.htm">pjmedia_port</a> **p_port)</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga07cb3adfbb390919ef0c262e263807dd"></a><!-- doxytag: member="stereo.h::PJMEDIA_STEREO_MIX" ref="ga07cb3adfbb390919ef0c262e263807dd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PJMEDIA_STEREO_MIX&nbsp;&nbsp;&nbsp;PJ_TRUE</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Multichannel to monochannel conversion mixes samples from all channels into the monochannel. </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga60ab9d767c6f592e67bf59bc47e5654d"></a><!-- doxytag: member="stereo.h::pjmedia_stereo_port_options" ref="ga60ab9d767c6f592e67bf59bc47e5654d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__PJMEDIA__STEREO.htm#ga60ab9d767c6f592e67bf59bc47e5654d">pjmedia_stereo_port_options</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Options for channel converter port. The pjmedia_stereo_options is also valid for this port options. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga60ab9d767c6f592e67bf59bc47e5654dadafe2f6476ffc1985f8047074dedb00b"></a><!-- doxytag: member="PJMEDIA_STEREO_DONT_DESTROY_DN" ref="gga60ab9d767c6f592e67bf59bc47e5654dadafe2f6476ffc1985f8047074dedb00b" args="" -->PJMEDIA_STEREO_DONT_DESTROY_DN</em>&nbsp;</td><td>
<p>Specifies whether this port should not destroy downstream port when this port is destroyed. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gadf2b0d00bb222ec55c3410b649399213"></a><!-- doxytag: member="stereo.h::pjmedia_convert_channel_nto1" ref="gadf2b0d00bb222ec55c3410b649399213" args="(pj_int16_t mono[], const pj_int16_t multi[], unsigned channel_count, unsigned samples_per_frame, pj_bool_t mix, unsigned channel_src)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_convert_channel_nto1 </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a>&nbsp;</td>
          <td class="paramname"> <em>mono</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a>&nbsp;</td>
          <td class="paramname"> <em>multi</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>channel_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>samples_per_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1dc7a356fb36bd2dee2bc7d6c7e817e4">pj_bool_t</a>&nbsp;</td>
          <td class="paramname"> <em>mix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>channel_src</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Multichannel to monochannel conversion, it has two operation mode specified by param options, </p>
<dl class="see"><dt><b>See also:</b></dt><dd>pjmedia_stereo_options. This function can work safely using the same buffer (in place conversion).</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mono</em>&nbsp;</td><td>Output buffer to store the mono frame extracted from the multichannels frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>multi</em>&nbsp;</td><td>Input frame containing multichannels audio. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channel_count</em>&nbsp;</td><td>Number of channels in the input frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>samples_per_frame</em>&nbsp;</td><td>Number of samples in the input frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mix</em>&nbsp;</td><td>If the value is PJ_TRUE then the input channels will be mixed to produce output frame, otherwise only frame from channel_src will be copied to the output frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channel_src</em>&nbsp;</td><td>When mixing is disabled, the mono output frame will be copied from this channel number.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success; </dd></dl>

<p>References <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__assert.htm#gac98bea768b573f53432076a387864fb3">PJ_ASSERT_RETURN</a>, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__errnum.htm#gaf414fe58f215fb4ea1ca3e3b401ae535">PJ_EINVAL</a>, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga211deece8bfa6b5b508a4b1d172928f2">PJ_FALSE</a>, and <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__config.htm#gac928151ecd64bc26385f2725100b559c">PJ_INLINE</a>.</p>

</div>
</div>
<a class="anchor" id="ga5b199f06f0643b49460dad95340435f9"></a><!-- doxytag: member="stereo.h::pjmedia_convert_channel_1ton" ref="ga5b199f06f0643b49460dad95340435f9" args="(pj_int16_t multi[], const pj_int16_t mono[], unsigned channel_count, unsigned samples_per_frame, unsigned options)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_convert_channel_1ton </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a>&nbsp;</td>
          <td class="paramname"> <em>multi</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga1bc332ac2d70cd1a23adef144571790f">pj_int16_t</a>&nbsp;</td>
          <td class="paramname"> <em>mono</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>channel_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>samples_per_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>options</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Monochannel to multichannel conversion, it will just duplicate the samples from monochannel frame to all channels in the multichannel frame. This function can work safely using the same buffer (in place conversion) as long as the buffer is big enough for the multichannel samples.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>multi</em>&nbsp;</td><td>Output buffer to store the multichannels frame mixed from the mono frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mono</em>&nbsp;</td><td>The input monochannel audio frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channel_count</em>&nbsp;</td><td>Desired number of channels in the output frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>samples_per_frame</em>&nbsp;</td><td>Number of samples in the input frame. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>Options for conversion, currently must be zero.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success; </dd></dl>

<p>References <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__assert.htm#gac98bea768b573f53432076a387864fb3">PJ_ASSERT_RETURN</a>, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__errnum.htm#gaf414fe58f215fb4ea1ca3e3b401ae535">PJ_EINVAL</a>, <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__config.htm#gac928151ecd64bc26385f2725100b559c">PJ_INLINE</a>, and <a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__pj__config.htm#ga7523f8576efd271c22b188eab05d7870">PJ_UNUSED_ARG</a>.</p>

</div>
</div>
<a class="anchor" id="ga704a744d9f3161bb40d9bb993b301f46"></a><!-- doxytag: member="stereo.h::pjmedia_stereo_port_create" ref="ga704a744d9f3161bb40d9bb993b301f46" args="(pj_pool_t *pool, pjmedia_port *dn_port, unsigned channel_count, unsigned options, pjmedia_port **p_port)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_stereo_port_create </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" doxygen="pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&nbsp;</td>
          <td class="paramname"> <em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjmedia__port.htm">pjmedia_port</a> *&nbsp;</td>
          <td class="paramname"> <em>dn_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>channel_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjmedia__port.htm">pjmedia_port</a> **&nbsp;</td>
          <td class="paramname"> <em>p_port</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Create a mono-multi channel converter port. This creates a converter session, which will adjust the samples of audio frame to a different channel count when the port's get_frame() and put_frame() is called.</p>
<p>When the port's get_frame() is called, this port will get a frame from the downstream port and convert the frame to the target channel count before returning it to the caller.</p>
<p>When the port's put_frame() is called, this port will convert the frame to the downstream port's channel count before giving the frame to the downstream port.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pool</em>&nbsp;</td><td>Pool to allocate the structure and buffers. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dn_port</em>&nbsp;</td><td>The downstream port, which channel count is to be converted to the target channel count. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>channel_count</em>&nbsp;</td><td>This port channel count. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>options</em>&nbsp;</td><td>Bitmask flags from <a class="el" href="group__PJMEDIA__STEREO.htm#ga60ab9d767c6f592e67bf59bc47e5654d">pjmedia_stereo_port_options</a> and also application may add PJMEDIA_STEREO_MIX to mix channels. When this flag is zero, the default behavior is to use simple N-to-1 channel converter and to destroy downstream port when this port is destroyed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>p_port</em>&nbsp;</td><td>Pointer to receive the stereo port instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
</div>
<p>&nbsp;</p>
<hr><center>
PJMEDIA small footprint Open Source media stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
