<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Memory/Buffer-based Playback Port (2.13)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJMEDIA Reference</p>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Memory/Buffer-based Playback Port<div class="ingroups"><a class="el" href="group__PJMEDIA__PORT.htm">Media Ports Framework</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Media playback from a fixed size memory buffer.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gae6b27c858907296f0df616d9a0b60224"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__MEM__PLAYER.htm#gae6b27c858907296f0df616d9a0b60224">pjmedia_mem_player_option</a> { <a class="el" href="group__PJMEDIA__MEM__PLAYER.htm#ggae6b27c858907296f0df616d9a0b60224a1382b5ef7cd9e154cbef9c54f6168afe">PJMEDIA_MEM_NO_LOOP</a> = 1
 }</td></tr>
<tr class="separator:gae6b27c858907296f0df616d9a0b60224"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga459702d28729e33d932858141622760f"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__MEM__PLAYER.htm#ga459702d28729e33d932858141622760f">pjmedia_mem_player_create</a> (<a class="elRef" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *pool, const void *buffer, <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a> size, unsigned clock_rate, unsigned channel_count, unsigned samples_per_frame, unsigned bits_per_sample, unsigned options, <a class="el" href="structpjmedia__port.htm">pjmedia_port</a> **p_port)</td></tr>
<tr class="separator:ga459702d28729e33d932858141622760f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9f062401c2de4eb2624e6b26c43b0ad9"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__MEM__PLAYER.htm#ga9f062401c2de4eb2624e6b26c43b0ad9">pjmedia_mem_player_set_eof_cb</a> (<a class="el" href="structpjmedia__port.htm">pjmedia_port</a> *port, void *user_data, <a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>(*cb)(<a class="el" href="structpjmedia__port.htm">pjmedia_port</a> *port, void *usr_data))</td></tr>
<tr class="separator:ga9f062401c2de4eb2624e6b26c43b0ad9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga90a914bc530da748665acee95eeeaf16"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMEDIA__MEM__PLAYER.htm#ga90a914bc530da748665acee95eeeaf16">pjmedia_mem_player_set_eof_cb2</a> (<a class="el" href="structpjmedia__port.htm">pjmedia_port</a> *port, void *user_data, void(*cb)(<a class="el" href="structpjmedia__port.htm">pjmedia_port</a> *port, void *usr_data))</td></tr>
<tr class="separator:ga90a914bc530da748665acee95eeeaf16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >A memory/buffer based playback port is used to play media from a fixed size buffer. This is useful over <a class="el" href="group__PJMEDIA__FILE__PLAY.htm">WAV File Player</a> for situation where filesystems are not available in the target system. </p>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gae6b27c858907296f0df616d9a0b60224" name="gae6b27c858907296f0df616d9a0b60224"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae6b27c858907296f0df616d9a0b60224">&#9670;&nbsp;</a></span>pjmedia_mem_player_option</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__PJMEDIA__MEM__PLAYER.htm#gae6b27c858907296f0df616d9a0b60224">pjmedia_mem_player_option</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Memory player options. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ggae6b27c858907296f0df616d9a0b60224a1382b5ef7cd9e154cbef9c54f6168afe" name="ggae6b27c858907296f0df616d9a0b60224a1382b5ef7cd9e154cbef9c54f6168afe"></a>PJMEDIA_MEM_NO_LOOP&#160;</td><td class="fielddoc"><p >Tell the memory player to return NULL frame when the whole buffer has been played instead of rewinding the buffer back to start position. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga459702d28729e33d932858141622760f" name="ga459702d28729e33d932858141622760f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga459702d28729e33d932858141622760f">&#9670;&nbsp;</a></span>pjmedia_mem_player_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_mem_player_create </td>
          <td>(</td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/structpj__pool__t.htm">pj_pool_t</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#ga9fdb3ceb491cd888cd30ca30d78026e8">pj_size_t</a>&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>clock_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>channel_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>samples_per_frame</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>bits_per_sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjmedia__port.htm">pjmedia_port</a> **&#160;</td>
          <td class="paramname"><em>p_port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create the buffer based playback to play the media from the specified buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Pool to allocate memory for the port structure. </td></tr>
    <tr><td class="paramname">buffer</td><td>The buffer to play the media from, which should be available throughout the life time of the port. The player plays the media directly from this buffer (i.e. no copying is done). </td></tr>
    <tr><td class="paramname">size</td><td>The size of the buffer, in bytes. </td></tr>
    <tr><td class="paramname">clock_rate</td><td>Sampling rate. </td></tr>
    <tr><td class="paramname">channel_count</td><td>Number of channels. </td></tr>
    <tr><td class="paramname">samples_per_frame</td><td>Number of samples per frame. </td></tr>
    <tr><td class="paramname">bits_per_sample</td><td>Number of bits per sample. </td></tr>
    <tr><td class="paramname">options</td><td>Option flags, see <a class="el" href="group__PJMEDIA__MEM__PLAYER.htm#gae6b27c858907296f0df616d9a0b60224">pjmedia_mem_player_option</a> </td></tr>
    <tr><td class="paramname">p_port</td><td>Pointer to receive the port instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success, or the appropriate error code. </dd></dl>

</div>
</div>
<a id="ga9f062401c2de4eb2624e6b26c43b0ad9" name="ga9f062401c2de4eb2624e6b26c43b0ad9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9f062401c2de4eb2624e6b26c43b0ad9">&#9670;&nbsp;</a></span>pjmedia_mem_player_set_eof_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_mem_player_set_eof_cb </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjmedia__port.htm">pjmedia_port</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>(*)(<a class="el" href="structpjmedia__port.htm">pjmedia_port</a> *port, void *usr_data)&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Register a callback to be called when the buffer reading has reached the end of buffer. If the player is set to play repeatedly, then the callback will be called multiple times. Note that only one callback can be registered for each player port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The memory player port. </td></tr>
    <tr><td class="paramname">user_data</td><td>User data to be specified in the callback </td></tr>
    <tr><td class="paramname">cb</td><td>Callback to be called. If the callback returns non- PJ_SUCCESS, the playback will stop. Note that if application destroys the player port in the callback, it must return non-PJ_SUCCESS here.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga90a914bc530da748665acee95eeeaf16" name="ga90a914bc530da748665acee95eeeaf16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga90a914bc530da748665acee95eeeaf16">&#9670;&nbsp;</a></span>pjmedia_mem_player_set_eof_cb2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_mem_player_set_eof_cb2 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjmedia__port.htm">pjmedia_port</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="structpjmedia__port.htm">pjmedia_port</a> *port, void *usr_data)&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Register a callback to be called when the buffer reading has reached the end of buffer. If the player is set to play repeatedly, then the callback will be called multiple times. Note that only one callback can be registered for each player port.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>The memory player port. </td></tr>
    <tr><td class="paramname">user_data</td><td>User data to be specified in the callback </td></tr>
    <tr><td class="paramname">cb</td><td>Callback to be called. Note that if application wishes to stop the playback, it can disconnect the port in the callback, and only after all connections have been removed could the application safely destroy the port.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJMEDIA small footprint Open Source media stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
