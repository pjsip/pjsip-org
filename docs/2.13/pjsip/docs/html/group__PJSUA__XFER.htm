<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>SIP REFER (RFC 3515) for Call Transfer etc. (2.13)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJSIP Reference</p>
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">SIP REFER (RFC 3515) for Call Transfer etc.<div class="ingroups"><a class="el" href="group__PJSIP__HIGH__UA.htm">User Agent Library</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>SIP REFER dialog usage (call transfer, etc.)  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga78e4ec0dea90811d4bf59c3b3745b10a"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structpjsip__method.htm">pjsip_method</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga78e4ec0dea90811d4bf59c3b3745b10a">pjsip_get_refer_method</a> (void)</td></tr>
<tr class="separator:ga78e4ec0dea90811d4bf59c3b3745b10a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97746dc727dd55845df4d5d909e98cfb"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga97746dc727dd55845df4d5d909e98cfb">pjsip_xfer_init_module</a> (<a class="el" href="group__PJSIP__TYPES.htm#ga2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *endpt)</td></tr>
<tr class="separator:ga97746dc727dd55845df4d5d909e98cfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga94dd90def5855d33895254b268a13d7e"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga94dd90def5855d33895254b268a13d7e">pjsip_xfer_create_uac</a> (<a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *dlg, const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *user_cb, <a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> **p_evsub)</td></tr>
<tr class="separator:ga94dd90def5855d33895254b268a13d7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa6e88b22d59d8b708b20c6e29aee0c1f"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#gaa6e88b22d59d8b708b20c6e29aee0c1f">pjsip_xfer_create_uas</a> (<a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *dlg, const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *user_cb, <a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, <a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> **p_evsub)</td></tr>
<tr class="separator:gaa6e88b22d59d8b708b20c6e29aee0c1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9868321d7ca14d3c55c6c1a8dd6fc4bd"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga9868321d7ca14d3c55c6c1a8dd6fc4bd">pjsip_xfer_initiate</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *sub, const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *refer_to_uri, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr class="separator:ga9868321d7ca14d3c55c6c1a8dd6fc4bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad22101ca3b21e8683083f3e5c7935b31"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#gad22101ca3b21e8683083f3e5c7935b31">pjsip_xfer_accept</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *rdata, int st_code, const <a class="el" href="structpjsip__hdr.htm">pjsip_hdr</a> *hdr_list)</td></tr>
<tr class="separator:gad22101ca3b21e8683083f3e5c7935b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4db2f6af2d3fdf4a5e3cb7f8af1636dc"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga4db2f6af2d3fdf4a5e3cb7f8af1636dc">pjsip_xfer_notify</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *sub, <a class="el" href="group__PJSIP__EVENT__NOT.htm#ga4a6454679f18fe8337a2fc78063010bf">pjsip_evsub_state</a> state, int xfer_st_code, const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *xfer_st_text, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr class="separator:ga4db2f6af2d3fdf4a5e3cb7f8af1636dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga471db9bf2e3c1fd2fd2bd6e584273fc1"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#ga471db9bf2e3c1fd2fd2bd6e584273fc1">pjsip_xfer_current_notify</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **p_tdata)</td></tr>
<tr class="separator:ga471db9bf2e3c1fd2fd2bd6e584273fc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabba0200ce8c64be4bbad1073d2d8a56e"><td class="memItemLeft" align="right" valign="top"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#gabba0200ce8c64be4bbad1073d2d8a56e">pjsip_xfer_send_request</a> (<a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *sub, <a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> *tdata)</td></tr>
<tr class="separator:gabba0200ce8c64be4bbad1073d2d8a56e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gaf1235c7c7e1062122ab12462cb90c967"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="structpjsip__method.htm">pjsip_method</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJSUA__XFER.htm#gaf1235c7c7e1062122ab12462cb90c967">pjsip_refer_method</a></td></tr>
<tr class="separator:gaf1235c7c7e1062122ab12462cb90c967"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >This describes a generic handling of SIP REFER request. The SIP REFER request is described in RFC 3515, and commonly used to perform call transfer functionality. Other types of SIP REFER usages are described in draft-worley-sip-many-refers-00 draft, for example:</p><ul>
<li>Remote Dial: where UAC sends REFER to instruct REFER recipient to initiate an INVITE session to some target.</li>
</ul>
<p >A REFER request can be sent inside or outside existing dialog context, although for call transfer case, it is more common to send REFER inside existing INVITE session context. PJSIP supports both sending REFER request inside or outside dialog context.</p>
<p >The REFER framework uses <a class="el" href="group__PJSIP__EVENT__NOT.htm">SIP Event Notification (RFC 3265) Module</a> to manage the event subscription created by the REFER request. Because of this, application must link with <b>pjsip-ua</b> AND <b>pjsip-simple</b> static libraries to use REFER functionality.</p>
<p >Reference:</p><ul>
<li><a href="http://www.ietf.org/rfc/rfc3515.txt">RFC 3515: The Session Initiation Protocol (SIP) Refer Method</a></li>
<li><a class="el" href="group__PJSIP__EVENT__NOT.htm">SIP Event Notification (RFC 3265) Module</a> </li>
</ul>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga78e4ec0dea90811d4bf59c3b3745b10a" name="ga78e4ec0dea90811d4bf59c3b3745b10a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga78e4ec0dea90811d4bf59c3b3745b10a">&#9670;&nbsp;</a></span>pjsip_get_refer_method()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structpjsip__method.htm">pjsip_method</a> * pjsip_get_refer_method </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Get REFER method constant </p>

</div>
</div>
<a id="ga97746dc727dd55845df4d5d909e98cfb" name="ga97746dc727dd55845df4d5d909e98cfb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97746dc727dd55845df4d5d909e98cfb">&#9670;&nbsp;</a></span>pjsip_xfer_init_module()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_init_module </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__TYPES.htm#ga2b184bd797bb08929129539d9dddd329">pjsip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Initialize the REFER subsystem. This currently does very little (only register REFER as supported method). </p>

</div>
</div>
<a id="ga94dd90def5855d33895254b268a13d7e" name="ga94dd90def5855d33895254b268a13d7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga94dd90def5855d33895254b268a13d7e">&#9670;&nbsp;</a></span>pjsip_xfer_create_uac()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_create_uac </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *&#160;</td>
          <td class="paramname"><em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *&#160;</td>
          <td class="paramname"><em>user_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> **&#160;</td>
          <td class="paramname"><em>p_evsub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create transferer (sender of REFER request).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlg</td><td>The underlying dialog to use. </td></tr>
    <tr><td class="paramname">user_cb</td><td>Pointer to callbacks to receive presence subscription events. </td></tr>
    <tr><td class="paramname">p_evsub</td><td>Pointer to receive the presence subscription session.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="gaa6e88b22d59d8b708b20c6e29aee0c1f" name="gaa6e88b22d59d8b708b20c6e29aee0c1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa6e88b22d59d8b708b20c6e29aee0c1f">&#9670;&nbsp;</a></span>pjsip_xfer_create_uas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_create_uas </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjsip__dialog.htm">pjsip_dialog</a> *&#160;</td>
          <td class="paramname"><em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__evsub__user.htm">pjsip_evsub_user</a> *&#160;</td>
          <td class="paramname"><em>user_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> **&#160;</td>
          <td class="paramname"><em>p_evsub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create transferee (receiver of REFER request).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dlg</td><td>The underlying dialog to use. </td></tr>
    <tr><td class="paramname">user_cb</td><td>Pointer to callbacks to receive presence subscription events. </td></tr>
    <tr><td class="paramname">rdata</td><td>The incoming SUBSCRIBE request that creates the event subscription. </td></tr>
    <tr><td class="paramname">p_evsub</td><td>Pointer to receive the presence subscription session.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga9868321d7ca14d3c55c6c1a8dd6fc4bd" name="ga9868321d7ca14d3c55c6c1a8dd6fc4bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9868321d7ca14d3c55c6c1a8dd6fc4bd">&#9670;&nbsp;</a></span>pjsip_xfer_initiate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_initiate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&#160;</td>
          <td class="paramname"><em>refer_to_uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&#160;</td>
          <td class="paramname"><em>p_tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Call this function to create request to initiate REFER subscription, to refresh subscription, or to unsubscribe. For request other than the initial REFER request, "refer_to_uri" argument may be NULL.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Client subscription instance. </td></tr>
    <tr><td class="paramname">refer_to_uri</td><td>URI to be put to the Refer-To header. This argument may be NULL for subsequent REFER requests. </td></tr>
    <tr><td class="paramname">p_tdata</td><td>Pointer to receive the request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="gad22101ca3b21e8683083f3e5c7935b31" name="gad22101ca3b21e8683083f3e5c7935b31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad22101ca3b21e8683083f3e5c7935b31">&#9670;&nbsp;</a></span>pjsip_xfer_accept()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_accept </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__rx__data.htm">pjsip_rx_data</a> *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>st_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structpjsip__hdr.htm">pjsip_hdr</a> *&#160;</td>
          <td class="paramname"><em>hdr_list</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Accept the incoming REFER request by sending 2xx response.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Server subscription instance. </td></tr>
    <tr><td class="paramname">rdata</td><td>The incoming subscription request message. </td></tr>
    <tr><td class="paramname">st_code</td><td>Status code, which MUST be 2xx. </td></tr>
    <tr><td class="paramname">hdr_list</td><td>Optional list of headers to be added in the response.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga4db2f6af2d3fdf4a5e3cb7f8af1636dc" name="ga4db2f6af2d3fdf4a5e3cb7f8af1636dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4db2f6af2d3fdf4a5e3cb7f8af1636dc">&#9670;&nbsp;</a></span>pjsip_xfer_notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#ga4a6454679f18fe8337a2fc78063010bf">pjsip_evsub_state</a>&#160;</td>
          <td class="paramname"><em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xfer_st_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="elRef" href="../../../pjlib/docs/html/structpj__str__t.htm">pj_str_t</a> *&#160;</td>
          <td class="paramname"><em>xfer_st_text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&#160;</td>
          <td class="paramname"><em>p_tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >For notifier, create NOTIFY request to subscriber, and set the state of the subscription.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>The server subscription (notifier) instance. </td></tr>
    <tr><td class="paramname">state</td><td>New state to set. </td></tr>
    <tr><td class="paramname">xfer_st_code</td><td>The call status code to be reported with the NOTIFY request. </td></tr>
    <tr><td class="paramname">xfer_st_text</td><td>Optional call status text to be reported with the NOTIFY request. If the value is NULL, default status text will be used. </td></tr>
    <tr><td class="paramname">p_tdata</td><td>Pointer to receive the request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga471db9bf2e3c1fd2fd2bd6e584273fc1" name="ga471db9bf2e3c1fd2fd2bd6e584273fc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga471db9bf2e3c1fd2fd2bd6e584273fc1">&#9670;&nbsp;</a></span>pjsip_xfer_current_notify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_current_notify </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> **&#160;</td>
          <td class="paramname"><em>p_tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Create NOTIFY request to reflect current subscription status. Application can only call this function after it has sent NOTIFY before. This will also re-send the last "message/sipfrag" body that was sent in the previous NOTIFY.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>Server subscription object. </td></tr>
    <tr><td class="paramname">p_tdata</td><td>Pointer to receive request.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="gabba0200ce8c64be4bbad1073d2d8a56e" name="gabba0200ce8c64be4bbad1073d2d8a56e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabba0200ce8c64be4bbad1073d2d8a56e">&#9670;&nbsp;</a></span>pjsip_xfer_send_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjsip_xfer_send_request </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJSIP__EVENT__NOT.htm#gae4f79b76ea80e7cb44e228abedc2556d">pjsip_evsub</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjsip__tx__data.htm">pjsip_tx_data</a> *&#160;</td>
          <td class="paramname"><em>tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Send request message that was previously created with initiate(), notify(), or current_notify(). Application may also send request created with other functions, e.g. authentication. But the request MUST be either request that creates/refresh subscription or NOTIFY request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sub</td><td>The event subscription object. </td></tr>
    <tr><td class="paramname">tdata</td><td>Request message to be send.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

<p class="reference">References <a class="elRef" href="../../../pjlib/docs/html/group__pj__config.htm#gac961f7d199eeed7666ab3ec2442c1b00">PJ_END_DECL</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gaf1235c7c7e1062122ab12462cb90c967" name="gaf1235c7c7e1062122ab12462cb90c967"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf1235c7c7e1062122ab12462cb90c967">&#9670;&nbsp;</a></span>pjsip_refer_method</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="structpjsip__method.htm">pjsip_method</a> pjsip_refer_method</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Declaration for REFER method constant. </p>

</div>
</div>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJSIP Open Source, high performance, small footprint, and very very portable SIP stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
