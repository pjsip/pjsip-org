<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Opus Codec Family (2.12)</title>
<link href="/style/style.css" rel="stylesheet" type="text/css">
</head><body>
	<!--#include virtual="/header.html" -->
	<p><A HREF="/">Home</A> --&gt; <A HREF="/docs.htm">Documentations</A> --&gt; PJMEDIA Reference</p>
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Opus Codec Family<div class="ingroups"><a class="el" href="group__PJMEDIA__CODEC.htm">Codec Framework</a> &raquo; <a class="el" href="group__PJMEDIA__CODEC__CODECS.htm">Supported codecs</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Opus codec wrapper.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpjmedia__codec__opus__config.htm">pjmedia_codec_opus_config</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga46647bc452ab11addf8f240da629b57b"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__OPUS.htm#ga46647bc452ab11addf8f240da629b57b">pjmedia_codec_opus_init</a> (<a class="el" href="group__PJMEDIA__TYPES.htm#ga7c3623d8e90e22b7184a6e42dc24f6f5">pjmedia_endpt</a> *endpt)</td></tr>
<tr class="separator:ga46647bc452ab11addf8f240da629b57b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2bf4a6a493b5f493cd2322da9d651aea"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__OPUS.htm#ga2bf4a6a493b5f493cd2322da9d651aea">pjmedia_codec_opus_deinit</a> (void)</td></tr>
<tr class="separator:ga2bf4a6a493b5f493cd2322da9d651aea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5fde30f6165456958ff22ed1553ac93e"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__OPUS.htm#ga5fde30f6165456958ff22ed1553ac93e">pjmedia_codec_opus_get_config</a> (<a class="el" href="structpjmedia__codec__opus__config.htm">pjmedia_codec_opus_config</a> *cfg)</td></tr>
<tr class="separator:ga5fde30f6165456958ff22ed1553ac93e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga55e7da1d6680420999e49f9a53e3ec7b"><td class="memItemLeft" align="right" valign="top"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__PJMED__OPUS.htm#ga55e7da1d6680420999e49f9a53e3ec7b">pjmedia_codec_opus_set_default_param</a> (const <a class="el" href="structpjmedia__codec__opus__config.htm">pjmedia_codec_opus_config</a> *cfg, <a class="el" href="structpjmedia__codec__param.htm">pjmedia_codec_param</a> *param)</td></tr>
<tr class="separator:ga55e7da1d6680420999e49f9a53e3ec7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This section describes functions to initialize and register Opus codec factory to the codec manager. After the codec factory has been registered, application can use <a class="el" href="group__PJMEDIA__CODEC.htm">Codec Framework</a> API to manipulate the codec.</p>
<p>Opus codec uses multiple bit rates, and supports fullband (48 kHz sampling rate), super wideband (24 kHz sampling rate), wideband (16 kHz sampling rate), medium band (12kHz sampling rate), and narrowband (8 kHz sampling rate).</p>
<h1><a class="anchor" id="codec_setting"></a>
Codec Settings</h1>
<p>General codec settings for this codec such as VAD and PLC can be manipulated through the <code>setting</code> field in <a class="el" href="structpjmedia__codec__param.htm">pjmedia_codec_param</a> (see the documentation of <a class="el" href="structpjmedia__codec__param.htm">pjmedia_codec_param</a> for more info).</p>
<p>For Opus codec specific settings, such as sample rate, channel count, bit rate, complexity, and CBR, can be configured in <a class="el" href="structpjmedia__codec__opus__config.htm">pjmedia_codec_opus_config</a>. The default setting of sample rate is specified in <a class="el" href="group__pjmedia__codec__config.htm#gaa6ca94fc3b61dfbc6444815aa50bf2dd">PJMEDIA_CODEC_OPUS_DEFAULT_SAMPLE_RATE</a>. The default setting of bitrate is specified in <a class="el" href="group__pjmedia__codec__config.htm#ga66361a963744edc157ca2a37b5e7c6fd">PJMEDIA_CODEC_OPUS_DEFAULT_BIT_RATE</a>. And the default setting of complexity is specified in <a class="el" href="group__pjmedia__codec__config.htm#ga625ddda5f622b4b48a798db142725c76">PJMEDIA_CODEC_OPUS_DEFAULT_COMPLEXITY</a>.</p>
<p>After modifying any of these settings, application needs to call <a class="el" href="group__PJMED__OPUS.htm#ga55e7da1d6680420999e49f9a53e3ec7b">pjmedia_codec_opus_set_default_param()</a>, which will generate the appropriate decoding fmtp attributes.</p>
<p>Here is an example of modifying the codec settings: </p><div class="fragment"><div class="line"><a class="code" href="structpjmedia__codec__param.htm">pjmedia_codec_param</a> param;</div><div class="line"><a class="code" href="structpjmedia__codec__opus__config.htm">pjmedia_codec_opus_config</a> opus_cfg;</div><div class="line"></div><div class="line"><a class="code" href="group__PJMEDIA__CODEC.htm#ga7766eaa06db1ec402540cefe1b329af1">pjmedia_codec_mgr_get_default_param</a>(.., &amp;param);</div><div class="line"><a class="code" href="group__PJMED__OPUS.htm#ga5fde30f6165456958ff22ed1553ac93e">pjmedia_codec_opus_get_config</a>(&amp;opus_cfg);</div><div class="line">...</div><div class="line"><span class="comment">// Set VAD</span></div><div class="line">param.setting.vad = 1;</div><div class="line"><span class="comment">// Set PLC</span></div><div class="line">param.<a class="code" href="structpjmedia__codec__param.htm#a33372b5bb303019cfc1c964bb1d9f3ce">setting</a>.<a class="code" href="structpjmedia__codec__param.htm#ab5abfc5c4115233551e0aa69ffb67ff1">vad</a> = 1;</div><div class="line"><span class="comment">// Set sample rate</span></div><div class="line">opus_cfg.<a class="code" href="structpjmedia__codec__opus__config.htm#a0972868b5c23b52aed95e3ea91e22d67">sample_rate</a> = 16000;</div><div class="line"><span class="comment">// Set channel count</span></div><div class="line">opus_cfg.<a class="code" href="structpjmedia__codec__opus__config.htm#af89dbd78f23482d3ce32b672f9836622">channel_cnt</a> = 2;</div><div class="line"><span class="comment">// Set bit rate</span></div><div class="line">opus_cfg.<a class="code" href="structpjmedia__codec__opus__config.htm#ae45dea0060c5d10a3addca61813fdef4">bit_rate</a> = 20000;</div><div class="line">...</div><div class="line">pjmedia_codec_opus_set_default_param(&amp;opus_cfg, &amp;param);</div></div><!-- fragment --> <h2 class="groupheader">Function Documentation</h2>
<a id="ga46647bc452ab11addf8f240da629b57b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga46647bc452ab11addf8f240da629b57b">&#9670;&nbsp;</a></span>pjmedia_codec_opus_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_codec_opus_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__PJMEDIA__TYPES.htm#ga7c3623d8e90e22b7184a6e42dc24f6f5">pjmedia_endpt</a> *&#160;</td>
          <td class="paramname"><em>endpt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize and register Opus codec factory to pjmedia endpoint.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpt</td><td>The pjmedia endpoint.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga2bf4a6a493b5f493cd2322da9d651aea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2bf4a6a493b5f493cd2322da9d651aea">&#9670;&nbsp;</a></span>pjmedia_codec_opus_deinit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_codec_opus_deinit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unregister Opus codec factory from pjmedia endpoint and deinitialize the Opus codec library.</p>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga5fde30f6165456958ff22ed1553ac93e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5fde30f6165456958ff22ed1553ac93e">&#9670;&nbsp;</a></span>pjmedia_codec_opus_get_config()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_codec_opus_get_config </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpjmedia__codec__opus__config.htm">pjmedia_codec_opus_config</a> *&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the default Opus configuration.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg</td><td>Opus codec configuration.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
<a id="ga55e7da1d6680420999e49f9a53e3ec7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga55e7da1d6680420999e49f9a53e3ec7b">&#9670;&nbsp;</a></span>pjmedia_codec_opus_set_default_param()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="elRef" doxygen="/home/nn/projects/pjproject/pjlib/docs/pjlib.tag:../../../pjlib/docs/html/" href="../../../pjlib/docs/html/group__PJ__BASIC.htm#gab43ba3167bd2a2ab4580509dbf79200e">pj_status_t</a> pjmedia_codec_opus_set_default_param </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structpjmedia__codec__opus__config.htm">pjmedia_codec_opus_config</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpjmedia__codec__param.htm">pjmedia_codec_param</a> *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the default Opus configuration and set the default Opus codec param. Note that the function will call <a class="el" href="group__PJMEDIA__CODEC.htm#gacbd83a91545d9f969370cd5e7918c75d">pjmedia_codec_mgr_set_default_param()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cfg</td><td>Opus codec configuration. </td></tr>
    <tr><td class="paramname">param</td><td>On input, the default Opus codec parameter to be set. On output, the current default Opus codec parameter after setting. This may be different from the input because some settings can be rejected, or overwritten by the Opus codec configuration above.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PJ_SUCCESS on success. </dd></dl>

</div>
</div>
</div><!-- contents -->
<p>&nbsp;</p>
<hr><center>
PJMEDIA small footprint Open Source media stack<br>
Copyright (C) 2006-2008 Teluu Inc.
</center>
<!--#include virtual="/footer.html" -->
</BODY>
</HTML>
